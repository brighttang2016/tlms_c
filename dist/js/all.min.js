/**
 * Created by pujjr on 2017/7/11.
 */
var app = angular.module('myApp',[
    'ngLocale',
    'templates',
    'ui.router',
    'ngAnimate',
    'toaster',
     'ngCookies',
    'ngResource',
    'ngSanitize',
    'ngTouch',
    'ngStorage',
    'ui.router',
    'ui.bootstrap',
    'ui.load',
    //'ui.jq',//延迟加载jquery构件
    'ui.validate',
    'oc.lazyLoad',
    'pascalprecht.translate',
    'ncy-angular-breadcrumb',
    'ngWebSocket',
    'restangular',
    'com.tang.intercepter',
    'com.tang.controller.MyController1',
    'com.tang.service.XhrService',
    'com.tang.controller.MyController2',
    'com.tang.controller.LoginController',
    'com.tang.directive.LoginDirective',
    //'com.tang.appController',
    'com.tang.controller.RouterController',
    'com.tang.controller.ToasterController',
    'com.app.user',
    'com.app.callcenter',
    'com.tlms.sys.service',
    'com.tlms.sys.controller',
    'com.app.process',
    'com.app.block',
    'com.app.uibootstrap',
    'com.app.websocket'

]);
app.config(function($httpProvider) {
    $httpProvider.interceptors.push('myInterceptor');
    //console.log($httpProvider.defaults.headers.common);
      //扩充http头
     //$httpProvider.defaults.headers.post['token'] = getCookie('token');
     //$httpProvider.defaults.headers.post['expireTime'] = getCookie('expireTime');
});

app.config(['$locationProvider',function($locationProvider){
    //$locationProvider.html5Mode(false);
    $locationProvider.hashPrefix('');
}]);
/*
app.config(function(RestangularProvider){
    RestangularProvider.setRequestInterceptor(function(elem,operation,what){
        console.log("setRequestInterceptor");
        console.log(elem);
        console.log(operation);
        console.log(what);
        elem.time = "200810405234";
    });
});*/

app.factory('TlmsRestangular',function(Restangular){
    return Restangular.withConfig(function(configurer){
        configurer.setBaseUrl(TLMS_URL);
    });
});

app.factory('PujjrPushRestangular',function(Restangular){
    return Restangular.withConfig(function(configurer){
        configurer.setBaseUrl(PUJJR_PUSH_URL);
    });
});

app.factory('myInterceptor',function($q,CookieService,$state,$rootScope){
    var interceptor = {
        'request':function(config){
            //console.log("request");
            //console.log(config);
            /**
             * 发送请求时，请求消息头headers是json对象
             */
            config.headers['token'] =CookieService.getCookie('token');
            config.headers['expireTime'] =CookieService.getCookie('expireTime');
            return config;
        },
        'response':function(config){
            //console.log('response');
            /*console.log(config);
            console.log(config.headers['token']);
            console.log(config.headers("token"));*/
            /**
             *接收请求时，接收消息头headers是函数
             */
            if(config.status == '200'){

            }else{

            }
            var token = config.headers('token')+'';
            var expireTime = config.headers('expireTime')+'';
            //console.log('token:'+token);
            //console.log('expireTime:'+expireTime);
            //console.log(token == 'null');
            if(token != null && token != undefined && token != '' && token != 'null'){
                CookieService.setCookie('token',token);
            }
            if(expireTime != null && expireTime != undefined && expireTime != '' && token != 'null'){
                CookieService.setCookie('expireTime',expireTime);
            }
            return config;
        }
    };
    return interceptor;

});

app.run(['$rootScope',function($rootScope){
    console.log("run***********************");
    /**
     * 状态改变监听
     */
    $rootScope.previousState;
    $rootScope.currentState;
    $rootScope.$on('$stateChangeSuccess', function(ev, to, toParams, from, fromParams) {
        $rootScope.previousState = from.name;
        $rootScope.currentState = to.name;
        console.log('Previous state:'+$rootScope.previousState);
        console.log('Current state:'+$rootScope.currentState);
    });
}]);


app.config(['WebsocketServiceProvider',function(WebsocketServiceProvider){
    WebsocketServiceProvider.setWebSocketUrl(SERVER_URL.PJ_WS_URI);
}]);






/**
 * Created by pujjr on 2017/7/18.
 */
var BASE_URL='http://127.0.0.1:8080/pcms-web';
var TLMS_URL='http://localhost:8090/tlms-web';
//前端发起模拟推送地址
var PUJJR_PUSH_URL='http://localhost:8070/pjmessage-web';
var SERVER_URL = {
    /**认证地址**/
    AUTH_SERVER_URL:BASE_URL,
    /**接口调用地址**/
    API_SERVER_URL:BASE_URL+'/service',
    /**文件下载地址**/
    FILE_DOWNLOAD_URL:BASE_URL+'/image/file/img/',
    /**文件上传地址**/
    FILE_UPLOAD_URL:BASE_URL+'/service/file/uploadFile/',
    /**流程编辑器地址**/
    WORKFLOW_EDITOR_URL:BASE_URL+'/modeler.html?modelId=',
    /**流程图片查看地址**/
    WORKFLOW_IMG_URL:BASE_URL+'/public/workflow/config/img/',
    /**OSS地址**/
    OSS_URL:'http://pcms-test.oss-cn-hzfinance.aliyuncs.com/'
    /**OSS_URL:'http://pujjr-cs.oss-cn-hangzhou.aliyuncs.com/'**/
    ,WS_URI:'ws://172.18.10.78:5061/'
   /* ,PJ_WS_URI:'ws://localhost:8090/tlms-web/tlmsWebSocketServer.ctrl'*/
    ,PJ_WS_URI:'ws://localhost:8070/pjmessage-web/pujjrPushMs/pujjrWebSocketServer'
};
angular.module('myApp')
    .config(['$stateProvider','$urlRouterProvider',function($stateProvider,$urlRouterProvider){
        //$urlRouterProvider.otherwise('/home');
        console.log($stateProvider);
    }]);

// lazyload config

angular.module('myApp')
    /**
   * jQuery plugin config use ui-jq directive , config the js and css files that required
   * key: function name of the jQuery plugin
   * value: array of the css js file located
   */
    .constant('JQ_CONFIG',{})
  .constant('JQ_CONFIG2', {
      easyPieChart:   ['vendor/jquery/charts/easypiechart/jquery.easy-pie-chart.js'],
      sparkline:      ['vendor/jquery/charts/sparkline/jquery.sparkline.min.js'],
      plot:           ['vendor/jquery/charts/flot/jquery.flot.min.js', 
                          'vendor/jquery/charts/flot/jquery.flot.resize.js',
                          'vendor/jquery/charts/flot/jquery.flot.tooltip.min.js',
                          'vendor/jquery/charts/flot/jquery.flot.spline.js',
                          'vendor/jquery/charts/flot/jquery.flot.orderBars.js',
                          'vendor/jquery/charts/flot/jquery.flot.pie.min.js'],
      slimScroll:     ['vendor/jquery/slimscroll/jquery.slimscroll.min.js'],
      sortable:       ['vendor/jquery/sortable/jquery.sortable.js'],
      nestable:       ['vendor/jquery/nestable/jquery.nestable.js',
                          'vendor/jquery/nestable/nestable.css'],
      filestyle:      ['vendor/jquery/file/bootstrap-filestyle.min.js'],
      slider:         ['vendor/jquery/slider/bootstrap-slider.js',
                          'vendor/jquery/slider/slider.css'],
      chosen:         ['vendor/jquery/chosen/chosen.jquery.min.js',
                          'vendor/jquery/chosen/chosen.css'],
      TouchSpin:      ['vendor/jquery/spinner/jquery.bootstrap-touchspin.min.js',
                          'vendor/jquery/spinner/jquery.bootstrap-touchspin.css'],
      wysiwyg:        ['vendor/jquery/wysiwyg/bootstrap-wysiwyg.js',
                          'vendor/jquery/wysiwyg/jquery.hotkeys.js'],
      dataTable:      ['vendor/jquery/datatables/jquery.dataTables.min.js',
                          'vendor/jquery/datatables/dataTables.bootstrap.js',
                          'vendor/jquery/datatables/dataTables.bootstrap.css'],
      vectorMap:      ['vendor/jquery/jvectormap/jquery-jvectormap.min.js', 
                          'vendor/jquery/jvectormap/jquery-jvectormap-world-mill-en.js',
                          'vendor/jquery/jvectormap/jquery-jvectormap-us-aea-en.js',
                          'vendor/jquery/jvectormap/jquery-jvectormap.css'],
      footable:       ['vendor/jquery/footable/footable.all.min.js',
                          'vendor/jquery/footable/footable.core.css']
      }
  )
  // oclazyload config
  .config(['$ocLazyLoadProvider', function($ocLazyLoadProvider) {
      // We configure ocLazyLoad to use the lib script.js as the async loader
      $ocLazyLoadProvider.config({
          debug:  false,
          events: true,
          modules: [
              {
                  name: 'ngGrid',
                  files: [
                      'vendor/modules/ng-grid/ng-grid.min.js',
                      'vendor/modules/ng-grid/ng-grid.min.css',
                      'vendor/modules/ng-grid/theme.css'
                  ]
              },
              {
                  name: 'ui.select',
                  files: [
                      'vendor/modules/angular-ui-select/select.min.js',
                      'vendor/modules/angular-ui-select/select.min.css'
                  ]
              },
              {
                  name:'angularFileUpload',
                  files: [
                    'vendor/modules/angular-file-upload/angular-file-upload.min.js'
                  ]
              },
              {
                  name:'ui.calendar',
                  files: ['vendor/modules/angular-ui-calendar/calendar.js']
              },
              {
                  name: 'ngImgCrop',
                  files: [
                      'vendor/modules/ngImgCrop/ng-img-crop.js',
                      'vendor/modules/ngImgCrop/ng-img-crop.css'
                  ]
              },
              {
                  name: 'angularBootstrapNavTree',
                  files: [
                      'vendor/modules/angular-bootstrap-nav-tree/abn_tree_directive.js',
                      'vendor/modules/angular-bootstrap-nav-tree/abn_tree.css'
                  ]
              },
              {
                  name: 'toaster',
                  files: [
                      'vendor/modules/angularjs-toaster/toaster.js',
                      'vendor/modules/angularjs-toaster/toaster.css'
                  ]
              },
              {
                  name: 'textAngular',
                  files: [
                      'vendor/modules/textAngular/textAngular-sanitize.min.js',
                      'vendor/modules/textAngular/textAngular.min.js'
                  ]
              },
              {
                  name: 'vr.directives.slider',
                  files: [
                      'vendor/modules/angular-slider/angular-slider.min.js',
                      'vendor/modules/angular-slider/angular-slider.css'
                  ]
              },
              {
                  name: 'com.2fdevs.videogular',
                  files: [
                      'vendor/modules/videogular/videogular.min.js'
                  ]
              },
              {
                  name: 'com.2fdevs.videogular.plugins.controls',
                  files: [
                      'vendor/modules/videogular/plugins/controls.min.js'
                  ]
              },
              {
                  name: 'com.2fdevs.videogular.plugins.buffering',
                  files: [
                      'vendor/modules/videogular/plugins/buffering.min.js'
                  ]
              },
              {
                  name: 'com.2fdevs.videogular.plugins.overlayplay',
                  files: [
                      'vendor/modules/videogular/plugins/overlay-play.min.js'
                  ]
              },
              {
                  name: 'com.2fdevs.videogular.plugins.poster',
                  files: [
                      'vendor/modules/videogular/plugins/poster.min.js'
                  ]
              },
              {
                  name: 'com.2fdevs.videogular.plugins.imaads',
                  files: [
                      'vendor/modules/videogular/plugins/ima-ads.min.js'
                  ]
              }
          ]
      });
  }])
;
'use strict';

/**
 * Config for the router
 */
angular.module('myApp')
  .run(
    [ '$rootScope', '$state', '$stateParams',
      function ($rootScope,   $state,   $stateParams) {
          $rootScope.$state = $state;
          $rootScope.$stateParams = $stateParams;        
      }
    ]
  )
  .config(
    [ '$stateProvider', '$urlRouterProvider',
      function ($stateProvider,   $urlRouterProvider) {
          
          $urlRouterProvider
              .otherwise('signin');
          $stateProvider
              .state('app', {
                  //abstract: true,
                  url: '/app',
                  templateUrl: 'app.html'
              })
              .state('signin',{
                  url:'/signin',
                  templateUrl:'app/module-user/tpl/userLogin.html'
              })
              .state('app.dashboard-v0', {
                  url: '/dashboard-v0',
                  templateUrl: 'app.html'
              })
              .state('app.dashboard-v1', {
                  url: '/dashboard-v1',
                  templateUrl: 'tpl/app_dashboard_v1.html',
                  resolve: {
                    deps: ['$ocLazyLoad',
                      function( $ocLazyLoad ){
                        return $ocLazyLoad.load(['js/controllers/chart.js']);
                    }]
                  }
              })
              .state('app.dashboard-v2', {
                  url: '/dashboard-v2',
                  templateUrl: 'tpl/app_dashboard_v2.html',
                  resolve: {
                    deps: ['$ocLazyLoad',
                      function( $ocLazyLoad ){
                        return $ocLazyLoad.load(['js/controllers/chart.js']);
                    }]
                  }
              })
              .state('app.ui', {
                  url: '/ui',
                  template: '<div ui-view class="fade-in-up"></div>'
              })
              .state('app.ui.buttons', {
                  url: '/buttons',
                  templateUrl: 'tpl/ui_buttons.html'
              })
              .state('app.ui.icons', {
                  url: '/icons',
                  templateUrl: 'tpl/ui_icons.html'
              })
              .state('app.ui.grid', {
                  url: '/grid',
                  templateUrl: 'tpl/ui_grid.html'
              })
              .state('app.ui.widgets', {
                  url: '/widgets',
                  templateUrl: 'tpl/ui_widgets.html'
              })          
              .state('app.ui.bootstrap', {
                  url: '/bootstrap',
                  templateUrl: 'tpl/ui_bootstrap.html'
              })
              .state('app.ui.sortable', {
                  url: '/sortable',
                  templateUrl: 'tpl/ui_sortable.html'
              })
              .state('app.ui.portlet', {
                  url: '/portlet',
                  templateUrl: 'tpl/ui_portlet.html'
              })
              .state('app.ui.timeline', {
                  url: '/timeline',
                  templateUrl: 'tpl/ui_timeline.html'
              })
              .state('app.ui.tree', {
                  url: '/tree',
                  templateUrl: 'tpl/ui_tree.html',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad ){
                          return $ocLazyLoad.load('angularBootstrapNavTree').then(
                              function(){
                                 return $ocLazyLoad.load('js/controllers/tree.js');
                              }
                          );
                        }
                      ]
                  }
              })
              .state('app.ui.toaster', {
                  url: '/toaster',
                  templateUrl: 'tpl/ui_toaster.html',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad){
                          return $ocLazyLoad.load('toaster').then(
                              function(){
                                 return $ocLazyLoad.load('js/controllers/toaster.js');
                              }
                          );
                      }]
                  }
              })
              .state('app.ui.jvectormap', {
                  url: '/jvectormap',
                  templateUrl: 'tpl/ui_jvectormap.html',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad){
                          return $ocLazyLoad.load('js/controllers/vectormap.js');
                      }]
                  }
              })
              .state('app.ui.googlemap', {
                  url: '/googlemap',
                  templateUrl: 'tpl/ui_googlemap.html',
                  resolve: {
                      deps: ['uiLoad',
                        function( uiLoad ){
                          return uiLoad.load( [
                            'js/app/map/load-google-maps.js',
                            'js/app/map/ui-map.js',
                            'js/app/map/map.js'] ).then(
                              function(){
                                return loadGoogleMaps(); 
                              }
                            );
                      }]
                  }
              })
              .state('app.chart', {
                  url: '/chart',
                  templateUrl: 'tpl/ui_chart.html',
                  resolve: {
                      deps: ['uiLoad',
                        function( uiLoad){
                          return uiLoad.load('js/controllers/chart.js');
                      }]
                  }
              })
              // table
              .state('app.table', {
                  url: '/table',
                  template: '<div ui-view></div>'
              })
              .state('app.table.static', {
                  url: '/static',
                  templateUrl: 'tpl/table_static.html'
              })
              .state('app.table.datatable', {
                  url: '/datatable',
                  templateUrl: 'tpl/table_datatable.html'
              })
              .state('app.table.footable', {
                  url: '/footable',
                  templateUrl: 'tpl/table_footable.html'
              })
              .state('app.table.grid', {
                  url: '/grid',
                  templateUrl: 'tpl/table_grid.html',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad ){
                          return $ocLazyLoad.load('ngGrid').then(
                              function(){
                                  return $ocLazyLoad.load('js/controllers/grid.js');
                              }
                          );
                      }]
                  }
              })
              // form
              .state('app.form', {
                  url: '/form',
                  template: '<div ui-view class="fade-in"></div>',
                  resolve: {
                      deps: ['uiLoad',
                        function( uiLoad){
                          return uiLoad.load('js/controllers/form.js');
                      }]
                  }
              })
              .state('app.form.elements', {
                  url: '/elements',
                  templateUrl: 'tpl/form_elements.html'
              })
              .state('app.form.validation', {
                  url: '/validation',
                  templateUrl: 'tpl/form_validation.html'
              })
              .state('app.form.wizard', {
                  url: '/wizard',
                  templateUrl: 'tpl/form_wizard.html'
              })
              .state('app.form.fileupload', {
                  url: '/fileupload',
                  templateUrl: 'tpl/form_fileupload.html',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad){
                          return $ocLazyLoad.load('angularFileUpload').then(
                              function(){
                                 return $ocLazyLoad.load('js/controllers/file-upload.js');
                              }
                          );
                      }]
                  }
              })
              .state('app.form.imagecrop', {
                  url: '/imagecrop',
                  templateUrl: 'tpl/form_imagecrop.html',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad){
                          return $ocLazyLoad.load('ngImgCrop').then(
                              function(){
                                 return $ocLazyLoad.load('js/controllers/imgcrop.js');
                              }
                          );
                      }]
                  }
              })
              .state('app.form.select', {
                  url: '/select',
                  templateUrl: 'tpl/form_select.html',
                  controller: 'SelectCtrl',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad ){
                          return $ocLazyLoad.load('ui.select').then(
                              function(){
                                  return $ocLazyLoad.load('js/controllers/select.js');
                              }
                          );
                      }]
                  }
              })
              .state('app.form.slider', {
                  url: '/slider',
                  templateUrl: 'tpl/form_slider.html',
                  controller: 'SliderCtrl',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad ){
                          return $ocLazyLoad.load('vr.directives.slider').then(
                              function(){
                                  return $ocLazyLoad.load('js/controllers/slider.js');
                              }
                          );
                      }]
                  }
              })
              .state('app.form.editor', {
                  url: '/editor',
                  templateUrl: 'tpl/form_editor.html',
                  controller: 'EditorCtrl',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad ){
                          return $ocLazyLoad.load('textAngular').then(
                              function(){
                                  return $ocLazyLoad.load('js/controllers/editor.js');
                              }
                          );
                      }]
                  }
              })
              // pages
              .state('app.page', {
                  url: '/page',
                  template: '<div ui-view class="fade-in-down"></div>'
              })
              .state('app.page.profile', {
                  url: '/profile',
                  templateUrl: 'tpl/page_profile.html'
              })
              .state('app.page.post', {
                  url: '/post',
                  templateUrl: 'tpl/page_post.html'
              })
              .state('app.page.search', {
                  url: '/search',
                  templateUrl: 'tpl/page_search.html'
              })
              .state('app.page.invoice', {
                  url: '/invoice',
                  templateUrl: 'tpl/page_invoice.html'
              })
              .state('app.page.price', {
                  url: '/price',
                  templateUrl: 'tpl/page_price.html'
              })
              .state('app.docs', {
                  url: '/docs',
                  templateUrl: 'tpl/docs.html'
              })
              // others
              .state('lockme', {
                  url: '/lockme',
                  templateUrl: 'tpl/page_lockme.html'
              })
              .state('access', {
                  url: '/access',
                  template: '<div ui-view class="fade-in-right-big smooth"></div>'
              })
              .state('access.signin', {
                  url: '/signin',
                  templateUrl: 'tpl/page_signin.html',
                  resolve: {
                      deps: ['uiLoad',
                        function( uiLoad ){
                          return uiLoad.load( ['js/controllers/signin.js'] );
                      }]
                  }
              })
              .state('access.signup', {
                  url: '/signup',
                  templateUrl: 'tpl/page_signup.html',
                  resolve: {
                      deps: ['uiLoad',
                        function( uiLoad ){
                          return uiLoad.load( ['js/controllers/signup.js'] );
                      }]
                  }
              })
              .state('access.forgotpwd', {
                  url: '/forgotpwd',
                  templateUrl: 'tpl/page_forgotpwd.html'
              })
              .state('access.404', {
                  url: '/404',
                  templateUrl: 'tpl/page_404.html'
              })

              // fullCalendar
              .state('app.calendar', {
                  url: '/calendar',
                  templateUrl: 'tpl/app_calendar.html',
                  // use resolve to load other dependences
                  resolve: {
                      deps: ['$ocLazyLoad', 'uiLoad',
                        function( $ocLazyLoad, uiLoad ){
                          return uiLoad.load(
                            ['vendor/jquery/fullcalendar/fullcalendar.css',
                              'vendor/jquery/fullcalendar/theme.css',
                              'vendor/jquery/jquery-ui-1.10.3.custom.min.js',
                              'vendor/libs/moment.min.js',
                              'vendor/jquery/fullcalendar/fullcalendar.min.js',
                              'js/app/calendar/calendar.js']
                          ).then(
                            function(){
                              return $ocLazyLoad.load('ui.calendar');
                            }
                          )
                      }]
                  }
              })

              // mail
              .state('app.mail', {
                  abstract: true,
                  url: '/mail',
                  templateUrl: 'tpl/mail.html',
                  // use resolve to load other dependences
                  resolve: {
                      deps: ['uiLoad',
                        function( uiLoad ){
                          return uiLoad.load( ['js/app/mail/mail.js',
                                               'js/app/mail/mail-service.js',
                                               'vendor/libs/moment.min.js'] );
                      }]
                  }
              })
              .state('app.mail.list', {
                  url: '/inbox/{fold}',
                  templateUrl: 'tpl/mail.list.html'
              })
              .state('app.mail.detail', {
                  url: '/{mailId:[0-9]{1,4}}',
                  templateUrl: 'tpl/mail.detail.html'
              })
              .state('app.mail.compose', {
                  url: '/compose',
                  templateUrl: 'tpl/mail.new.html'
              })

              .state('layout', {
                  abstract: true,
                  url: '/layout',
                  templateUrl: 'tpl/layout.html'
              })
              .state('layout.fullwidth', {
                  url: '/fullwidth',
                  views: {
                      '': {
                          templateUrl: 'tpl/layout_fullwidth.html'
                      },
                      'footer': {
                          templateUrl: 'tpl/layout_footer_fullwidth.html'
                      }
                  },
                  resolve: {
                      deps: ['uiLoad',
                        function( uiLoad ){
                          return uiLoad.load( ['js/controllers/vectormap.js'] );
                      }]
                  }
              })
              .state('layout.mobile', {
                  url: '/mobile',
                  views: {
                      '': {
                          templateUrl: 'tpl/layout_mobile.html'
                      },
                      'footer': {
                          templateUrl: 'tpl/layout_footer_mobile.html'
                      }
                  }
              })
              .state('layout.app', {
                  url: '/app',
                  views: {
                      '': {
                          templateUrl: 'tpl/layout_app.html'
                      },
                      'footer': {
                          templateUrl: 'tpl/layout_footer_fullwidth.html'
                      }
                  },
                  resolve: {
                      deps: ['uiLoad',
                        function( uiLoad ){
                          return uiLoad.load( ['js/controllers/tab.js'] );
                      }]
                  }
              })
              .state('apps', {
                  abstract: true,
                  url: '/apps',
                  templateUrl: 'tpl/layout.html'
              })
              .state('apps.note', {
                  url: '/note',
                  templateUrl: 'tpl/apps_note.html',
                  resolve: {
                      deps: ['uiLoad',
                        function( uiLoad ){
                          return uiLoad.load( ['js/app/note/note.js',
                                               'vendor/libs/moment.min.js'] );
                      }]
                  }
              })
              .state('apps.contact', {
                  url: '/contact',
                  templateUrl: 'tpl/apps_contact.html',
                  resolve: {
                      deps: ['uiLoad',
                        function( uiLoad ){
                          return uiLoad.load( ['js/app/contact/contact.js'] );
                      }]
                  }
              })
              .state('app.weather', {
                  url: '/weather',
                  templateUrl: 'tpl/apps_weather.html',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad ){
                          return $ocLazyLoad.load(
                              {
                                  name: 'angular-skycons',
                                  files: ['js/app/weather/skycons.js',
                                          'vendor/libs/moment.min.js', 
                                          'js/app/weather/angular-skycons.js',
                                          'js/app/weather/ctrl.js' ] 
                              }
                          );
                      }]
                  }
              })
              .state('music', {
                  url: '/music',
                  templateUrl: 'tpl/music.html',
                  controller: 'MusicCtrl',
                  resolve: {
                      deps: ['$ocLazyLoad',
                        function( $ocLazyLoad ){
                          return $ocLazyLoad.load([
                            'com.2fdevs.videogular', 
                            'com.2fdevs.videogular.plugins.controls', 
                            'com.2fdevs.videogular.plugins.overlayplay',
                            'com.2fdevs.videogular.plugins.poster',
                            'com.2fdevs.videogular.plugins.buffering',
                            'js/app/music/ctrl.js', 
                            'js/app/music/theme.css'
                          ]);
                      }]
                  }
              })
                .state('music.home', {
                    url: '/home',
                    templateUrl: 'tpl/music.home.html'
                })
                .state('music.genres', {
                    url: '/genres',
                    templateUrl: 'tpl/music.genres.html'
                })
                .state('music.detail', {
                    url: '/detail',
                    templateUrl: 'tpl/music.detail.html'
                })
                .state('music.mtv', {
                    url: '/mtv',
                    templateUrl: 'tpl/music.mtv.html'
                })
                .state('music.mtvdetail', {
                    url: '/mtvdetail',
                    templateUrl: 'tpl/music.mtv.detail.html'
                })
                .state('music.playlist', {
                    url: '/playlist/{fold}',
                    templateUrl: 'tpl/music.playlist.html'
                })
      }
    ]
  );
/**
 * Created by pujjr on 2017/7/11.
 */
angular.module('myApp')
    .controller('AppCtrl', ['$scope', '$translate', '$localStorage', '$window',
        function($scope,   $translate,   $localStorage,   $window ) {
            // add 'ie' classes to html
            var isIE = !!navigator.userAgent.match(/MSIE/i);
            isIE && angular.element($window.document.body).addClass('ie');
            isSmartDevice( $window ) && angular.element($window.document.body).addClass('smart');

            // config
            $scope.app = {
                name: 'AngularJs',
                version: '1.3.3',
                // for chart colors
                color: {
                    primary: '#7266ba',
                    info:    '#23b7e5',
                    success: '#27c24c',
                    warning: '#fad733',
                    danger:  '#f05050',
                    light:   '#e8eff0',
                    dark:    '#3a3f51',
                    black:   '#1c2b36'
                },
                settings: {
                    themeID: 1,
                    navbarHeaderColor: 'bg-black',
                    navbarCollapseColor: 'bg-white-only',
                    asideColor: 'bg-black',
                    headerFixed: true,
                    asideFixed: false,
                    asideFolded: false,
                    asideDock: false,
                    container: false
                }
            }

            // save settings to local storage
            if ( angular.isDefined($localStorage.settings) ) {
                $scope.app.settings = $localStorage.settings;
            } else {
                $localStorage.settings = $scope.app.settings;
            }
            $scope.$watch('app.settings', function(){
                if( $scope.app.settings.asideDock  &&  $scope.app.settings.asideFixed ){
                    // aside dock and fixed must set the header fixed.
                    $scope.app.settings.headerFixed = true;
                }
                // save to local storage
                $localStorage.settings = $scope.app.settings;
            }, true);

            // angular translate
            $scope.lang = { isopen: false };
            $scope.langs = {en:'English', de_DE:'German', it_IT:'Italian'};
            $scope.selectLang = $scope.langs[$translate.proposedLanguage()] || "English";
            $scope.setLang = function(langKey, $event) {
                // set the current lang
                $scope.selectLang = $scope.langs[langKey];
                // You can change the language during runtime
                $translate.use(langKey);
                $scope.lang.isopen = !$scope.lang.isopen;
            };

            function isSmartDevice( $window )
            {
                // Adapted from http://www.detectmobilebrowsers.com
                var ua = $window['navigator']['userAgent'] || $window['navigator']['vendor'] || $window['opera'];
                // Checks for iOs, Android, Blackberry, Opera Mini, and Windows mobile devices
                return (/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/).test(ua);
            }

        }]);
angular.module('pascalprecht.translate')
/**
 * @ngdoc object
 * @name pascalprecht.translate.$translateStaticFilesLoader
 * @requires $q
 * @requires $http
 *
 * @description
 * Creates a loading function for a typical static file url pattern:
 * "lang-en_US.json", "lang-de_DE.json", etc. Using this builder,
 * the response of these urls must be an object of key-value pairs.
 *
 * @param {object} options Options object, which gets prefix, suffix and key.
 */
.factory('$translateStaticFilesLoader', ['$q', '$http', function ($q, $http) {

  return function (options) {

    if (!options || (!angular.isString(options.prefix) || !angular.isString(options.suffix))) {
      throw new Error('Couldn\'t load static files, no prefix or suffix specified!');
    }

    var deferred = $q.defer();

    $http({
      url: [
        options.prefix,
        options.key,
        options.suffix
      ].join(''),
      method: 'GET',
      params: ''
    }).success(function (data) {
      deferred.resolve(data);
    }).error(function (data) {
      deferred.reject(options.key);
    });

    return deferred.promise;
  };
}]);

angular.module('pascalprecht.translate')

/**
 * @ngdoc object
 * @name pascalprecht.translate.$translateCookieStorage
 * @requires $cookieStore
 *
 * @description
 * Abstraction layer for cookieStore. This service is used when telling angular-translate
 * to use cookieStore as storage.
 *
 */
.factory('$translateCookieStorage', ['$cookieStore', function ($cookieStore) {

  var $translateCookieStorage = {

    /**
     * @ngdoc function
     * @name pascalprecht.translate.$translateCookieStorage#get
     * @methodOf pascalprecht.translate.$translateCookieStorage
     *
     * @description
     * Returns an item from cookieStorage by given name.
     *
     * @param {string} name Item name
     * @return {string} Value of item name
     */
    get: function (name) {
      return $cookieStore.get(name);
    },

    /**
     * @ngdoc function
     * @name pascalprecht.translate.$translateCookieStorage#set
     * @methodOf pascalprecht.translate.$translateCookieStorage
     *
     * @description
     * Sets an item in cookieStorage by given name.
     *
     * @param {string} name Item name
     * @param {string} value Item value
     */
    set: function (name, value) {
      $cookieStore.put(name, value);
    }
  };

  return $translateCookieStorage;
}]);

angular.module('pascalprecht.translate')

/**
 * @ngdoc object
 * @name pascalprecht.translate.$translateLocalStorage
 * @requires $window
 *
 * @description
 * Abstraction layer for localStorage. This service is used when telling angular-translate
 * to use localStorage as storage.
 *
 */
.factory('$translateLocalStorage', ['$window', '$translateCookieStorage', function ($window, $translateCookieStorage) {

  // Setup adapter
  var localStorageAdapter = (function(){
    var langKey;
    return {
      /**
       * @ngdoc function
       * @name pascalprecht.translate.$translateLocalStorage#get
       * @methodOf pascalprecht.translate.$translateLocalStorage
       *
       * @description
       * Returns an item from localStorage by given name.
       *
       * @param {string} name Item name
       * @return {string} Value of item name
       */
      get: function (name) {
        if(!langKey) {
          langKey = $window.localStorage.getItem(name);
        }

        return langKey;
      },
      /**
       * @ngdoc function
       * @name pascalprecht.translate.$translateLocalStorage#set
       * @methodOf pascalprecht.translate.$translateLocalStorage
       *
       * @description
       * Sets an item in localStorage by given name.
       *
       * @param {string} name Item name
       * @param {string} value Item value
       */
      set: function (name, value) {
        langKey=value;
        $window.localStorage.setItem(name, value);
      }
    };
  }());

  var hasLocalStorageSupport = 'localStorage' in $window && $window.localStorage !== null;
  if (hasLocalStorageSupport) {
    var testKey = 'pascalprecht.translate.storageTest';
    try {
      $window.localStorage.setItem(testKey, 'foo');
      $window.localStorage.removeItem(testKey);
    } catch (e){
      hasLocalStorageSupport = false;
    }
  }
  var $translateLocalStorage = hasLocalStorageSupport ? localStorageAdapter : $translateCookieStorage;
  return $translateLocalStorage;
}]);

/**
 * Created by pujjr on 2017/5/9.
 */
/**
 * 设置cookie值
 * @param name cookie键名
 * @param value cookie键对应值
 * @param expire cookie超时时间
 */
function setCookie(name,value,expire){
    console.log("setCookie,"+"name:"+name+",value:"+value+",expire:"+expire);
    var timeNow = new Date();
    var expireTime = new Date();
    expireTime.setTime(expire);
    //document.cookie=name+"="+value+";expires="+expireTime.toGMTString();
    //console.log("expire:"+expire+",expireTime:"+expireTime);
    //document.cookie=name+"="+value+";expires="+expireTime;
    //document.cookie="expireTime="+expire+";expires="+expireTime;

    //document.cookie=name+"="+value+";expireTime:"+new Date();
    document.cookie=name+"="+value+";expires="+expireTime.toGMTString();
    //document.cookie=name+"="+value+";expires="+expireTime.toTimeString();
    console.log(document.cookie);
}

/**
 * 获取cookie值
 * @param name
 * @returns {*}
 */
function getCookie(name){
    //alert("utils.js->getCookie");
    //console.log("utils.js->getCookie");
    //console.log(name);
    var start = 0;
    var end = 0;
    var value = null;
    if(document.cookie.length > 0){
        /*start =  document.cookie.indexOf(name+"=");
         console.log("0123456".substring());
         if(start != -1){
         console.log("start:"+start);
         end = document.cookie.indexOf(";",start + name.length + 1);
         console.log("end:"+end);
         if(end != -1)
         value = document.cookie.substring(start + name.length+1,end);
         else
         value = document.cookie.substring((start + name.length + 1,document.cookie.length));
         console.log(name+":"+value);
         }*/
        var pairs = document.cookie.split(";");
        //console.log("pairs:"+pairs);
        for(var i = 0;i < pairs.length;i++){
            var pair = pairs[i];
            //console.log(i+":"+pair);
            var keyValue = pair.split("=");
            //console.log("keyValue[0]:"+keyValue[0]);
            if(name == keyValue[0].trim()){
                value = keyValue[1];
                //console.log(name+":"+value);
            }
        }
    }
    return value;
}

function printCookie(){
    //console.log("document.cookie:"+document.cookie);
}



/**
 * Created by pujjr on 2017/7/11.
 */
angular.module('com.tang.controller.LoginController',[])
    .controller('LoginController',function($scope){
        // 如果为true，显示为登录表单
// 如果为false，显示为注册表单
//        $scope.showLoginForm = true;
        $scope.nameRet4 = "控制器LoginController中改变变量值";
        console.log("$scope.parentname:"+$scope.parentname);
        $scope.sendLogin = function(user,userId) {
            $scope.test = "测试测试测试测试测试";
            console.log("LoginController---->sendLogin");
            console.log("user:"+user+"|userId:"+userId);
            $scope.nameRet2 = user.name;
        };
        $scope.sendRegister = function(userName,password) {
            $scope.test = "测试测试测试测试测试";
            console.log("LoginController---->sendRegister");
            console.log("userName:"+userName+"|password:"+password);
            $scope.nameRet2 = userName;
        };
    });

/**
 * Created by pujjr on 2017/7/11.
 */
angular.module('com.tang.directive.LoginDirective',[])
    .directive('loginForm',function(){
        return {
            restrict:'A',
            replace:true,
            scope:{
                onLogin:'&',
                onRegister:'&',
                myParentName:'@'
            },
            templateUrl:'loginTemplate.tpl.html',
            link:function(scope,el,attrs){
                //scope:指令内隔离作用域
                scope.$watch('myVar',function(newValue,oldValue,s){
                    console.log("************watch begin****************");
                    scope.showLoginForm = newValue;
                    console.log(scope);
                    console.log(s);
                    console.log(scope == s);
                    console.log("newValue:"+newValue+"|oldValue:"+oldValue);
                    console.log("************watch end****************");
                });

                console.log("scope.showLoginForm:"+scope.showLoginForm);
                scope.submitLogin = function(){
                    console.log("loginDirective---------scope.submitLogin");
                    console.log("获取表单值："+scope.userName+"|"+scope.password);
                    console.log("父作用域传入指令隔离作用域中的参数值scope.myParentName："+scope.myParentName);
                    //模拟登录后，后台返回结果，修改界面值：
                    scope.nameRet3 = "模拟后台返回";//子作用域中值赋值后，不可能扩展到父作用域中
                    var user = {'name':'指令隔离作用域值---》controller---》页面展示'};
                    scope.onLogin({user:user,userId:'123456'});//指令调用控制器函数，所有实参封装到json对象中，controller函数解析json对象，根据参数名解析对应参数值，给对应形参赋值。
                };
                scope.submitRegister = function(){
                    console.log("loginDirective---------scope.submitRegister");
                    console.log("获取表单值："+scope.userName+"|"+scope.password);
                    console.log("父作用域传入指令隔离作用域中的参数值scope.myParentName："+scope.myParentName);
                    //模拟登录后，后台返回结果，修改界面值：
                    scope.nameRet3 = "模拟后台返回";
                    var user = {'name':'指令值---》controller---》页面展示'};
                    scope.onRegister({'userName':'brighttang',password:'123456'});//指令调用控制器函数，所有实参封装到json对象中，controller函数解析json对象，根据参数名解析对应参数值，给对应形参赋值。
                    //scope.onLogin({user:user,userId:'123456'});
                };


            }
        };
    });

/**
 * Created by pujjr on 2017/7/10.
 */
//拦截器定义(创建拦截器服务)
angular.module('com.tang.intercepter',[])
    .factory('myInterceptor',function($q){
    var interceptor = {
        'request':function(config){
            //console.log(config);
            //alert("request");
            //每次http请求，token数据放入http头中
            config.headers.token = getCookie('token');
            config.headers.expireTime = getCookie('expireTime');
            // 成功的请求方法
            return config; // 或者 $q.when(config);
        },
        'response':function(response){
            //console.log($q);
            //console.log(response);
            var token = response.headers('token');
            var expireTime =  response.headers('expireTime');
            setCookie('token',token,expireTime);
            // 响应成功
            return response; // 或者 $q.when(config);
        },
        'requestError':function(rejection){
            //console.log(rejection);
            // 请求发生了错误，如果能从错误中恢复，可以返回一个新的请求或promise
            return response; // 或新的promise
            // 或者，可以通过返回一个rejection来阻止下一步
            // return $q.reject(rejection);
        },
        'responseError':function(rejection){
            //console.log(rejection);
            // 请求发生了错误，如果能从错误中恢复，可以返回一个新的响应或promise
            return rejection; // 或新的promise
            // 或者，可以通过返回一个rejection来阻止下一步
            // return $q.reject(rejection);
        }
    };
    return interceptor;
});
//注册拦截器
app.config(function($httpProvider) {
    $httpProvider.interceptors.push('myInterceptor');
    //console.log($httpProvider.defaults.headers.common);
    /*  //扩充http头
     $httpProvider.defaults.headers.post['token'] = getCookie('token');
     $httpProvider.defaults.headers.post['expireTime'] = getCookie('expireTime');*/
});
/**
 * Created by pujjr on 2017/6/29.
 */

//
angular.module('com.tang.controller.MyController1',[])
    .controller('MyController1',['$scope','$http','xhrService',function($scope,$http,xhrService){
        $scope.$on('loginReturnEvent',function(event,param){
            //alert("收到服务层返回事件");
            console.log(param);
            $scope.id = param.data.id;
        });
        alert("MyController1");
        $scope.login = function(){
            alert("login");
            xhrService.login('200810405234',$scope)
                .then(function(result){
                    alert('服务返回成功');
                    $scope.$emit('loginReturnEvent',result);
                },function(error){

                },function(progress){

                });
        };

        $scope.getToken = function(){
            $scope.token = getCookie('token');
        };

        $scope.doTrans = function(){
            //添加特定http头
            $http.defaults.headers.common['token'] = getCookie('token');
            $http.defaults.headers.common['expireTime'] = getCookie('expireTime');
            $http({
                method:'POST',
                url:'http://localhost:8090/tlms-web/login/doTrans',
                data:{}
            }).then(function(response){
                alert('请求返回成功');
            },function(response){
                alert('error');
            });
        };
}]);



/**
 * Created by pujjr on 2017/7/11.
 */
angular.module('com.tang.controller.MyController2',[])
    .controller("MyController2", ["$scope", "$q", function ($scope, $q) {
        alert("MyController2");
        $scope.flag = true;
        $scope.handle = function () {
            var deferred = $q.defer();
            var promise = deferred.promise;
            console.log("1111");
            promise.then(function (result) {
                result = result + "you have passed the first then()";
                console.log(result);
                $scope.status = result;
                return result;
            }, function (error) {
                error = error + "failed but you have passed the first then()";
                console.log(error);
                $scope.status = error;
                return error;
            }).then(function(result){
                result = "第二个then  success";
                console.log(result);
            },function(error){
                error = "第二个then  error";
                console.log(error);
            });
            console.log("2222");
            if ($scope.flag) {
                deferred.resolve("you are lucky!");
            } else {
                deferred.reject("sorry, it lost!");
            }
            console.log("3333");
        }
    }]);

/**
 * Created by pujjr on 2017/7/3.
 */
angular.module('com.tang.service.XhrService',[])
    //.factory('xhrService',['$q','$http',function($q,$http){
    .factory('xhrService',['$http','$q',function($http,$q){
        var login = function(userId){
            console.log("**************************xhrService开始**************************");
            console.log(userId);
           var deferred = $q.defer();
            $http({
                method:'POST',
                url:'http://localhost:8090/tlms-web/login/userLogin',
                params:{'page':'1','province':'重庆市','city':'永川区'},
                data:{'name':'brighttang'}
            }).then(function(response){
                alert('请求返回成功');
                //console.log(response);
                //console.log(response.data);
                //console.log(response.status);
                //console.log(response.headers);
                //console.log(response.headers('token'));

                //$scope.id = response.data.id;
                //scope.$broadcast('loginReturnEvent',response);
                deferred.resolve(response);
            },function(response){
                alert('error');
                //console.log(response.data);
                //console.log(response.status);
                //console.log(response.headers);
                deferred.reject(response);
            });
            console.log("**************************xhrService结束**************************");
            return deferred.promise;
        };
        return {
            'login':login
        };
    }]);
/**
 * Created by pujjr on 2017/7/17.
 */
angular.module('com.tang.controller.RouterController',[])
    .controller('routerController',function($scope){

    }).run(function($templateCache){
        //$templateCache.put('app/uirouter/photo.html','<div>tttttttttttttttttttttttttttt</div>');
    })
    .config(function($stateProvider,$urlRouterProvider) {
        $urlRouterProvider.otherwise('/home');
        $stateProvider
            .state('home',{
                url: '/home',
                template: '<div ui-view>home</div>'
            }).state('home.toaster',{
                url:'/toaster',
                templateUrl:'html/toaster/toaster.tpl.html'
            }).state('user',{
                url:'/home2/user',
                template: '<div>user</div>'
            }).state('photo',{
                //abstract:true,
                url: '/photo/:photoId',
                templateUrl: 'app/uirouter/photo.html',
                controller:function($scope,$stateParams){
                    console.log($stateParams);
                }
            }).state('photo.detail',{//嵌套路由测试
                url: '/detail/:detailId',
                templateUrl: 'app/uirouter/photo-detail.html',
                controller:function($scope,$stateParams){
                    console.log("----------------------------");
                    console.log($stateParams);
                }

            });
           /* .state('inbox', {
                url: '/inbox:inboxId',
                templateUrl: 'html/uirouter/uirouter.tpl.html'
            }).state('inbox.priority.',{
                url:'/priority',
                templateUrl: 'html/uirouter/userManage.tpl.html',
                controller:function($scope,$stateParams){
                    console.log($stateParams);
                }
            })*/

    });
/**
 * Created by pujjr on 2017/7/17.
 */
angular.module('com.tang.controller.ToasterController',['toaster'])
    .controller('ToasterController',function($scope,toaster){
        $scope.pop = function(){
          //toaster.pop('success','title','text');
            toaster.clear(toastInstance);//注释这句和加上这句看看效果就明白了
          //  var toastInstance = toaster.pop({type: 'warning', body: 'Hello',title:'提示信息',timeout:1000});//error\success\info
            var toastInstance = toaster.pop({type: 'error', body: 'Hello',title:'提示信息'});//error\success\info
            toastInstance();

        };
    });

'use strict';

/* Controllers */
var app = angular.module('myApp');
  // bootstrap controller
  app.controller('AccordionDemoCtrl', ['$scope', function($scope) {
    $scope.oneAtATime = true;

    $scope.groups = [
      {
        title: 'Accordion group header - #1',
        content: 'Dynamic group body - #1'
      },
      {
        title: 'Accordion group header - #2',
        content: 'Dynamic group body - #2'
      }
    ];

    $scope.items = ['Item 1', 'Item 2', 'Item 3'];

    $scope.addItem = function() {
      var newItemNo = $scope.items.length + 1;
      $scope.items.push('Item ' + newItemNo);
    };

    $scope.status = {
      isFirstOpen: true,
      isFirstDisabled: false
    };
  }])
  ; 
  app.controller('AlertDemoCtrl', ['$scope', function($scope) {
    $scope.alerts = [
      { type: 'success', msg: 'Well done! You successfully read this important alert message.' },
      { type: 'info', msg: 'Heads up! This alert needs your attention, but it is not super important.' },
      { type: 'warning', msg: 'Warning! Best check yo self, you are not looking too good...' }
    ];

    $scope.addAlert = function() {
      $scope.alerts.push({type: 'danger', msg: 'Oh snap! Change a few things up and try submitting again.'});
    };

    $scope.closeAlert = function(index) {
      $scope.alerts.splice(index, 1);
    };
  }])
  ; 
  app.controller('ButtonsDemoCtrl', ['$scope', function($scope) {
    $scope.singleModel = 1;

    $scope.radioModel = 'Middle';

    $scope.checkModel = {
      left: false,
      middle: true,
      right: false
    };
  }])
  ; 
  app.controller('CarouselDemoCtrl', ['$scope', function($scope) {
    $scope.myInterval = 5000;
    var slides = $scope.slides = [];
    $scope.addSlide = function() {
      slides.push({
        image: 'img/c' + slides.length + '.jpg',
        text: ['Carousel text #0','Carousel text #1','Carousel text #2','Carousel text #3'][slides.length % 4]
      });
    };
    for (var i=0; i<4; i++) {
      $scope.addSlide();
    }
  }])
  ; 
  app.controller('DropdownDemoCtrl', ['$scope', function($scope) {
    $scope.items = [
      'The first choice!',
      'And another choice for you.',
      'but wait! A third!'
    ];

    $scope.status = {
      isopen: false
    };

    $scope.toggled = function(open) {
      //console.log('Dropdown is now: ', open);
    };

    $scope.toggleDropdown = function($event) {
      $event.preventDefault();
      $event.stopPropagation();
      $scope.status.isopen = !$scope.status.isopen;
    };
  }])
  ; 
  app.controller('ModalInstanceCtrl', ['$scope', '$modalInstance', 'items', function($scope, $modalInstance, items) {
    $scope.items = items;
    $scope.selected = {
      item: $scope.items[0]
    };

    $scope.ok = function () {
      $modalInstance.close($scope.selected.item);
    };

    $scope.cancel = function () {
      $modalInstance.dismiss('cancel');
    };
  }])
  ; 
  app.controller('ModalDemoCtrl', ['$scope', '$modal', '$log', function($scope, $modal, $log) {
    $scope.items = ['item1', 'item2', 'item3'];
    $scope.open = function (size) {
      var modalInstance = $modal.open({
        templateUrl: 'myModalContent.html',
        controller: 'ModalInstanceCtrl',
        size: size,
        resolve: {
          items: function () {
            return $scope.items;
          }
        }
      });

      modalInstance.result.then(function (selectedItem) {
        $scope.selected = selectedItem;
      }, function () {
        $log.info('Modal dismissed at: ' + new Date());
      });
    };
  }])
  ; 
  app.controller('PaginationDemoCtrl', ['$scope', '$log', function($scope, $log) {
    $scope.totalItems = 64;
    $scope.currentPage = 4;

    $scope.setPage = function (pageNo) {
      $scope.currentPage = pageNo;
    };

    $scope.pageChanged = function() {
      $log.info('Page changed to: ' + $scope.currentPage);
    };

    $scope.maxSize = 5;
    $scope.bigTotalItems = 175;
    $scope.bigCurrentPage = 1;
  }])
  ; 
  app.controller('PopoverDemoCtrl', ['$scope', function($scope) {
    $scope.dynamicPopover = 'Hello, World!';
    $scope.dynamicPopoverTitle = 'Title';
  }])
  ; 
  app.controller('ProgressDemoCtrl', ['$scope', function($scope) {
    $scope.max = 200;

    $scope.random = function() {
      var value = Math.floor((Math.random() * 100) + 1);
      var type;

      if (value < 25) {
        type = 'success';
      } else if (value < 50) {
        type = 'info';
      } else if (value < 75) {
        type = 'warning';
      } else {
        type = 'danger';
      }

      $scope.showWarning = (type === 'danger' || type === 'warning');

      $scope.dynamic = value;
      $scope.type = type;
    };
    $scope.random();

    $scope.randomStacked = function() {
      $scope.stacked = [];
      var types = ['success', 'info', 'warning', 'danger'];

      for (var i = 0, n = Math.floor((Math.random() * 4) + 1); i < n; i++) {
          var index = Math.floor((Math.random() * 4));
          $scope.stacked.push({
            value: Math.floor((Math.random() * 30) + 1),
            type: types[index]
          });
      }
    };
    $scope.randomStacked();
  }])
  ; 
  app.controller('TabsDemoCtrl', ['$scope', function($scope) {
    $scope.tabs = [
      { title:'Dynamic Title 1', content:'Dynamic content 1' },
      { title:'Dynamic Title 2', content:'Dynamic content 2', disabled: true }
    ];
  }])
  ; 
  app.controller('RatingDemoCtrl', ['$scope', function($scope) {
    $scope.rate = 7;
    $scope.max = 10;
    $scope.isReadonly = false;

    $scope.hoveringOver = function(value) {
      $scope.overStar = value;
      $scope.percent = 100 * (value / $scope.max);
    };
  }])
  ; 
  app.controller('TooltipDemoCtrl', ['$scope', function($scope) {
    $scope.dynamicTooltip = 'Hello, World!';
    $scope.dynamicTooltipText = 'dynamic';
    $scope.htmlTooltip = 'I\'ve been made <b>bold</b>!';
  }])
  ; 
  app.controller('TypeaheadDemoCtrl', ['$scope', '$http', function($scope, $http) {
    $scope.selected = undefined;
    $scope.states = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico', 'New York', 'North Dakota', 'North Carolina', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'];
    // Any function returning a promise object can be used to load values asynchronously
    $scope.getLocation = function(val) {
      return $http.get('http://maps.googleapis.com/maps/api/geocode/json', {
        params: {
          address: val,
          sensor: false
        }
      }).then(function(res){
        var addresses = [];
        angular.forEach(res.data.results, function(item){
          addresses.push(item.formatted_address);
        });
        return addresses;
      });
    };
  }])
  ; 
  app.controller('DatepickerDemoCtrl', ['$scope', function($scope) {
    $scope.today = function() {
      $scope.dt = new Date();
    };
    $scope.today();

    $scope.clear = function () {
      $scope.dt = null;
    };

    // Disable weekend selection
    $scope.disabled = function(date, mode) {
      return ( mode === 'day' && ( date.getDay() === 0 || date.getDay() === 6 ) );
    };

    $scope.toggleMin = function() {
      $scope.minDate = $scope.minDate ? null : new Date();
    };
    $scope.toggleMin();

    $scope.open = function($event) {
      $event.preventDefault();
      $event.stopPropagation();

      $scope.opened = true;
    };

    $scope.dateOptions = {
      formatYear: 'yy',
      startingDay: 1,
      class: 'datepicker'
    };

    $scope.initDate = new Date('2016-15-20');
    $scope.formats = ['dd-MMMM-yyyy', 'yyyy/MM/dd', 'dd.MM.yyyy', 'shortDate'];
    $scope.format = $scope.formats[0];
  }])
  ; 
  app.controller('TimepickerDemoCtrl', ['$scope', function($scope) {
    $scope.mytime = new Date();

    $scope.hstep = 1;
    $scope.mstep = 15;

    $scope.options = {
      hstep: [1, 2, 3],
      mstep: [1, 5, 10, 15, 25, 30]
    };

    $scope.ismeridian = true;
    $scope.toggleMode = function() {
      $scope.ismeridian = ! $scope.ismeridian;
    };

    $scope.update = function() {
      var d = new Date();
      d.setHours( 14 );
      d.setMinutes( 0 );
      $scope.mytime = d;
    };

    $scope.changed = function () {
      //console.log('Time changed to: ' + $scope.mytime);
    };

    $scope.clear = function() {
      $scope.mytime = null;
    };
  }]);
'use strict';

/* Controllers */
var app = angular.module('myApp');
app
  // Flot Chart controller 
  .controller('FlotChartDemoCtrl', ['$scope', function($scope) {
    $scope.d = [ [1,6.5],[2,6.5],[3,7],[4,8],[5,7.5],[6,7],[7,6.8],[8,7],[9,7.2],[10,7],[11,6.8],[12,7] ];

    $scope.d0_1 = [ [0,7],[1,6.5],[2,12.5],[3,7],[4,9],[5,6],[6,11],[7,6.5],[8,8],[9,7] ];

    $scope.d0_2 = [ [0,4],[1,4.5],[2,7],[3,4.5],[4,3],[5,3.5],[6,6],[7,3],[8,4],[9,3] ];

    $scope.d1_1 = [ [10, 120], [20, 70], [30, 70], [40, 60] ];

    $scope.d1_2 = [ [10, 50],  [20, 60], [30, 90],  [40, 35] ];

    $scope.d1_3 = [ [10, 80],  [20, 40], [30, 30],  [40, 20] ];

    $scope.d2 = [];

    for (var i = 0; i < 20; ++i) {
      $scope.d2.push([i, Math.sin(i)]);
    }   

    $scope.d3 = [ 
      { label: "iPhone5S", data: 40 }, 
      { label: "iPad Mini", data: 10 },
      { label: "iPad Mini Retina", data: 20 },
      { label: "iPhone4S", data: 12 },
      { label: "iPad Air", data: 18 }
    ];

    $scope.refreshData = function(){
      $scope.d0_1 = $scope.d0_2;
    };

    $scope.getRandomData = function() {
      var data = [],
      totalPoints = 150;
      if (data.length > 0)
        data = data.slice(1);
      while (data.length < totalPoints) {
        var prev = data.length > 0 ? data[data.length - 1] : 50,
          y = prev + Math.random() * 10 - 5;
        if (y < 0) {
          y = 0;
        } else if (y > 100) {
          y = 100;
        }
        data.push(y);
      }
      // Zip the generated y values with the x values
      var res = [];
      for (var i = 0; i < data.length; ++i) {
        res.push([i, data[i]])
      }
      return res;
    }

    $scope.d4 = $scope.getRandomData();
  }]);
var app = angular.module('myApp');
app.controller('EditorCtrl', function($scope) {
  $scope.htmlVariable = '<h3>Try me!</h3><p>textAngular is a super cool WYSIWYG Text Editor directive for AngularJS</p><p><b>Features:</b></p><ol><li>Automatic Seamless Two-Way-Binding</li><li style="color: blue;">Super Easy <b>Theming</b> Options</li><li>Simple Editor Instance Creation</li><li>Safely Parses Html for Custom Toolbar Icons</li><li>Doesn&apos;t Use an iFrame</li><li>Works with Firefox, Chrome, and IE8+</li></ol><p><b>Code at GitHub:</b> <a href="https://github.com/fraywing/textAngular">Here</a> </p>';
});
var app = angular.module('myApp');
app.controller('FileUploadCtrl', ['$scope', 'FileUploader', function($scope, FileUploader) {
    var uploader = $scope.uploader = new FileUploader({
        url: 'js/controllers/upload.php'
    });

    // FILTERS

    uploader.filters.push({
        name: 'customFilter',
        fn: function(item /*{File|FileLikeObject}*/, options) {
            return this.queue.length < 10;
        }
    });

    // CALLBACKS

    uploader.onWhenAddingFileFailed = function(item /*{File|FileLikeObject}*/, filter, options) {
        console.info('onWhenAddingFileFailed', item, filter, options);
    };
    uploader.onAfterAddingFile = function(fileItem) {
        console.info('onAfterAddingFile', fileItem);
    };
    uploader.onAfterAddingAll = function(addedFileItems) {
        console.info('onAfterAddingAll', addedFileItems);
    };
    uploader.onBeforeUploadItem = function(item) {
        console.info('onBeforeUploadItem', item);
    };
    uploader.onProgressItem = function(fileItem, progress) {
        console.info('onProgressItem', fileItem, progress);
    };
    uploader.onProgressAll = function(progress) {
        console.info('onProgressAll', progress);
    };
    uploader.onSuccessItem = function(fileItem, response, status, headers) {
        console.info('onSuccessItem', fileItem, response, status, headers);
    };
    uploader.onErrorItem = function(fileItem, response, status, headers) {
        console.info('onErrorItem', fileItem, response, status, headers);
    };
    uploader.onCancelItem = function(fileItem, response, status, headers) {
        console.info('onCancelItem', fileItem, response, status, headers);
    };
    uploader.onCompleteItem = function(fileItem, response, status, headers) {
        console.info('onCompleteItem', fileItem, response, status, headers);
    };
    uploader.onCompleteAll = function() {
        console.info('onCompleteAll');
    };

    console.info('uploader', uploader);
}]);
'use strict';

/* Controllers */
var app = angular.module('myApp');
  // Form controller
app.controller('FormDemoCtrl', ['$scope', function($scope) {
    $scope.notBlackListed = function(value) {
      var blacklist = ['bad@domain.com','verybad@domain.com'];
      return blacklist.indexOf(value) === -1;
    }

    $scope.val = 15;
    var updateModel = function(val){
      $scope.$apply(function(){
        $scope.val = val;
      });
    };
    angular.element("#slider").on('slideStop', function(data){
      updateModel(data.value);
    });

    $scope.select2Number = [
      {text:'First',  value:'One'},
      {text:'Second', value:'Two'},
      {text:'Third',  value:'Three'}
    ];

    $scope.list_of_string = ['tag1', 'tag2']
    $scope.select2Options = {
        'multiple': true,
        'simple_tags': true,
        'tags': ['tag1', 'tag2', 'tag3', 'tag4']  // Can be empty list.
    };

    angular.element("#LinkInput").bind('click', function (event) {
      event.stopPropagation();
    });

  }])
 ;
var app = angular.module('myApp');
app.controller('GridDemoCtrl', ['$scope', '$http', function($scope, $http) {
    $scope.filterOptions = {
        filterText: "",
        useExternalFilter: true
    }; 
    $scope.totalServerItems = 0;
    $scope.pagingOptions = {
        pageSizes: [250, 500, 1000],
        pageSize: 250,
        currentPage: 1
    };  
    $scope.setPagingData = function(data, page, pageSize){  
        var pagedData = data.slice((page - 1) * pageSize, page * pageSize);
        $scope.myData = pagedData;
        $scope.totalServerItems = data.length;
        if (!$scope.$$phase) {
            $scope.$apply();
        }
    };
    $scope.getPagedDataAsync = function (pageSize, page, searchText) {
        setTimeout(function () {
            var data;
            if (searchText) {
                var ft = searchText.toLowerCase();
                $http.get('js/controllers/largeLoad.json').success(function (largeLoad) {    
                    data = largeLoad.filter(function(item) {
                        return JSON.stringify(item).toLowerCase().indexOf(ft) != -1;
                    });
                    $scope.setPagingData(data,page,pageSize);
                });            
            } else {
                $http.get('js/controllers/largeLoad.json').success(function (largeLoad) {
                    $scope.setPagingData(largeLoad,page,pageSize);
                });
            }
        }, 100);
    };

    $scope.getPagedDataAsync($scope.pagingOptions.pageSize, $scope.pagingOptions.currentPage);

    $scope.$watch('pagingOptions', function (newVal, oldVal) {
        if (newVal !== oldVal && newVal.currentPage !== oldVal.currentPage) {
          $scope.getPagedDataAsync($scope.pagingOptions.pageSize, $scope.pagingOptions.currentPage, $scope.filterOptions.filterText);
        }
    }, true);
    $scope.$watch('filterOptions', function (newVal, oldVal) {
        if (newVal !== oldVal) {
          $scope.getPagedDataAsync($scope.pagingOptions.pageSize, $scope.pagingOptions.currentPage, $scope.filterOptions.filterText);
        }
    }, true);

    $scope.gridOptions = {
        data: 'myData',
        enablePaging: true,
        showFooter: true,
        totalServerItems: 'totalServerItems',
        pagingOptions: $scope.pagingOptions,
        filterOptions: $scope.filterOptions
    };
}]);
var app = angular.module('myApp');
app.controller('ImgCropCtrl', ['$scope', function($scope) {
    $scope.myImage='';
    $scope.myCroppedImage='';
    $scope.cropType="circle";

    var handleFileSelect=function(evt) {
      var file=evt.currentTarget.files[0];
      var reader = new FileReader();
      reader.onload = function (evt) {
        $scope.$apply(function($scope){
          $scope.myImage=evt.target.result;
        });
      };
      reader.readAsDataURL(file);
    };
    angular.element(document.querySelector('#fileInput')).on('change',handleFileSelect);
}]);
// this is a lazy load controller, 
// so start with "app." to register this controller
var app = angular.module('myApp');
app.filter('propsFilter', function() {
    return function(items, props) {
        var out = [];

        if (angular.isArray(items)) {
          items.forEach(function(item) {
            var itemMatches = false;

            var keys = Object.keys(props);
            for (var i = 0; i < keys.length; i++) {
              var prop = keys[i];
              var text = props[prop].toLowerCase();
              if (item[prop].toString().toLowerCase().indexOf(text) !== -1) {
                itemMatches = true;
                break;
              }
            }

            if (itemMatches) {
              out.push(item);
            }
          });
        } else {
          // Let the output be the input untouched
          out = items;
        }

        return out;
    };
})
app.controller('SelectCtrl', function($scope, $http, $timeout) {
        $scope.disabled = undefined;
        $scope.searchEnabled = undefined;

        $scope.enable = function() {
        $scope.disabled = false;
        };

        $scope.disable = function() {
        $scope.disabled = true;
        };

        $scope.enableSearch = function() {
        $scope.searchEnabled = true;
        }

        $scope.disableSearch = function() {
        $scope.searchEnabled = false;
        }

        $scope.clear = function() {
        $scope.person.selected = undefined;
        $scope.address.selected = undefined;
        $scope.country.selected = undefined;
        };

        $scope.someGroupFn = function (item){

        if (item.name[0] >= 'A' && item.name[0] <= 'M')
            return 'From A - M';

        if (item.name[0] >= 'N' && item.name[0] <= 'Z')
            return 'From N - Z';

        };

        $scope.personAsync = {selected : "wladimir@email.com"};
        $scope.peopleAsync = [];

        $timeout(function(){
        $scope.peopleAsync = [
            { name: 'Adam',      email: 'adam@email.com',      age: 12, country: 'United States' },
            { name: 'Amalie',    email: 'amalie@email.com',    age: 12, country: 'Argentina' },
            { name: 'Estefanía', email: 'estefania@email.com', age: 21, country: 'Argentina' },
            { name: 'Adrian',    email: 'adrian@email.com',    age: 21, country: 'Ecuador' },
            { name: 'Wladimir',  email: 'wladimir@email.com',  age: 30, country: 'Ecuador' },
            { name: 'Samantha',  email: 'samantha@email.com',  age: 30, country: 'United States' },
            { name: 'Nicole',    email: 'nicole@email.com',    age: 43, country: 'Colombia' },
            { name: 'Natasha',   email: 'natasha@email.com',   age: 54, country: 'Ecuador' },
            { name: 'Michael',   email: 'michael@email.com',   age: 15, country: 'Colombia' },
            { name: 'Nicolás',   email: 'nicole@email.com',    age: 43, country: 'Colombia' }
          ];
        },3000);

        $scope.counter = 0;
        $scope.someFunction = function (item, model){
        $scope.counter++;
        $scope.eventResult = {item: item, model: model};
        };

        $scope.removed = function (item, model) {
        $scope.lastRemoved = {
            item: item,
            model: model
        };
        };

        $scope.person = {};
        $scope.people = [
        { name: 'Adam',      email: 'adam@email.com',      age: 12, country: 'United States' },
        { name: 'Amalie',    email: 'amalie@email.com',    age: 12, country: 'Argentina' },
        { name: 'Estefanía', email: 'estefania@email.com', age: 21, country: 'Argentina' },
        { name: 'Adrian',    email: 'adrian@email.com',    age: 21, country: 'Ecuador' },
        { name: 'Wladimir',  email: 'wladimir@email.com',  age: 30, country: 'Ecuador' },
        { name: 'Samantha',  email: 'samantha@email.com',  age: 30, country: 'United States' },
        { name: 'Nicole',    email: 'nicole@email.com',    age: 43, country: 'Colombia' },
        { name: 'Natasha',   email: 'natasha@email.com',   age: 54, country: 'Ecuador' },
        { name: 'Michael',   email: 'michael@email.com',   age: 15, country: 'Colombia' },
        { name: 'Nicolás',   email: 'nicolas@email.com',    age: 43, country: 'Colombia' }
        ];

        $scope.availableColors = ['Red','Green','Blue','Yellow','Magenta','Maroon','Umbra','Turquoise'];

        $scope.multipleDemo = {};
        $scope.multipleDemo.colors = ['Blue','Red'];
        $scope.multipleDemo.selectedPeople = [$scope.people[5], $scope.people[4]];
        $scope.multipleDemo.selectedPeopleWithGroupBy = [$scope.people[8], $scope.people[6]];
        $scope.multipleDemo.selectedPeopleSimple = ['samantha@email.com','wladimir@email.com'];


        $scope.address = {};
        $scope.refreshAddresses = function(address) {
        var params = {address: address, sensor: false};
        return $http.get(
          'http://maps.googleapis.com/maps/api/geocode/json',
          {params: params}
        ).then(function(response) {
          $scope.addresses = response.data.results;
        });
        };

        $scope.country = {};
        $scope.countries = [ // Taken from https://gist.github.com/unceus/6501985
        {name: 'Afghanistan', code: 'AF'},
        {name: 'Åland Islands', code: 'AX'},
        {name: 'Albania', code: 'AL'},
        {name: 'Algeria', code: 'DZ'},
        {name: 'American Samoa', code: 'AS'},
        {name: 'Andorra', code: 'AD'},
        {name: 'Angola', code: 'AO'},
        {name: 'Anguilla', code: 'AI'},
        {name: 'Antarctica', code: 'AQ'},
        {name: 'Antigua and Barbuda', code: 'AG'},
        {name: 'Argentina', code: 'AR'},
        {name: 'Armenia', code: 'AM'},
        {name: 'Aruba', code: 'AW'},
        {name: 'Australia', code: 'AU'},
        {name: 'Austria', code: 'AT'},
        {name: 'Azerbaijan', code: 'AZ'},
        {name: 'Bahamas', code: 'BS'},
        {name: 'Bahrain', code: 'BH'},
        {name: 'Bangladesh', code: 'BD'},
        {name: 'Barbados', code: 'BB'},
        {name: 'Belarus', code: 'BY'},
        {name: 'Belgium', code: 'BE'},
        {name: 'Belize', code: 'BZ'},
        {name: 'Benin', code: 'BJ'},
        {name: 'Bermuda', code: 'BM'},
        {name: 'Bhutan', code: 'BT'},
        {name: 'Bolivia', code: 'BO'},
        {name: 'Bosnia and Herzegovina', code: 'BA'},
        {name: 'Botswana', code: 'BW'},
        {name: 'Bouvet Island', code: 'BV'},
        {name: 'Brazil', code: 'BR'},
        {name: 'British Indian Ocean Territory', code: 'IO'},
        {name: 'Brunei Darussalam', code: 'BN'},
        {name: 'Bulgaria', code: 'BG'},
        {name: 'Burkina Faso', code: 'BF'},
        {name: 'Burundi', code: 'BI'},
        {name: 'Cambodia', code: 'KH'},
        {name: 'Cameroon', code: 'CM'},
        {name: 'Canada', code: 'CA'},
        {name: 'Cape Verde', code: 'CV'},
        {name: 'Cayman Islands', code: 'KY'},
        {name: 'Central African Republic', code: 'CF'},
        {name: 'Chad', code: 'TD'},
        {name: 'Chile', code: 'CL'},
        {name: 'China', code: 'CN'},
        {name: 'Christmas Island', code: 'CX'},
        {name: 'Cocos (Keeling) Islands', code: 'CC'},
        {name: 'Colombia', code: 'CO'},
        {name: 'Comoros', code: 'KM'},
        {name: 'Congo', code: 'CG'},
        {name: 'Congo, The Democratic Republic of the', code: 'CD'},
        {name: 'Cook Islands', code: 'CK'},
        {name: 'Costa Rica', code: 'CR'},
        {name: 'Cote D\'Ivoire', code: 'CI'},
        {name: 'Croatia', code: 'HR'},
        {name: 'Cuba', code: 'CU'},
        {name: 'Cyprus', code: 'CY'},
        {name: 'Czech Republic', code: 'CZ'},
        {name: 'Denmark', code: 'DK'},
        {name: 'Djibouti', code: 'DJ'},
        {name: 'Dominica', code: 'DM'},
        {name: 'Dominican Republic', code: 'DO'},
        {name: 'Ecuador', code: 'EC'},
        {name: 'Egypt', code: 'EG'},
        {name: 'El Salvador', code: 'SV'},
        {name: 'Equatorial Guinea', code: 'GQ'},
        {name: 'Eritrea', code: 'ER'},
        {name: 'Estonia', code: 'EE'},
        {name: 'Ethiopia', code: 'ET'},
        {name: 'Falkland Islands (Malvinas)', code: 'FK'},
        {name: 'Faroe Islands', code: 'FO'},
        {name: 'Fiji', code: 'FJ'},
        {name: 'Finland', code: 'FI'},
        {name: 'France', code: 'FR'},
        {name: 'French Guiana', code: 'GF'},
        {name: 'French Polynesia', code: 'PF'},
        {name: 'French Southern Territories', code: 'TF'},
        {name: 'Gabon', code: 'GA'},
        {name: 'Gambia', code: 'GM'},
        {name: 'Georgia', code: 'GE'},
        {name: 'Germany', code: 'DE'},
        {name: 'Ghana', code: 'GH'},
        {name: 'Gibraltar', code: 'GI'},
        {name: 'Greece', code: 'GR'},
        {name: 'Greenland', code: 'GL'},
        {name: 'Grenada', code: 'GD'},
        {name: 'Guadeloupe', code: 'GP'},
        {name: 'Guam', code: 'GU'},
        {name: 'Guatemala', code: 'GT'},
        {name: 'Guernsey', code: 'GG'},
        {name: 'Guinea', code: 'GN'},
        {name: 'Guinea-Bissau', code: 'GW'},
        {name: 'Guyana', code: 'GY'},
        {name: 'Haiti', code: 'HT'},
        {name: 'Heard Island and Mcdonald Islands', code: 'HM'},
        {name: 'Holy See (Vatican City State)', code: 'VA'},
        {name: 'Honduras', code: 'HN'},
        {name: 'Hong Kong', code: 'HK'},
        {name: 'Hungary', code: 'HU'},
        {name: 'Iceland', code: 'IS'},
        {name: 'India', code: 'IN'},
        {name: 'Indonesia', code: 'ID'},
        {name: 'Iran, Islamic Republic Of', code: 'IR'},
        {name: 'Iraq', code: 'IQ'},
        {name: 'Ireland', code: 'IE'},
        {name: 'Isle of Man', code: 'IM'},
        {name: 'Israel', code: 'IL'},
        {name: 'Italy', code: 'IT'},
        {name: 'Jamaica', code: 'JM'},
        {name: 'Japan', code: 'JP'},
        {name: 'Jersey', code: 'JE'},
        {name: 'Jordan', code: 'JO'},
        {name: 'Kazakhstan', code: 'KZ'},
        {name: 'Kenya', code: 'KE'},
        {name: 'Kiribati', code: 'KI'},
        {name: 'Korea, Democratic People\'s Republic of', code: 'KP'},
        {name: 'Korea, Republic of', code: 'KR'},
        {name: 'Kuwait', code: 'KW'},
        {name: 'Kyrgyzstan', code: 'KG'},
        {name: 'Lao People\'s Democratic Republic', code: 'LA'},
        {name: 'Latvia', code: 'LV'},
        {name: 'Lebanon', code: 'LB'},
        {name: 'Lesotho', code: 'LS'},
        {name: 'Liberia', code: 'LR'},
        {name: 'Libyan Arab Jamahiriya', code: 'LY'},
        {name: 'Liechtenstein', code: 'LI'},
        {name: 'Lithuania', code: 'LT'},
        {name: 'Luxembourg', code: 'LU'},
        {name: 'Macao', code: 'MO'},
        {name: 'Macedonia, The Former Yugoslav Republic of', code: 'MK'},
        {name: 'Madagascar', code: 'MG'},
        {name: 'Malawi', code: 'MW'},
        {name: 'Malaysia', code: 'MY'},
        {name: 'Maldives', code: 'MV'},
        {name: 'Mali', code: 'ML'},
        {name: 'Malta', code: 'MT'},
        {name: 'Marshall Islands', code: 'MH'},
        {name: 'Martinique', code: 'MQ'},
        {name: 'Mauritania', code: 'MR'},
        {name: 'Mauritius', code: 'MU'},
        {name: 'Mayotte', code: 'YT'},
        {name: 'Mexico', code: 'MX'},
        {name: 'Micronesia, Federated States of', code: 'FM'},
        {name: 'Moldova, Republic of', code: 'MD'},
        {name: 'Monaco', code: 'MC'},
        {name: 'Mongolia', code: 'MN'},
        {name: 'Montserrat', code: 'MS'},
        {name: 'Morocco', code: 'MA'},
        {name: 'Mozambique', code: 'MZ'},
        {name: 'Myanmar', code: 'MM'},
        {name: 'Namibia', code: 'NA'},
        {name: 'Nauru', code: 'NR'},
        {name: 'Nepal', code: 'NP'},
        {name: 'Netherlands', code: 'NL'},
        {name: 'Netherlands Antilles', code: 'AN'},
        {name: 'New Caledonia', code: 'NC'},
        {name: 'New Zealand', code: 'NZ'},
        {name: 'Nicaragua', code: 'NI'},
        {name: 'Niger', code: 'NE'},
        {name: 'Nigeria', code: 'NG'},
        {name: 'Niue', code: 'NU'},
        {name: 'Norfolk Island', code: 'NF'},
        {name: 'Northern Mariana Islands', code: 'MP'},
        {name: 'Norway', code: 'NO'},
        {name: 'Oman', code: 'OM'},
        {name: 'Pakistan', code: 'PK'},
        {name: 'Palau', code: 'PW'},
        {name: 'Palestinian Territory, Occupied', code: 'PS'},
        {name: 'Panama', code: 'PA'},
        {name: 'Papua New Guinea', code: 'PG'},
        {name: 'Paraguay', code: 'PY'},
        {name: 'Peru', code: 'PE'},
        {name: 'Philippines', code: 'PH'},
        {name: 'Pitcairn', code: 'PN'},
        {name: 'Poland', code: 'PL'},
        {name: 'Portugal', code: 'PT'},
        {name: 'Puerto Rico', code: 'PR'},
        {name: 'Qatar', code: 'QA'},
        {name: 'Reunion', code: 'RE'},
        {name: 'Romania', code: 'RO'},
        {name: 'Russian Federation', code: 'RU'},
        {name: 'Rwanda', code: 'RW'},
        {name: 'Saint Helena', code: 'SH'},
        {name: 'Saint Kitts and Nevis', code: 'KN'},
        {name: 'Saint Lucia', code: 'LC'},
        {name: 'Saint Pierre and Miquelon', code: 'PM'},
        {name: 'Saint Vincent and the Grenadines', code: 'VC'},
        {name: 'Samoa', code: 'WS'},
        {name: 'San Marino', code: 'SM'},
        {name: 'Sao Tome and Principe', code: 'ST'},
        {name: 'Saudi Arabia', code: 'SA'},
        {name: 'Senegal', code: 'SN'},
        {name: 'Serbia and Montenegro', code: 'CS'},
        {name: 'Seychelles', code: 'SC'},
        {name: 'Sierra Leone', code: 'SL'},
        {name: 'Singapore', code: 'SG'},
        {name: 'Slovakia', code: 'SK'},
        {name: 'Slovenia', code: 'SI'},
        {name: 'Solomon Islands', code: 'SB'},
        {name: 'Somalia', code: 'SO'},
        {name: 'South Africa', code: 'ZA'},
        {name: 'South Georgia and the South Sandwich Islands', code: 'GS'},
        {name: 'Spain', code: 'ES'},
        {name: 'Sri Lanka', code: 'LK'},
        {name: 'Sudan', code: 'SD'},
        {name: 'Suriname', code: 'SR'},
        {name: 'Svalbard and Jan Mayen', code: 'SJ'},
        {name: 'Swaziland', code: 'SZ'},
        {name: 'Sweden', code: 'SE'},
        {name: 'Switzerland', code: 'CH'},
        {name: 'Syrian Arab Republic', code: 'SY'},
        {name: 'Taiwan, Province of China', code: 'TW'},
        {name: 'Tajikistan', code: 'TJ'},
        {name: 'Tanzania, United Republic of', code: 'TZ'},
        {name: 'Thailand', code: 'TH'},
        {name: 'Timor-Leste', code: 'TL'},
        {name: 'Togo', code: 'TG'},
        {name: 'Tokelau', code: 'TK'},
        {name: 'Tonga', code: 'TO'},
        {name: 'Trinidad and Tobago', code: 'TT'},
        {name: 'Tunisia', code: 'TN'},
        {name: 'Turkey', code: 'TR'},
        {name: 'Turkmenistan', code: 'TM'},
        {name: 'Turks and Caicos Islands', code: 'TC'},
        {name: 'Tuvalu', code: 'TV'},
        {name: 'Uganda', code: 'UG'},
        {name: 'Ukraine', code: 'UA'},
        {name: 'United Arab Emirates', code: 'AE'},
        {name: 'United Kingdom', code: 'GB'},
        {name: 'United States', code: 'US'},
        {name: 'United States Minor Outlying Islands', code: 'UM'},
        {name: 'Uruguay', code: 'UY'},
        {name: 'Uzbekistan', code: 'UZ'},
        {name: 'Vanuatu', code: 'VU'},
        {name: 'Venezuela', code: 'VE'},
        {name: 'Vietnam', code: 'VN'},
        {name: 'Virgin Islands, British', code: 'VG'},
        {name: 'Virgin Islands, U.S.', code: 'VI'},
        {name: 'Wallis and Futuna', code: 'WF'},
        {name: 'Western Sahara', code: 'EH'},
        {name: 'Yemen', code: 'YE'},
        {name: 'Zambia', code: 'ZM'},
        {name: 'Zimbabwe', code: 'ZW'}
        ];
});
'use strict';
var app = angular.module('myApp');
/* Controllers */
  // signin controller
app.controller('SigninFormController', ['$scope', '$http', '$state', function($scope, $http, $state) {
    $scope.user = {};
    $scope.authError = null;
    $scope.login = function() {
      $scope.authError = null;
      // Try to login
      $http.post('api/login', {email: $scope.user.email, password: $scope.user.password})
      .then(function(response) {
        if ( !response.data.user ) {
          $scope.authError = 'Email or Password not right';
        }else{
          $state.go('app.dashboard-v1');
        }
      }, function(x) {
        $scope.authError = 'Server Error';
      });
    };
  }])
;
'use strict';
var app = angular.module('myApp');
// signup controller
app.controller('SignupFormController', ['$scope', '$http', '$state', function($scope, $http, $state) {
    $scope.user = {};
    $scope.authError = null;
    $scope.signup = function() {
      $scope.authError = null;
      // Try to create
      $http.post('api/signup', {name: $scope.user.name, email: $scope.user.email, password: $scope.user.password})
      .then(function(response) {
        if ( !response.data.user ) {
          $scope.authError = response;
        }else{
          $state.go('app.dashboard-v1');
        }
      }, function(x) {
        $scope.authError = 'Server Error';
      });
    };
  }])
 ;
var app = angular.module('myApp');
app.controller('SliderCtrl', function($scope) {
  $scope.cost = 40;
  $scope.range = {
    min: 30,
    max: 60
  };
  $scope.currencyFormatting = function(value) { 
    return"$"+value.toString();
  }
});
var app = angular.module('myApp');
// tab controller
app.controller('CustomTabController', ['$scope', function($scope) {
  $scope.tabs = [true, false, false];
  $scope.tab = function(index){
    angular.forEach($scope.tabs, function(i, v) {
      $scope.tabs[v] = false;
    });
    $scope.tabs[index] = true;
  }
}]);
var app = angular.module('myApp');
app.controller('ToasterDemoCtrl', ['$scope', 'toaster', function($scope, toaster) {
    $scope.toaster = {
        type: 'success',
        title: 'Title',
        text: 'Message'
    };
    $scope.pop = function(){
        toaster.pop($scope.toaster.type, $scope.toaster.title, $scope.toaster.text);
    };
}]);
var app = angular.module('myApp');
app.controller('AbnTestController', function($scope, $timeout) {
    var apple_selected, tree, treedata_avm, treedata_geography;
    $scope.my_tree_handler = function(branch) {
      var _ref;
      $scope.output = "You selected: " + branch.label;
      if ((_ref = branch.data) != null ? _ref.description : void 0) {
        return $scope.output += '(' + branch.data.description + ')';
      }
    };
    apple_selected = function(branch) {
      return $scope.output = "APPLE! : " + branch.label;
    };
    treedata_avm = [
      {
        label: 'Animal',
        children: [
          {
            label: 'Dog',
            data: {
              description: "man's best friend"
            }
          }, {
            label: 'Cat',
            data: {
              description: "Felis catus"
            }
          }, {
            label: 'Hippopotamus',
            data: {
              description: "hungry, hungry"
            }
          }, {
            label: 'Chicken',
            children: ['White Leghorn', 'Rhode Island Red', 'Jersey Giant']
          }
        ]
      }, {
        label: 'Vegetable',
        data: {
          definition: "A plant or part of a plant used as food, typically as accompaniment to meat or fish, such as a cabbage, potato, carrot, or bean.",
          data_can_contain_anything: true
        },
        onSelect: function(branch) {
          return $scope.output = "Vegetable: " + branch.data.definition;
        },
        children: [
          {
            label: 'Oranges'
          }, {
            label: 'Apples',
            children: [
              {
                label: 'Granny Smith',
                onSelect: apple_selected
              }, {
                label: 'Red Delicous',
                onSelect: apple_selected
              }, {
                label: 'Fuji',
                onSelect: apple_selected
              }
            ]
          }
        ]
      }, {
        label: 'Mineral',
        children: [
          {
            label: 'Rock',
            children: ['Igneous', 'Sedimentary', 'Metamorphic']
          }, {
            label: 'Metal',
            children: ['Aluminum', 'Steel', 'Copper']
          }, {
            label: 'Plastic',
            children: [
              {
                label: 'Thermoplastic',
                children: ['polyethylene', 'polypropylene', 'polystyrene', ' polyvinyl chloride']
              }, {
                label: 'Thermosetting Polymer',
                children: ['polyester', 'polyurethane', 'vulcanized rubber', 'bakelite', 'urea-formaldehyde']
              }
            ]
          }
        ]
      }
    ];
    treedata_geography = [
      {
        label: 'North America',
        children: [
          {
            label: 'Canada',
            children: ['Toronto', 'Vancouver']
          }, {
            label: 'USA',
            children: ['New York', 'Los Angeles']
          }, {
            label: 'Mexico',
            children: ['Mexico City', 'Guadalajara']
          }
        ]
      }, {
        label: 'South America',
        children: [
          {
            label: 'Venezuela',
            children: ['Caracas', 'Maracaibo']
          }, {
            label: 'Brazil',
            children: ['Sao Paulo', 'Rio de Janeiro']
          }, {
            label: 'Argentina',
            children: ['Buenos Aires', 'Cordoba']
          }
        ]
      }
    ];
    $scope.my_data = treedata_avm;
    $scope.try_changing_the_tree_data = function() {
      if ($scope.my_data === treedata_avm) {
        return $scope.my_data = treedata_geography;
      } else {
        return $scope.my_data = treedata_avm;
      }
    };
    $scope.my_tree = tree = {};
    $scope.try_async_load = function() {
      $scope.my_data = [];
      $scope.doing_async = true;
      return $timeout(function() {
        if (Math.random() < 0.5) {
          $scope.my_data = treedata_avm;
        } else {
          $scope.my_data = treedata_geography;
        }
        $scope.doing_async = false;
        return tree.expand_all();
      }, 1000);
    };
    return $scope.try_adding_a_branch = function() {
      var b;
      b = tree.get_selected_branch();
      return tree.add_branch(b, {
        label: 'New Branch',
        data: {
          something: 42,
          "else": 43
        }
      });
    };
});
'use strict';
var app = angular.module('myApp');
// jVectorMap controller
app.controller('JVectorMapDemoCtrl', ['$scope', function($scope) {
    $scope.world_markers = [
      {latLng: [41.90, 12.45], name: 'Vatican City'},
      {latLng: [43.73, 7.41], name: 'Monaco'},
      {latLng: [-0.52, 166.93], name: 'Nauru'},
      {latLng: [-8.51, 179.21], name: 'Tuvalu'},
      {latLng: [43.93, 12.46], name: 'San Marino'},
      {latLng: [47.14, 9.52], name: 'Liechtenstein'},
      {latLng: [7.11, 171.06], name: 'Marshall Islands'},
      {latLng: [17.3, -62.73], name: 'Saint Kitts and Nevis'},
      {latLng: [3.2, 73.22], name: 'Maldives'},
      {latLng: [35.88, 14.5], name: 'Malta'},
      {latLng: [12.05, -61.75], name: 'Grenada'},
      {latLng: [13.16, -61.23], name: 'Saint Vincent and the Grenadines'},
      {latLng: [13.16, -59.55], name: 'Barbados'},
      {latLng: [17.11, -61.85], name: 'Antigua and Barbuda'},
      {latLng: [-4.61, 55.45], name: 'Seychelles'},
      {latLng: [7.35, 134.46], name: 'Palau'},
      {latLng: [42.5, 1.51], name: 'Andorra'},
      {latLng: [14.01, -60.98], name: 'Saint Lucia'},
      {latLng: [6.91, 158.18], name: 'Federated States of Micronesia'},
      {latLng: [1.3, 103.8], name: 'Singapore'},
      {latLng: [1.46, 173.03], name: 'Kiribati'},
      {latLng: [-21.13, -175.2], name: 'Tonga'},
      {latLng: [15.3, -61.38], name: 'Dominica'},
      {latLng: [-20.2, 57.5], name: 'Mauritius'},
      {latLng: [26.02, 50.55], name: 'Bahrain'},
      {latLng: [0.33, 6.73], name: 'São Tomé and Príncipe'}
    ];

    $scope.usa_markers = [
      {latLng: [40.71, -74.00], name: 'New York'},
      {latLng: [34.05, -118.24], name: 'Los Angeles'},
      {latLng: [41.87, -87.62], name: 'Chicago'},
      {latLng: [29.76, -95.36], name: 'Houston'},
      {latLng: [39.95, -75.16], name: 'Philadelphia'},
      {latLng: [38.90, -77.03], name: 'Washington'},
      {latLng: [37.36, -122.03], name: 'Silicon Valley'}
    ];
  }])
;
var app = angular.module('myApp');
app.directive('setNgAnimate', ['$animate', function ($animate) {
    return {
        link: function ($scope, $element, $attrs) {
            $scope.$watch( function() {
                return $scope.$eval($attrs.setNgAnimate, $scope);
            }, function(valnew, valold){
                $animate.enabled(!!valnew, $element);
            });
        }
    };
  }]);

var app = angular.module('myApp');
app.directive('uiButterbar', ['$rootScope', '$anchorScroll', function($rootScope, $anchorScroll) {
     return {
      restrict: 'AC',
      template:'<span class="bar"></span>',
      link: function(scope, el, attrs) {        
        el.addClass('butterbar hide');
        scope.$on('$stateChangeStart', function(event) {
          $anchorScroll();
          el.removeClass('hide').addClass('active');
        });
        scope.$on('$stateChangeSuccess', function( event, toState, toParams, fromState ) {
          event.targetScope.$watch('$viewContentLoaded', function(){
            el.addClass('hide').removeClass('active');
          })
        });
      }
     };
  }]);
var app = angular.module('myApp');
app.directive('uiFocus', function($timeout, $parse) {
    return {
      link: function(scope, element, attr) {
        var model = $parse(attr.uiFocus);
        scope.$watch(model, function(value) {
          if(value === true) {
            $timeout(function() {
              element[0].focus();
            });
          }
        });
        element.bind('blur', function() {
           scope.$apply(model.assign(scope, false));
        });
      }
    };
  });
var app = angular.module('myApp');
app.directive('uiFullscreen', ['uiLoad', '$document', '$window', function(uiLoad, $document, $window) {
    return {
      restrict: 'AC',
      template:'<i class="fa fa-expand fa-fw text"></i><i class="fa fa-compress fa-fw text-active"></i>',
      link: function(scope, el, attr) {
        el.addClass('hide');
        uiLoad.load('vendor/libs/screenfull.min.js').then(function(){
          // disable on ie11
          if (screenfull.enabled && !navigator.userAgent.match(/Trident.*rv:11\./)) {
            el.removeClass('hide');
          }
          el.on('click', function(){
            var target;
            attr.target && ( target = $(attr.target)[0] );            
            screenfull.toggle(target);
          });
          $document.on(screenfull.raw.fullscreenchange, function () {
            if(screenfull.isFullscreen){
              el.addClass('active');
            }else{
              el.removeClass('active');
            }
          });
        });
      }
    };
  }]);
'use strict';

/**
 * 0.1.1
 * General-purpose jQuery wrapper. Simply pass the plugin name as the expression.
 *
 * It is possible to specify a default set of parameters for each jQuery plugin.
 * Under the jq key, namespace each plugin by that which will be passed to ui-jq.
 * Unfortunately, at this time you can only pre-define the first parameter.
 * @example { jq : { datepicker : { showOn:'click' } } }
 *
 * @param ui-jq {string} The $elm.[pluginName]() to call.
 * @param [ui-options] {mixed} Expression to be evaluated and passed as options to the function
 *     Multiple parameters can be separated by commas
 * @param [ui-refresh] {expression} Watch expression and refire plugin on changes
 *
 * @example <input ui-jq="datepicker" ui-options="{showOn:'click'},secondParameter,thirdParameter" ui-refresh="iChange">
 */
angular.module('ui.jq', ['ui.load']).
  value('uiJqConfig', {}).
  directive('uiJq', ['uiJqConfig', 'JQ_CONFIG', 'uiLoad', '$timeout', function uiJqInjectingFunction(uiJqConfig, JQ_CONFIG, uiLoad, $timeout) {

  return {
    restrict: 'A',
    compile: function uiJqCompilingFunction(tElm, tAttrs) {

      if (!angular.isFunction(tElm[tAttrs.uiJq]) && !JQ_CONFIG[tAttrs.uiJq]) {
        throw new Error('ui-jq: The "' + tAttrs.uiJq + '" function does not exist');
      }
      var options = uiJqConfig && uiJqConfig[tAttrs.uiJq];

      return function uiJqLinkingFunction(scope, elm, attrs) {

        function getOptions(){
          var linkOptions = [];

          // If ui-options are passed, merge (or override) them onto global defaults and pass to the jQuery method
          if (attrs.uiOptions) {
            linkOptions = scope.$eval('[' + attrs.uiOptions + ']');
            if (angular.isObject(options) && angular.isObject(linkOptions[0])) {
              linkOptions[0] = angular.extend({}, options, linkOptions[0]);
            }
          } else if (options) {
            linkOptions = [options];
          }
          return linkOptions;
        }

        // If change compatibility is enabled, the form input's "change" event will trigger an "input" event
        if (attrs.ngModel && elm.is('select,input,textarea')) {
          elm.bind('change', function() {
            elm.trigger('input');
          });
        }

        // Call jQuery method and pass relevant options
        function callPlugin() {
          $timeout(function() {
            elm[attrs.uiJq].apply(elm, getOptions());
          }, 0, false);
        }

        function refresh(){
          // If ui-refresh is used, re-fire the the method upon every change
          if (attrs.uiRefresh) {
            scope.$watch(attrs.uiRefresh, function() {
              callPlugin();
            });
          }
        }

        if ( JQ_CONFIG[attrs.uiJq] ) {
          uiLoad.load(JQ_CONFIG[attrs.uiJq]).then(function() {
            callPlugin();
            refresh();
          }).catch(function() {
            
          });
        } else {
          callPlugin();
          refresh();
        }
      };
    }
  };
}]);
var app = angular.module('myApp');
app.directive('uiModule', ['MODULE_CONFIG','uiLoad', '$compile', function(MODULE_CONFIG, uiLoad, $compile) {
    return {
      restrict: 'A',
      compile: function (el, attrs) {
        var contents = el.contents().clone();
        return function(scope, el, attrs){
          el.contents().remove();
          uiLoad.load(MODULE_CONFIG[attrs.uiModule])
          .then(function(){
            $compile(contents)(scope, function(clonedElement, scope) {
              el.append(clonedElement);
            });
          });
        }
      }
    };
  }]);
var app = angular.module('myApp');
app.directive('uiNav', ['$timeout', function($timeout) {
    return {
      restrict: 'AC',
      link: function(scope, el, attr) {
        var _window = $(window), 
        _mb = 768, 
        wrap = $('.app-aside'), 
        next, 
        backdrop = '.dropdown-backdrop';
        // unfolded
        el.on('click', 'a', function(e) {
          next && next.trigger('mouseleave.nav');
          var _this = $(this);
          _this.parent().siblings( ".active" ).toggleClass('active');
          _this.next().is('ul') &&  _this.parent().toggleClass('active') &&  e.preventDefault();
          // mobile
          _this.next().is('ul') || ( ( _window.width() < _mb ) && $('.app-aside').removeClass('show off-screen') );
        });

        // folded & fixed
        el.on('mouseenter', 'a', function(e){
          next && next.trigger('mouseleave.nav');
          $('> .nav', wrap).remove();
          if ( !$('.app-aside-fixed.app-aside-folded').length || ( _window.width() < _mb ) || $('.app-aside-dock').length) return;
          var _this = $(e.target)
          , top
          , w_h = $(window).height()
          , offset = 50
          , min = 150;

          !_this.is('a') && (_this = _this.closest('a'));
          if( _this.next().is('ul') ){
             next = _this.next();
          }else{
            return;
          }
         
          _this.parent().addClass('active');
          top = _this.parent().position().top + offset;
          next.css('top', top);
          if( top + next.height() > w_h ){
            next.css('bottom', 0);
          }
          if(top + min > w_h){
            next.css('bottom', w_h - top - offset).css('top', 'auto');
          }
          next.appendTo(wrap);

          next.on('mouseleave.nav', function(e){
            $(backdrop).remove();
            next.appendTo(_this.parent());
            next.off('mouseleave.nav').css('top', 'auto').css('bottom', 'auto');
            _this.parent().removeClass('active');
          });

          $('.smart').length && $('<div class="dropdown-backdrop"/>').insertAfter('.app-aside').on('click', function(next){
            next && next.trigger('mouseleave.nav');
          });

        });

        wrap.on('mouseleave', function(e){
          next && next.trigger('mouseleave.nav');
          $('> .nav', wrap).remove();
        });
      }
    };
  }]);
var app = angular.module('myApp');
app.directive('uiScroll', ['$location', '$anchorScroll', function($location, $anchorScroll) {
    return {
      restrict: 'AC',
      link: function(scope, el, attr) {
        el.on('click', function(e) {
          $location.hash(attr.uiScroll);
          $anchorScroll();
        });
      }
    };
  }]);
var app = angular.module('myApp');
app.directive('uiShift', ['$timeout', function($timeout) {
    return {
      restrict: 'A',
      link: function(scope, el, attr) {
        // get the $prev or $parent of this el
        var _el = $(el),
            _window = $(window),
            prev = _el.prev(),
            parent,
            width = _window.width()
            ;

        !prev.length && (parent = _el.parent());
        
        function sm(){
          $timeout(function () {
            var method = attr.uiShift;
            var target = attr.target;
            _el.hasClass('in') || _el[method](target).addClass('in');
          });
        }
        
        function md(){
          parent && parent['prepend'](el);
          !parent && _el['insertAfter'](prev);
          _el.removeClass('in');
        }

        (width < 768 && sm()) || md();

        _window.resize(function() {
          if(width !== _window.width()){
            $timeout(function(){
              (_window.width() < 768 && sm()) || md();
              width = _window.width();
            });
          }
        });
      }
    };
  }]);
var app = angular.module('myApp');
app.directive('uiToggleClass', ['$timeout', '$document', function($timeout, $document) {
    return {
      restrict: 'AC',
      link: function(scope, el, attr) {
        el.on('click', function(e) {
          e.preventDefault();
          var classes = attr.uiToggleClass.split(','),
              targets = (attr.target && attr.target.split(',')) || Array(el),
              key = 0;
          angular.forEach(classes, function( _class ) {
            var target = targets[(targets.length && key)];            
            ( _class.indexOf( '*' ) !== -1 ) && magic(_class, target);
            $( target ).toggleClass(_class);
            key ++;
          });
          $(el).toggleClass('active');

          function magic(_class, target){
            var patt = new RegExp( '\\s' + 
                _class.
                  replace( /\*/g, '[A-Za-z0-9-_]+' ).
                  split( ' ' ).
                  join( '\\s|\\s' ) + 
                '\\s', 'g' );
            var cn = ' ' + $(target)[0].className + ' ';
            while ( patt.test( cn ) ) {
              cn = cn.replace( patt, ' ' );
            }
            $(target)[0].className = $.trim( cn );
          }
        });
      }
    };
  }]);
'use strict';

/**
 * General-purpose validator for ngModel.
 * angular.js comes with several built-in validation mechanism for input fields (ngRequired, ngPattern etc.) but using
 * an arbitrary validation function requires creation of a custom formatters and / or parsers.
 * The ui-validate directive makes it easy to use any function(s) defined in scope as a validator function(s).
 * A validator function will trigger validation on both model and input changes.
 *
 * @example <input ui-validate=" 'myValidatorFunction($value)' ">
 * @example <input ui-validate="{ foo : '$value > anotherModel', bar : 'validateFoo($value)' }">
 * @example <input ui-validate="{ foo : '$value > anotherModel' }" ui-validate-watch=" 'anotherModel' ">
 * @example <input ui-validate="{ foo : '$value > anotherModel', bar : 'validateFoo($value)' }" ui-validate-watch=" { foo : 'anotherModel' } ">
 *
 * @param ui-validate {string|object literal} If strings is passed it should be a scope's function to be used as a validator.
 * If an object literal is passed a key denotes a validation error key while a value should be a validator function.
 * In both cases validator function should take a value to validate as its argument and should return true/false indicating a validation result.
 */
angular.module('ui.validate',[]).directive('uiValidate', function () {

  return {
    restrict: 'A',
    require: 'ngModel',
    link: function (scope, elm, attrs, ctrl) {
      var validateFn, validators = {},
          validateExpr = scope.$eval(attrs.uiValidate);

      if (!validateExpr){ return;}

      if (angular.isString(validateExpr)) {
        validateExpr = { validator: validateExpr };
      }

      angular.forEach(validateExpr, function (exprssn, key) {
        validateFn = function (valueToValidate) {
          var expression = scope.$eval(exprssn, { '$value' : valueToValidate });
          if (angular.isObject(expression) && angular.isFunction(expression.then)) {
            // expression is a promise
            expression.then(function(){
              ctrl.$setValidity(key, true);
            }, function(){
              ctrl.$setValidity(key, false);
            });
            return valueToValidate;
          } else if (expression) {
            // expression is true
            ctrl.$setValidity(key, true);
            return valueToValidate;
          } else {
            // expression is false
            ctrl.$setValidity(key, false);
            return valueToValidate;
          }
        };
        validators[key] = validateFn;
        ctrl.$formatters.push(validateFn);
        ctrl.$parsers.push(validateFn);
      });

      function apply_watch(watch)
      {
          //string - update all validators on expression change
          if (angular.isString(watch))
          {
              scope.$watch(watch, function(){
                  angular.forEach(validators, function(validatorFn){
                      validatorFn(ctrl.$modelValue);
                  });
              });
              return;
          }

          //array - update all validators on change of any expression
          if (angular.isArray(watch))
          {
              angular.forEach(watch, function(expression){
                  scope.$watch(expression, function()
                  {
                      angular.forEach(validators, function(validatorFn){
                          validatorFn(ctrl.$modelValue);
                      });
                  });
              });
              return;
          }

          //object - update appropriate validator
          if (angular.isObject(watch))
          {
              angular.forEach(watch, function(expression, validatorKey)
              {
                  //value is string - look after one expression
                  if (angular.isString(expression))
                  {
                      scope.$watch(expression, function(){
                          validators[validatorKey](ctrl.$modelValue);
                      });
                  }

                  //value is array - look after all expressions in array
                  if (angular.isArray(expression))
                  {
                      angular.forEach(expression, function(intExpression)
                      {
                          scope.$watch(intExpression, function(){
                              validators[validatorKey](ctrl.$modelValue);
                          });
                      });
                  }
              });
          }
      }
      // Support for ui-validate-watch
      if (attrs.uiValidateWatch){
          apply_watch( scope.$eval(attrs.uiValidateWatch) );
      }
    }
  };
});

'use strict';

/* Filters */
// need load the moment.js to use this filter. 
var app = angular.module('myApp');
app.filter('fromNow', function() {
    return function(date) {
      return moment(date).fromNow();
    }
  });
'use strict';

/**
 * 0.1.1
 * Deferred load js/css file, used for ui-jq.js and Lazy Loading.
 * 
 * @ flatfull.com All Rights Reserved.
 * Author url: #user/flatfull
 */

angular.module('ui.load', [])
	.service('uiLoad', ['$document', '$q', '$timeout', function ($document, $q, $timeout) {

		var loaded = [];
		var promise = false;
		var deferred = $q.defer();

		/**
		 * Chain loads the given sources
		 * @param srcs array, script or css
		 * @returns {*} Promise that will be resolved once the sources has been loaded.
		 */
		this.load = function (srcs) {
			srcs = angular.isArray(srcs) ? srcs : srcs.split(/\s+/);
			var self = this;
			if(!promise){
				promise = deferred.promise;
			}
      angular.forEach(srcs, function(src) {
      	promise = promise.then( function(){
      		return src.indexOf('.css') >=0 ? self.loadCSS(src) : self.loadScript(src);
      	} );
      });
      deferred.resolve();
      return promise;
		}

		/**
		 * Dynamically loads the given script
		 * @param src The url of the script to load dynamically
		 * @returns {*} Promise that will be resolved once the script has been loaded.
		 */
		this.loadScript = function (src) {
			if(loaded[src]) return loaded[src].promise;

			var deferred = $q.defer();
			var script = $document[0].createElement('script');
			script.src = src;
			script.onload = function (e) {
				$timeout(function () {
					deferred.resolve(e);
				});
			};
			script.onerror = function (e) {
				$timeout(function () {
					deferred.reject(e);
				});
			};
			$document[0].body.appendChild(script);
			loaded[src] = deferred;

			return deferred.promise;
		};

		/**
		 * Dynamically loads the given CSS file
		 * @param href The url of the CSS to load dynamically
		 * @returns {*} Promise that will be resolved once the CSS file has been loaded.
		 */
		this.loadCSS = function (href) {
			if(loaded[href]) return loaded[href].promise;

			var deferred = $q.defer();
			var style = $document[0].createElement('link');
			style.rel = 'stylesheet';
			style.type = 'text/css';
			style.href = href;
			style.onload = function (e) {
				$timeout(function () {
					deferred.resolve(e);
				});
			};
			style.onerror = function (e) {
				$timeout(function () {
					deferred.reject(e);
				});
			};
			$document[0].head.appendChild(style);
			loaded[href] = deferred;

			return deferred.promise;
		};
}]);
/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.block',[
    'com.app.block.controller'
]);
angular.module('com.app.block.controller',[]);

angular.module('myApp')
    .config(function($stateProvider,$urlRouterProvider){
        /*$stateProvider.state('app.user',{
            url:'/user',
            abstract:true/!*,
            template: '<div ui-view class="fade-in-up"></div>'*!/
        }).state('app.user.manage',{
            url:'/manage',
            templateUrl:'app/module-user/tpl/user.html'
        });*/
    });


/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.callcenter',[
    'com.app.callcenter.controller',
    'com.app.callcenter.service',
    'com.app.callcenter.directive'
]).run(['$rootScope',function($rootScope){
    $rootScope.eventShowCallCenter = "eventShowCallCenter";//显示面板
    $rootScope.eventHideCallCenter = "eventHideCallCenter";//隐藏面板
    $rootScope.eventRefreshStatus = "eventRefreshStatus";//刷新状态事件

    $rootScope.eventPhoneIconClick = "eventPhoneIconClick";//电话图标点击事件

    $rootScope.eventConnect = "eventConnect";//建立链接
    $rootScope.eventDisConnect = 'eventDisConnecct';//断开连接
    $rootScope.eventCheckIn = "eventCheckIn";//签入
    $rootScope.eventCheckOut = "eventCheckOut";//签出
    $rootScope.eventSeatBusy = "eventSeatBusy";//坐席忙
    $rootScope.eventSeatIdle = "eventSeatIdle";//坐席闲
    $rootScope.eventThreeTalk = "eventThreeTalk";//三方通话
    $rootScope.eventTrans2Group = "eventTrans2Group";//转其他坐席组
    $rootScope.eventTrans2Seat = "eventTrans2Seat";//转其他坐席
    $rootScope.eventStayCall = "eventStayCall";//保持通话
    $rootScope.eventCancelStayCall = "eventStayCallCancel";//取消保持通话
    $rootScope.eventExitThreeCall = "eventExitThreeCall";//退出三方通话
    $rootScope.eventKillCall = "eventKillCall";//挂机
    $rootScope.eventMakeCall = "eventMakeCall";//呼叫

    $rootScope.eventCallIn = "eventCallIn";//呼入弹屏事件
}]);
angular.module('com.app.callcenter.controller',[]);
angular.module('com.app.callcenter.service',[]);
angular.module('com.app.callcenter.directive',[]);

//声明：呼叫中心指令作用域对象
//var callCenterDirectiveScope;


/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.uibootstrap',[
    'com.app.uibootstraop.controller'
]);
angular.module('com.app.uibootstraop.controller',[]);

angular.module('myApp')
    .config(function($stateProvider,$urlRouterProvider){
        $stateProvider.state('app.angularuibootstrap',{
            url:'/uibootstrap',
            abstract:true,
            template: '<div ui-view class="fade-in-up"></div>'
        }).state('app.angularuibootstrap.test',{
            url:'/test',
            templateUrl:'app/module-angularuibootstrap/tpl/angularuibootstrap.html'
        });
    });


/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.org',[
    'com.app.org.controller.OrgController',
    'com.app.service.OrgService'
]);
angular.module('myApp')
    .config(function($stateProvider,$urlRouterProvider){
        $stateProvider.state('app.org',{
            url:'/org',
            abstract:true,
            template: '<div ui-view class="fade-in-up"></div>'
        }).state('app.org.manage',{
            url:'/manage',
            templateUrl:'html/module_org/tpl/OrgManage.html'
        });
    });

/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.process',[
    'com.app.process.controller',
    'com.app.process.service',
    'com.app.process.directive'
]);
angular.module('com.app.process.directive',[]);
angular.module('com.app.process.controller',[]);

angular.module('myApp')
    .config(function($stateProvider,$urlRouterProvider){
        $stateProvider.state('app.process',{
            url:'/process',
            abstract:true/*,
            template: '<div ui-view class="fade-in-up"></div>'*/
        }).state('app.process.manage',{
            url:'/manage',
            templateUrl:'app/module-process/tpl/processManage.html'
        }).state('app.process.query',{
            url:'/query',
            templateUrl:'app/module-process/tpl/processQuery.html'
        }) .state('app.process.task',{
                url:'/task',
                templateUrl:'app/module-process/tpl/currTask.html',
                onEnter:function(){
                    console.log("6666666666666");
                }
        }) .state('app.process.detail',{//流程明细
                url:'/detail',
                templateUrl:'app/module-process/tpl/processDetail.html'
        }).state('app.process.detail.dgrmResource',{
                views:{
                    'dgmnView':{
                        url:'/dgrmResource',
                        templateUrl:'app/module-process/tpl/processDiagram.html'
                    }
                }
        }).state('app.process.detail.resource',{
            url:'/resource',
            templateUrl:'app/module-process/tpl/processBpmn.html'
        }).state('app.process.model',{
            url:'model',
            templateUrl:'app/module-process/tpl/modelManage.html'
        });
    });


/**
 * Created by pujjr on 2017/9/19.
 */
angular.module('templateCacheApp',[]);

/**
 * Created by pujjr on 2017/9/20.
 */
angular.module('myTestApp',[
    'restangular'
]);

/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.user',[
    'com.app.user.controller',
    'com.app.user.service.UserService',
    'com.app.user.directive'
]);
angular.module('com.app.user.directive',[]);
angular.module('com.app.user.controller',[]);

angular.module('myApp')
    .config(function($stateProvider,$urlRouterProvider){
        $stateProvider.state('app.user',{
            url:'/user',
            abstract:true/*,
            template: '<div ui-view class="fade-in-up"></div>'*/
        }).state('app.user.manage',{
            url:'/manage',
            templateUrl:'app/module-user/tpl/user.html'
        });
    });


/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.websocket',[
    'com.app.websocket.controller',
    'com.app.websocket.service',
    'com.app.websocket.directive'
]).run(['$rootScope',function($rootScope){
    /*$rootScope.eventShowCallCenter = "eventShowCallCenter";//显示面板
    $rootScope.eventHideCallCenter = "eventHideCallCenter";//隐藏面板
    $rootScope.eventRefreshStatus = "eventRefreshStatus";//刷新状态事件

    $rootScope.eventPhoneIconClick = "eventPhoneIconClick";//电话图标点击事件

    $rootScope.eventConnect = "eventConnect";//建立链接
    $rootScope.eventDisConnect = 'eventDisConnecct';//断开连接
    $rootScope.eventCheckIn = "eventCheckIn";//签入
    $rootScope.eventCheckOut = "eventCheckOut";//签出
    $rootScope.eventSeatBusy = "eventSeatBusy";//坐席忙
    $rootScope.eventSeatIdle = "eventSeatIdle";//坐席闲
    $rootScope.eventThreeTalk = "eventThreeTalk";//三方通话
    $rootScope.eventTrans2Group = "eventTrans2Group";//转其他坐席组
    $rootScope.eventTrans2Seat = "eventTrans2Seat";//转其他坐席
    $rootScope.eventStayCall = "eventStayCall";//保持通话
    $rootScope.eventCancelStayCall = "eventStayCallCancel";//取消保持通话
    $rootScope.eventExitThreeCall = "eventExitThreeCall";//退出三方通话
    $rootScope.eventKillCall = "eventKillCall";//挂机
    $rootScope.eventMakeCall = "eventMakeCall";//呼叫

    $rootScope.eventCallIn = "eventCallIn";//呼入弹屏事件*/
    $rootScope.eventTodoTask = "eventTodoTask";//待办任务事件
}]);
angular.module('com.app.websocket.controller',[]);
angular.module('com.app.websocket.service',[]);
angular.module('com.app.websocket.directive',[]);

//声明：呼叫中心指令作用域对象
//var callCenterDirectiveScope;

angular.module('myApp')
    .config(function($stateProvider,$urlRouterProvider){
        $stateProvider.state('app.websocket',{
            url:'/websocket',
            abstract:true/*,
             template: '<div ui-view class="fade-in-up"></div>'*/
        }).state('app.websocket.manage',{
            url:'/manage',
            templateUrl:'app/module-websocket/tpl/webSocketTest.html'
        });
    });


/**
 * Created by pujjr on 2017/7/26.
 */
angular.module('com.app.block.controller')
    .controller('BlockController',['$scope','$rootScope','TlmsRestangular','$state',function($scope,$rootScope,TlmsRestangular,$state){
        /*$scope.signOut = function(){
            console.log("777777777");
            TlmsRestangular.all('service/signout').post($scope.user)
                .then(function(data){
                    console.log("11");
                    console.log(data);
                    //$rootScope.user.userId = $scope.user.userId;
                    $state.go('signin');
                });
            $state.go('signin');
        };*/
    }]);

/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.callcenter.controller')
    .controller('CallCenterController',['$scope','$rootScope','CallCenterService','$timeout','$interval',function($scope,$rootScope,CallCenterService,$timeout,$interval){
        //tlms_c测试时使用

        $rootScope.account = {};
        $rootScope.account.accountId = '8010';
        $rootScope.account.callcenterExtensionTelephone = '1001';
        $rootScope.account.callcenterLoginPasswd = '123456';
        $rootScope.account.invokeCallcenter = true;//是否加载CallCenter模块;true:显示呼叫中心弹窗并自动签入，false:不显示。
        //定义上送报文
        var sendMsg = {"cmdsn":"","seatno":"","caller":"","para":"","cmd":""};

        eventMsg = {"prefix":"","msg":""};
        console.log("共享controller");
        console.log($scope);

        //电话号码指令初始化
        this.initPhoneIcon = function(){
           var phoneDirectiveScope = this;
            if($rootScope.account.invokeCallcenter == true){
                this.phoneIconShow = "";
            }else{
                this.phoneIconShow = "hide";
            }
            console.log("*********电话指令初始化************");
            console.log(this);
        };
        this.doInit = function(){
            console.log("******************doInit******************");
            directiveScope = this;
            if(!$rootScope.account.invokeCallcenter){
                directiveScope.activeCallCenter = "hide";
                return;
            }
            directiveScope.checkInType = "btn-default";
            directiveScope.checkInName = "坐席签入";
            //连接
            $rootScope.$on($rootScope.eventConnect,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });
            //断开连接
            $rootScope.$on($rootScope.eventDisConnect,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });
            //注册callcenter面板显示事件
            //directiveScope.$on($rootScope.eventShowCallCenter,function(event,param){
            $rootScope.$on($rootScope.eventShowCallCenter,function(event,param){
                //directiveScope.activeCallCenter = 'active';
                $rootScope.activeCallCenter = 'active';
            });
            //注册callcenter面板隐藏事件
            //directiveScope.$on($rootScope.eventHideCallCenter,function(event,param){
            $rootScope.$on($rootScope.eventHideCallCenter,function(event,param){
                $rootScope.activeCallCenter = '';
            });
            //注册刷新状态事件
            $rootScope.$on( $rootScope.eventRefreshStatus,function(event,param){
                $rootScope.$apply(function(){
                    if($rootScope.ccCurrStatus == $rootScope.ccAllStatus.已签入){
                        directiveScope.checkInType = "btn-success";
                        directiveScope.checkInName = "已签入";
                    }
                    if($rootScope.ccCurrStatus == $rootScope.ccAllStatus.未连接){
                        directiveScope.checkInType = "btn-danger";
                        directiveScope.checkInName = "坐席签入";
                    }
                    date = new Date();
                    directiveScope.callCenterStatus =  date.getFullYear()+"-"+date.getMonth()+"-"+date.getDay()+" "+ date.getHours()+":"+date.getMinutes()+":"+date.getSeconds()+" "
                        + param.prefix + ":" + param.msg
                        + "\n"
                        + (directiveScope.callCenterStatus == undefined ? "" : directiveScope.callCenterStatus);
                 });
            });

            $rootScope.$on($rootScope.eventCheckIn,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });

            $rootScope.$on($rootScope.eventCheckOut,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });

            $rootScope.$on($rootScope.eventSeatBusy,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });

            $rootScope.$on($rootScope.eventSeatIdle,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });

            $rootScope.$on($rootScope.eventThreeTalk,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });

            $rootScope.$on($rootScope.eventTrans2Group,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });

            $rootScope.$on($rootScope.eventTrans2Seat,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });

            $rootScope.$on($rootScope.eventStayCall,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });

            $rootScope.$on($rootScope.eventCancelStayCall,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });

            $rootScope.$on($rootScope.eventExitThreeCall,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });

            $rootScope.$on($rootScope.eventKillCall,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });
            $rootScope.$on($rootScope.eventMakeCall,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
            });
            $rootScope.$on($rootScope.eventCallIn,function(event,param){
                $rootScope.$emit($rootScope.eventRefreshStatus,param);
                $rootScope.$emit($rootScope.eventShowCallCenter);
            });

            $rootScope.$on($rootScope.eventPhoneIconClick,function(event,param){
                $rootScope.$emit($rootScope.eventShowCallCenter,{"msg":""});
                directiveScope.inputParam = param.phoneNum;
            });

            $timeout(function(){
                directiveScope.doActiveCallCenter();
                directiveScope.checkIn();
            },1000);
        };

        this.makeCallByClickPhoneNum = function(){
            console.log("**************************makeCallByClickPhoneNum*********************************");
            console.log(this);
            console.log($scope);
            console.log($(this));
            console.log(directiveScope);
            //directiveScope.$emit($rootScope.eventShowCallCenter,{"msg":""});
            $rootScope.$emit($rootScope.eventShowCallCenter,{"msg":""});
            directiveScope.inputParam = this[this['attrName']];

        };

        //签入
        this.checkIn = function(){
            seatno = $rootScope.account.accountId;
            caller = $rootScope.account.callcenterExtensionTelephone;
            callcenterLoginPasswd = $rootScope.account.callcenterLoginPasswd;
            sendMsg.cmdsn = '10001';//交易编码
            sendMsg.seatno = seatno;//坐席号
            sendMsg.para = callcenterLoginPasswd;//密码
            sendMsg.caller = caller;//分机号
            sendMsg.cmd = '1';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.checkIn(sendMsg,eventMsg);
        };
        //签出
        this.checkOut = function(){
            sendMsg.cmdsn = '10002';
            sendMsg.seatno =seatno;
            sendMsg.para = '';
            sendMsg.caller = '';
            sendMsg.cmd = '2';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.checkOut(sendMsg,eventMsg);
        };
        //坐席忙
        this.seatBusy = function(){
            sendMsg.cmdsn = '10005';
            sendMsg.seatno =seatno;
            sendMsg.para = '1';//para 为0 时为示闲，为1-99 都是示忙，各个示忙类型自己定义
            sendMsg.caller = '';
            sendMsg.cmd = '5';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.doSend(sendMsg,eventMsg);
        };
        //坐席闲
        this.seatIdle = function(){
            sendMsg.cmdsn = '10005';
            sendMsg.seatno = seatno;
            sendMsg.para = '0';//para 为0 时为示闲，为1-99 都是示忙，各个示忙类型自己定义
            sendMsg.caller = '';
            sendMsg.cmd = '5';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.doSend(sendMsg,eventMsg);
        };
        //3方通话
        this.threeTalk = function(){
            sendMsg.cmdsn = '10011';
            sendMsg.seatno =seatno;
            sendMsg.para =  directiveScope.inputParam;
            sendMsg.caller = '';
            sendMsg.cmd = '11';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.doSend(sendMsg,eventMsg);
        };
        //转其他坐席组
        this.trans2Group = function(){
            sendMsg.cmdsn = '10009';
            sendMsg.seatno =seatno;
            sendMsg.para =  $scope.inputParam;//其他坐席组编号
            sendMsg.caller = '';
            sendMsg.cmd = '9';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.doSend(sendMsg,eventMsg);
        };
        //转其他坐席
        this.trans2Seat = function(){
            sendMsg.cmdsn = '10012';
            sendMsg.seatno =seatno;
            sendMsg.para =  $scope.inputParam;//其他坐席组编号
            sendMsg.caller = '';
            sendMsg.cmd = '12';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.doSend(sendMsg,eventMsg);
        };

        this.stayCall = function(){
            sendMsg.cmdsn = '10013';
            sendMsg.seatno =seatno;
            sendMsg.para =  '1';//保持通话
            sendMsg.caller = caller;
            sendMsg.cmd = '13';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.doSend(sendMsg,eventMsg);
        };

        this.cancelStayCall = function(){
            sendMsg.cmdsn = '10013';
            sendMsg.seatno =seatno;
            sendMsg.para =  '2';//取消保持通话
            sendMsg.caller = caller;
            sendMsg.cmd = '13';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.doSend(sendMsg,eventMsg);
        };
        /**
         * 退出3方通话
         * 0 坐席退出3 方通话,
         1 拨入时，客服退出3 方通话,
         2 新加入3 方通话的C 用户退出3 方通话.
         3 结束3 方通话:所有人都退出3 方通话挂机.
         */
        this.exitThreeCall = function(){
            sendMsg.cmdsn = '10014';
            sendMsg.seatno =seatno;
            sendMsg.para =  '0';
            sendMsg.caller = caller;
            sendMsg.cmd = '14';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.doSend(sendMsg,eventMsg);
        };
        //挂机
        this.killTalk = function(){
            sendMsg.cmdsn = '10004';
            sendMsg.seatno =seatno;
            sendMsg.para =  $scope.inputParam;
            sendMsg.caller = caller;
            sendMsg.cmd = '4';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.doSend(sendMsg,eventMsg);
        };
        //外呼
        this.makeCall = function(){
            sendMsg.cmdsn = '10003';
            sendMsg.seatno =seatno;
            sendMsg.para =  $scope.inputParam;
            sendMsg.caller = caller;
            sendMsg.cmd = '3';
            eventMsg.prefix = CallCenterService.getTranName(sendMsg.cmdsn);
            CallCenterService.doSend(sendMsg,eventMsg);
        };

        this.doActiveCallCenter = function(){
            if(this.activeCallCenter == 'active'){
                //directiveScope.$emit($rootScope.eventHideCallCenter,{msg:'隐藏callcenter面板'});
                $rootScope.$emit($rootScope.eventHideCallCenter,{msg:'隐藏callcenter面板'});
            }
            else{
                //directiveScope.$emit($rootScope.eventShowCallCenter,{msg:'展开callcenter面板'});
                $rootScope.$emit($rootScope.eventShowCallCenter,{msg:'展开callcenter面板'});
            }
        };
    }]);

/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.callcenter.service')
    .factory('CallCenterService',['$rootScope','$timeout','$interval',function($rootScope,$timeout,$interval){
        //报文发送对象
        var ws = 'null';
        //callcenter status
        $rootScope.ccAllStatus = {'未连接':'01',"已连接":"02","未签入":"03","已签入":"04"};
        //callcenter current status
        $rootScope.ccCurrStatus = $rootScope.ccAllStatus.未连接;

        eventMsg = {"prefix":"","msg":""};

        //根据code获取对应name
        var getNameByCode = function(code,paraArr){
            var name = "无匹配名称";
            for(var i = 0 ; i < paraArr[0].length ; i ++){
                var tempCode = paraArr[0][i];
                //console.log("状态码对比："+"****"+tempCode+"****"+code);
                if(tempCode == code){
                    name = paraArr[1][i];
                    break;
                }
            }
            return name;
        };
        //获取交易按钮名称
        var getTranName = function(cmdsn){
            var tranDef = [['10001','10002','10005','10011','10009','10012','10013','10014','10004','10003'],['坐席签入','坐席签出','坐席忙、坐席闲','三方通话','转其他坐席组','转其他坐席','保持/取消保持通话','退出三方通话','结束通话','拨号']];
            return "【"+getNameByCode(cmdsn,tranDef)+"】";
        };

        //获取服务端返回状态
        var getStateByCode = function(stateCode){
            var stateMsg = "无匹配状态";
            var stateArr = [['0','1','2','3','4','-1','-2','-3','-4','-5','-6','-7','-8','-9','-10','-11','-12','-13','-14','-15'],['操作成功','用户拨入弹屏','外拨用户弹屏','用户或者坐席接通(这个的意图是用来做计时开始)','用户或者坐席挂机(这个的意图是用来作计时停止)','socket断开,需要重新连接','状态错误','坐席工号错误','登录密码错误','未签入上班，无法进行其他操作','被叫号码非法','呼叫没有空闲线路异常','数据库错误','其他未知错误','坐席已在其他浏览器签入,不能从当前浏览器迁出','坐席分机号码没注册不能签入上班,转接弹屏的时候分机在忙','呼叫用户号码失败,可能是没注册上落地网关或者落地网关返回错误.','呼叫缓存区100个都满了.','坐席没分配队列不能签入上班','被转接的坐席不是空闲,无法转接.']];
            console.log("stateCode:"+stateCode);
/*            for(var i = 0 ; i < stateArr[0].length ; i ++){
                var tempState = stateArr[0][i];
                //console.log("状态码对比："+"****"+tempState+"****"+stateCode);
                if(tempState == stateCode){
                    stateMsg = stateArr[1][i];
                    break;
                }
            }*/
            return getNameByCode(stateCode,stateArr);
            //return stateMsg;
        };

        var doSend = function(sendMsg,eventMsg){
            //eventMsg.msg = "消息发送";
            if($rootScope.ccCurrStatus == $rootScope.ccAllStatus.未签入 || $rootScope.ccCurrStatus ==  $rootScope.ccAllStatus.未连接){
                eventMsg.msg = '当前用户未签入';
                $timeout(function(){
                    $rootScope.$emit($rootScope.eventRefreshStatus,eventMsg);
                },10);
            }else{
                console.log('发送服务端:'+JSON.stringify(sendMsg));
                ws.send(JSON.stringify(sendMsg));
            }
        };
        var onError = function(evt){
            //console.log(evt);
        };
        //消息接收
        var onMessage = function(evt){
            rcvMsg = JSON.parse(evt.data);
            console.log("**********接收消息rcvMsg begin*************");
            console.log(rcvMsg);
            console.log("**********接收消息rcvMsg end*************");
            var stateCode = rcvMsg.state;//返回码
            var stateMsg = "";//返回信息
            if(stateCode >= 0){//操作成功，服务端返回成功消息
                var stateMsg = getStateByCode(rcvMsg.state);
                if(stateCode == '1'){//用户拨入弹屏
                    $rootScope.$emit($rootScope.eventCallIn,stateMsg);
                }else{
                    eventMsg.prefix = getTranName(rcvMsg.cmdsn);
                    switch(rcvMsg.cmdsn){
                        case "10001":
                            eventMsg.msg = stateMsg;
                            if(rcvMsg.state == '0'){
                                startheartBeat();
                                $rootScope.ccCurrStatus = $rootScope.ccAllStatus.已签入;
                            }else{
                                $rootScope.ccCurrStatus = $rootScope.ccAllStatus.未签入;
                            }
                            $rootScope.$emit($rootScope.eventCheckIn,eventMsg);
                            break;
                        case "10002":
                            eventMsg.msg = stateMsg;
                            $rootScope.$emit($rootScope.eventCheckOut,eventMsg);
                            if(rcvMsg.state == '0'){
                                $interval.cancel(heartBeatTimer);
                                disCnnnect();
                            }
                            break;
                        case "10005"://设置坐席状态
                            if(rcvMsg.para == 0){
                                eventMsg.prefix = "【坐席闲】";
                                eventMsg.msg = '设置当前坐席状态为：闲';
                                $rootScope.$emit($rootScope.eventSeatIdle,eventMsg);
                            }else{
                                eventMsg.prefix = "【坐席忙】";
                                eventMsg.msg = '设置当前坐席状态为：忙';
                                $rootScope.$emit($rootScope.eventSeatBusy,eventMsg);
                            }
                            break;
                        case "10011"://三方通话
                            eventMsg.msg = stateMsg;
                            $rootScope.$emit($rootScope.eventThreeTalk,eventMsg);
                            break;
                        case "10009"://转其他坐席组
                            eventMsg.msg = stateMsg;
                            $rootScope.$emit($rootScope.eventTrans2Group,eventMsg);
                            break;
                        case "10012"://转其他坐席
                            eventMsg.msg = stateMsg;
                            $rootScope.$emit($rootScope.eventTrans2Seat,eventMsg);
                            break;
                        case "10013"://保持/取消保持通话
                            eventMsg.msg = stateMsg;
                            if(rcvMsg.para == "0"){
                                eventMsg.prefix = "【取消保持通话】";
                                $rootScope.$emit($rootScope.eventCancelStayCall,eventMsg);
                            }else{
                                eventMsg.prefix = "【保持通话】";
                                $rootScope.$emit($rootScope.eventStayCall,eventMsg);
                            }
                            break;
                        case "10014"://退出三方通话
                            eventMsg.msg = stateMsg;
                            $rootScope.$emit($rootScope.eventExitThreeCall,eventMsg);
                            break;
                        case "10004"://结束通话
                            eventMsg.msg = stateMsg;
                            $rootScope.$emit($rootScope.eventKillCall,eventMsg);
                            break;
                        case "10003"://拨号
                            eventMsg.msg = stateMsg;
                            $rootScope.$emit($rootScope.eventMakeCall,eventMsg);
                            break;
                    }
                }
            }else{//操作失败，服务端返回失败消息
                eventMsg.msg = "错误信息:"+getStateByCode(stateCode);
                $rootScope.$emit($rootScope.eventRefreshStatus,eventMsg);
            }
        };

        var onClose = function(evt){
            //console.log($rootScope);
            console.log("关闭链接");
            endHeartBeat();
            if($rootScope.ccCurrStatus == $rootScope.ccAllStatus.未连接){
                eventMsg.msg = '签入失败，无法连接服务器';
            }else{
                eventMsg.msg = '关闭连接成功';
                $rootScope.ccCurrStatus = $rootScope.ccAllStatus.未连接;
            }
            $rootScope.$emit($rootScope.eventDisConnect,eventMsg);
        };

        //连接
        var connnect = function(sendMsg){
            ws = new WebSocket(SERVER_URL.WS_URI);
            //ws = $WebSocket(SERVER_URL.WS_URI);
            ws.onopen = function(evt){
                eventMsg.msg = '连接成功';
                $rootScope.$emit($rootScope.eventConnect,eventMsg);
                $rootScope.ccCurrStatus = $rootScope.ccAllStatus.已连接;
                doSend(sendMsg);
            };
            ws.onclose = function(evt){
                onClose(evt);
            };
            ws.onmessage = function(evt){
                onMessage(evt);
            };
            ws.onerror = function(evt){
                onError(evt);
            };
        };

        //断开链接
        var disCnnnect = function(){
            eventMsg.prefix = "【断开连接】";
            ws.close();
        };

        //坐席签入
        var checkIn = function(sendMsg,eventMsg){
            //eventMsg.prefix = "【坐席签入】";
            if($rootScope.ccCurrStatus == $rootScope.ccAllStatus.已签入){
                $timeout(function(){
                    eventMsg.msg = "已成功签入，请勿重复签入";
                    $rootScope.$emit($rootScope.eventRefreshStatus,eventMsg);
                },10);
            }else{
                $timeout(function(){
                    eventMsg.msg = "坐席签入中，请稍候...";
                    $rootScope.$emit($rootScope.eventRefreshStatus,eventMsg);
                },20);
                connnect(sendMsg);
            }
        };

        //启动呼叫中心心跳检测：web 每10s 发一次心跳数据包， 超过30s 没收到心跳,ivr 将关闭连接
        function startheartBeat(){
            heartBeatTimer = $interval(function(){
                doSend("{}",{});
            },10000);
        };

        //停止呼叫中心心跳检测
        function endHeartBeat(){
            $interval.cancel(heartBeatTimer);
        };

        //坐席签出
        var checkOut = function(sendMsg,eventMsg){
            //eventMsg.prefix = "【坐席签出】";
            doSend(sendMsg,eventMsg);
        };
        return {
            'connect':connnect,
            'disCnnnect':disCnnnect,
            'doSend':doSend,
            'checkIn':checkIn,
            'checkOut':checkOut,
            'getTranName':getTranName
        }
    }]);


/**
 * Created by tom on 2017/7/21.
 * 呼叫中心子级指令，绑定呼叫中心页面所在作用域
 */
angular.module('com.app.callcenter.directive')
    .directive('callCenterDirective',function(){
        return{
            restrict:"EA",
            replace:false,
            scope:{
                activeCallCenter:'=activeCallCenter'//双向数据绑定（采用了绑定策略“=”而非“@”），与指令外的DOM属性some-url值：theirUrl表示的作用域变量相绑定
            },
            templateUrl:'app/module-callcenter/tpl/callcenter.html',
            require:'?^callCenterDirectiveParent',
            link:function(scope,el,attr,ctrl){
                console.log("555555555555555555555555555555555555");
                console.log(ctrl);
                console.log(scope);
                scope.checkIn = ctrl.checkIn;
                scope.checkOut = ctrl.checkOut;
                scope.seatBusy = ctrl.seatBusy;
                scope.seatIdle = ctrl.seatIdle;
                scope.threeTalk = ctrl.threeTalk;
                scope.trans2Group = ctrl.trans2Group;
                scope.trans2Seat = ctrl.trans2Seat;
                scope.stayCall = ctrl.stayCall;
                scope.cancelStayCall = ctrl.cancelStayCall;
                scope.exitThreeCall = ctrl.exitThreeCall;
                scope.killTalk = ctrl.killTalk;
                scope.makeCall = ctrl.makeCall;
                scope.doActiveCallCenter = ctrl.doActiveCallCenter;
                scope.doInit = ctrl.doInit;
                scope.doInit();
            }
        };
    });


/**
 * Created by tom on 2017/7/21.
 * 呼叫中心公共父级指令
 */
angular.module('com.app.callcenter.directive')
    .directive('callCenterDirectiveParent',function(){
        return{
            restrict:"EA",
            //replace:false,
            replace:false,
            scope:{
                //activeCallCenter:'=activeCallCenter',//双向数据绑定（采用了绑定策略“=”而非“@”），与指令外的DOM属性some-url值：theirUrl表示的作用域变量相绑定
                //myLinkText4:'@'
            },
            //templateUrl:'html/module_callcenter/tpl/callcenter.html',
            controller:'CallCenterController'
        };
    });


/**
 * Created by pujjr on 2017/7/31.
 *电话图标指令
 * 用法:
 * <div class="col-sm-8 form-inline">
 <!--<label ng-model="applyInfo.spouse.mobile" require-ng-model="">{{applyInfo.spouse.mobile}}</label>-->
 <input type="text" class="form-control" ng-disabled="editable==false" minlength="11" maxlength="11"  verify-mobile ng-model="applyInfo.spouse.mobile" ng-required="requiredMap.spouse_mobile" require-ng-model="">
 </div>
 */

angular.module('com.app.callcenter.directive')
    .directive('phoneIconDirective',['$compile','$rootScope',function($compile,$rootScope){
        return {
            restrict:'A',
            require:'ngModel',
            link:function(scope,el,attr,ngModelController){
                console.log("************phoneIconDirective*****************");
                console.log(scope);
                var mobileIcon='<label>&nbsp;&nbsp;<i  class="fa fa-phone-square fa-xs phone-cls {{mobileIcon}} " ng-click="makeCallByClickPhoneNum($event,value)" ></i></label>';
                var template = angular.element(mobileIcon);
                var mobileElement = $compile(mobileIcon)(scope);
                $rootScope.account.invokeCallcenter = true;
                if( $rootScope.account.invokeCallcenter == true){
                    scope.mobileIcon = 'callcenter-phone-icon';
                    el.after(mobileElement);
                }
                scope.makeCallByClickPhoneNum = function($event,value){
                    console.log($('#phoneIconLabel'));
                    console.log($('#phoneIconLabel~input:first'));
                    console.log(this);
                    console.log(scope);
                    console.log(angular.element());
                    console.log($event);
                    console.log(value);
                    console.log($($event.target).parent().prev());
                    console.log($($event.target).parent().prev()[0]);
                    console.log($($event.target).parent().prev()[0].localName);
                    console.log($($event.target).parent().prev().localName);
                    console.log($($event.target).parent().prev().val());
                    var nodeType = $($event.target).parent().prev()[0].localName;
                    var phoneNum = "";
                    if(nodeType == 'input'){
                        phoneNum = $($event.target).parent().prev().val();
                    }else{
                        phoneNum = $($event.target).parent().prev().html();
                    }

                    $rootScope.$emit($rootScope.eventPhoneIconClick,{"phoneNum":phoneNum});
                };
                //监控变量值改变
                ngModelController.$validators.requireNgModel = function(modelVal){
                    console.log(modelVal);
                    scope.phoneNum = modelVal;
                };
            }
        };
    }]);

/**
 * Created by tom on 2017/7/25.
 * 好觉中心子级作用域，绑定电话号码显示页面作用域。
 * 点击电话号码右侧图标，激活右侧呼叫中心面板
 * 指令使用方法：
 *
 * 方法一：节点属性方式使用指令
 *  <div call-center-directive-parent>
 *      <div phone-num-directive attr-name="phoneNum"  phone-num="tenantPhone">
 *          {{tenantPhone}}
 *      </div>
 *  </div>
 *方法二：节点名称方式使用指令
 *  <div call-center-directive-parent>
 *      <div phone-num-directive attr-name="phoneNum" phone-num="phoneNum">
 *          {{phoneNum}}
 *      </div>
 *  </div>
 */
angular.module('com.app.callcenter.directive')
    .directive('phoneNumDirective',function(){
      return {
           restrict:"EA",
           scope:{
               attrName:'@',
               phoneNum:'=phoneNum'//双向数据绑定（采用了绑定策略“=”而非“@”），与指令外的DOM属性phone-num值：phoneNum表示的作用域变量相绑定
           },
           replace:false,
           //transclude:true,
           //templateUrl:'html/module_callcenter/tpl/phone.tpl.html',
          template:'<label>666666666666</label>',
           require:'?^callCenterDirectiveParent',
           link:function(scope,el,attr,ctrl){
               scope.makeCallByClickPhoneNum = ctrl.makeCallByClickPhoneNum;
               scope.doActiveCallCenter = ctrl.doActiveCallCenter;
               scope.initPhoneIcon = ctrl.initPhoneIcon;
               scope.initPhoneIcon();
           },
          controller:'UserController'
       };
    });


/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.user.controller.UserController',[])
    .controller('UserController',['$scope','$rootScope',function($scope,$rootScope){
        $scope.showCallCenter = function(){
            console.log("UserController");
            $rootScope.$emit($rootScope.eventShowCallCenter,{msg:'展开callcenter面板'});
        };
        $scope.hideCallCenter = function(){
            $rootScope.$emit($rootScope.eventHideCallCenter,{msg:'隐藏callcenter面板'});
        };
        $scope.getFormData = function(){
          console.log($scope.userName);
        };
        this.myLinkTest = function(){
            alert("myLinkTest");
            console.log($(this));
        };

    }]);

/**
 * Created by Administrator on 2017/7/21.
 */
angular.module('com.app.user.directive')
    .directive('myDirective4',function(){
        return{
            restrict:"EA",
            replace:true,
            scope:{
                myUrl4:'=someUrl'//双向数据绑定（采用了绑定策略“=”而非“@”），与指令外的DOM属性some-url值：theirUrl表示的作用域变量相绑定
                //myLinkText4:'@'
            },
            /*template:'指令内：输入需要跳转到地址(指令内)(指令内输入，同时同步外部信息【p55页内容】)<input type="text" ng-model="myUrl4"/>' +
            '<a href="{{myLinkText4}}">{{myLinkText4}}</a>' +
            '<button type="button" ng-click="getData()">点击获取指令模板表单值表单值</button>',*/
            //templateUrl:'html/module_user/tpl/myDirective4.tpl.html',
            /*controller:function($scope){
                $scope.getData = function(){
                    console.log($scope.myUrl4);
                };
            }*/
            controller:'UserController'
        };
       /* return {
            restrict: 'EA',
            scope:{},
            controller: function() {
                // this.data = ['1', '2', '3', '4', '5'];
                data = ['1', '2', '3', '4', '5'];
                this.click = function() {
                    data.pop();
                    console.log(data);
                };
                this.myLinkTest = function(){
                    alert("myLinkTest");
                    console.log($(this));
                };
                this.sonClick = function(){
                    alert("sonClick");
                    console.log($(this));
                };


            },
            link: function(scope, elem, attrs) {
                scope.name = '123';
            },
            template: '<span>{{name}}<div ng-transclude></div></span>',
            replace: true,
            transclude: true
        };*/
    });


/**
 * Created by pujjr on 2017/10/12.
 */
angular.module('com.app.uibootstraop.controller',[
    'ngAnimate', 'ngTouch', 'ui.bootstrap'
])
    .controller('UiBootstrapController',function($scope,$window){
        //折叠控件测试
        $scope.isNavCollapsed = true;
        $scope.isCollapsed = false;
        $scope.isCollapsedHorizontal = false;

        //日期控件
        $scope.today = function() {
            $scope.dt = new Date();
        };
        $scope.today();

        $scope.clear = function() {
            $scope.dt = null;
        };

        $scope.inlineOptions = {
            customClass: getDayClass,
            minDate: new Date(),
            showWeeks: true
        };

        $scope.dateOptions = {
            dateDisabled: disabled,
            formatYear: 'yy',
            maxDate: new Date(2020, 5, 22),
            minDate: new Date(),
            startingDay: 1
        };

        // Disable weekend selection
        function disabled(data) {
            var date = data.date,
                mode = data.mode;
            return mode === 'day' && (date.getDay() === 0 || date.getDay() === 6);
        }

        $scope.toggleMin = function() {
            $scope.inlineOptions.minDate = $scope.inlineOptions.minDate ? null : new Date();
            $scope.dateOptions.minDate = $scope.inlineOptions.minDate;
        };

        $scope.toggleMin();

        $scope.open1 = function() {
            $scope.popup1.opened = true;
        };

        $scope.open2 = function() {
            $scope.popup2.opened = true;
        };

        $scope.setDate = function(year, month, day) {
            $scope.dt = new Date(year, month, day);
        };

        $scope.formats = ['dd-MMMM-yyyy', 'yyyy/MM/dd', 'dd.MM.yyyy', 'shortDate'];
        $scope.format = $scope.formats[0];
        $scope.altInputFormats = ['M!/d!/yyyy'];

        $scope.popup1 = {
            opened: false
        };

        $scope.popup2 = {
            opened: false
        };

        var tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        var afterTomorrow = new Date();
        afterTomorrow.setDate(tomorrow.getDate() + 1);
        $scope.events = [
            {
                date: tomorrow,
                status: 'full'
            },
            {
                date: afterTomorrow,
                status: 'partially'
            }
        ];

        function getDayClass(data) {
            var date = data.date,
                mode = data.mode;
            if (mode === 'day') {
                var dayToCheck = new Date(date).setHours(0,0,0,0);

                for (var i = 0; i < $scope.events.length; i++) {
                    var currentDay = new Date($scope.events[i].date).setHours(0,0,0,0);

                    if (dayToCheck === currentDay) {
                        return $scope.events[i].status;
                    }
                }
            }

            return '';
        }


    });

/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.service.OrgService',[])
    .factory('OrgService',['$q',function($q){

    }]);

/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.org.controller.OrgController',[])
    .controller('OrgController',['$scope',function($scope){

    }]);

/**
 * Created by pujjr on 2017/9/21.
 */
angular.module('com.tlms.sys.controller',[])
    .controller('CookieController',['CookieService',function(CookieService){

    }]);

/**
 * Created by pujjr on 2017/9/21.
 */
angular.module('com.tlms.sys.service',[
    'ngCookies'
])
    .factory('CookieService',['$cookieStore',function($cookieStore){
        var setCookie = function(name,value){
            //console.log('setCookie,name='+name+",value="+value);
            //$cookieStore.put('userName','brighttang');
            $cookieStore.put(name,value);

          /*  var date = new Date();
            console.log(date.getTime());
            date.setTime(date.getTime() + 5000);
            var expireTime = date.getTime();
            setCookie("userId","200810405234",expireTime);*/
        };

        var getCookie = function(name){
            return $cookieStore.get(name);
        };
        return {
            'setCookie':setCookie,
            'getCookie':getCookie
        };
    }]);
/**
 * Created by pujjr on 2017/9/21.
 */
angular.module('com.tlms.sys.service')
    .factory('StorageService',function(){
        var setStorage = function(name,value){
            console.log(name);
            console.log(value);
            try{
                window.localStorage[name] = JSON.stringify(value);
            }catch(e){
                window.localStorage[name] = value;
            }

            //window.localStorage.a = 3;
        };

        var getStorage = function(name){
            var ret;
            try{
                ret = JSON.parse(window.localStorage[name]);
            }catch(e){
                ret = window.localStorage[name];
            }
            console.log('ret:'+ret);
            return  ret;
        };

        var clearStorage = function(name){
            window.localStorage.clear();
        };

        return {
            'setStorage':setStorage,
            'getStorage':getStorage
        };
    });
/**
 * Created by pujjr on 2017/7/26.
 */
angular.module('com.app.process.controller')
    .controller('ProcessController',['$scope','$rootScope','TlmsRestangular','$state','StorageService',function($scope,$rootScope,TlmsRestangular,$state,StorageService){
        //$scope.process = {};
        //$rootScope.process = {processInstId:"11"};
        $scope.deployProcess = function(){
            TlmsRestangular.one('process/deploy').get()
                .then(function(data){
                });
        };

        $scope.deleteProcessDefCascade = function(pdid){
            TlmsRestangular.one('process/def/cascade',pdid).remove()
                .then(function(data){
                });
        };

        $scope.deleteProcessDef = function(pdid){
            TlmsRestangular.one('process/def',pdid).remove()
                .then(function(data){
                });
        };


        $scope.startProcessByKey = function(key){
            console.log($scope);
            TlmsRestangular.one('process/start',key).get()
                .then(function(data){
                });
        };

        $scope.queryProcess = function(){
            TlmsRestangular.one('process/query').getList()
                .then(function(records){
                    console.log(records);
                    $scope.records = records;
                });
        };
        $scope.querySpecialProc = function(){
            TlmsRestangular.one('process/query',$scope.bysiKey).one($scope.pdKey).getList()
                .then(function(records){
                    console.log(records);
                    $scope.records = records;
                });
        };
        $scope.queryDefineProcess = function(){
            TlmsRestangular.one('process/query/def').getList()
                .then(function(records){
                    $scope.records = records;
                });
        };


       /* $scope.readDgrmResource = function(processInstId){
            //$scope.process.processInstId = processInstId;
            //$scope.process.resourceType = 'dgrmResource';
            $scope.process = StorageService.getStorage('process');
            $state.go("app.process.query.dgrmResource");
        };*/
        $scope.readResource = function(){
            var procInstId = StorageService.getStorage('procInstId')+"";
            window.open("http://localhost:8090/tlms-web/source/"+procInstId+"/resource");
        };

        /**
         * 当前任务查询
         */
        TlmsRestangular.one('process/task').getList()
            .then(function(records){
                console.log(records);
                //$scope.records = records;
                $rootScope.records = records;
                console.log('当前任务查询');
                console.log($rootScope);
            });
        $scope.queryCurrProcess = function(){
           /* TlmsRestangular.one('process/task').getList()
                .then(function(records){
                    console.log(records);
                    //$scope.records = records;
                    $rootScope.records = records;
                    console.log('当前任务查询');
                    console.log($scope);
                });*/
        };

        /*$scope.readCurrDgrmResource = function(processInstId){
            console.log('跳转流程图状态');
            $scope.process.processInstId = processInstId;
            $scope.process.resourceType = 'dgrmResource';
            StorageService.setStorage("process",$scope.process);
            $state.go("app.process.task.dgrmResource");
        };*/

        $scope.readDgrmResource = function(){
            //$scope.process.processInstId = processInstId;
            //$scope.process.processInstId = $rootScope.process.processInstId;
            $scope.process = {};
            var procInstId =StorageService.getStorage('procInstId')+"";
            $scope.process.processInstId = procInstId;
            $scope.process.resourceType = 'dgrmResource';
            console.log($rootScope);
            console.log($scope);

            /**
             * 流程图模板页面显示流程图
             * @type {string}
             */
            $scope.dgrmSrc = 'http://localhost:8090/tlms-web/source/'+procInstId+'/dgrmResource?uuid='+new Date();
            $state.go("app.process.detail.dgrmResource");
            /**
             * diagram view 显示流程图
             */

            window.open('html/diagramviewer/showDiagramViewer.html');
        };



       /* $scope.queryProcessDetailCommon = function(processInstId){
            console.log('点击查询明细(全流程监控)');
            console.log(processInstId);
            console.log($scope);
            //$rootScope.process = {processInstId:processInstId};
            //$scope.process.processInstId = processInstId;
            StorageService.setStorage("procInstId",processInstId);
            console.log($rootScope);
            $state.go("app.process.detail");
        };*/

        $scope.queryProcessDetail = function(procInstId,pdid){
            console.log('点击查询明细');
            console.log(procInstId);
            console.log($scope);

            //$rootScope.process = {processInstId:procInstId};
            //$scope.process.procInstId = procInstId;
            StorageService.setStorage("procInstId",procInstId);
            StorageService.setStorage("pdid",pdid);
            console.log($rootScope);
            $state.go("app.process.detail");
        };

        $scope.goBack = function(){
            console.log('返回');
            console.log($scope);
            window.history.back();
        };




        /**
         * 审批操作
         */
        $scope.agree = function(){
            TlmsRestangular.one('process/agree', StorageService.getStorage('procInstId')).post()
                .then(function(records){
                });
        };
        $scope.reject = function(){
            TlmsRestangular.one('process/reject', StorageService.getStorage('procInstId')).post()
                .then(function(records){
                });
        };

    }]);

/**
 * Created by pujjr on 2017/7/26.
 */
angular.module('com.app.process.controller')
    .controller('ProcessModelController',['$scope','$rootScope','TlmsRestangular','$state','StorageService',function($scope,$rootScope,TlmsRestangular,$state,StorageService){

        $scope.queryModel = function(){
            TlmsRestangular.one('process/model').getList()
                .then(function(records){
                   $scope.models = records;
                });
        };
        $scope.editModel = function(modelId){
            window.open("http://localhost:8090/tlms-web/modeler.html?modelId="+modelId);
            /*TlmsRestangular.one('proces/model',modelId).post()
                .then(function(){
                });*/
        };

        $scope.deployModel = function(modelId){
            TlmsRestangular.one('process/model/deploy',modelId).post()
                .then(function(){
                });
        };

        $scope.deleteModel = function(modelId){
            TlmsRestangular.one('process/model',modelId).remove()
                .then(function(){
                    $scope.queryModel();
                });
        };

        $scope.designProcess = function(){
            console.log($scope);
            TlmsRestangular.one('process/design').get()
                .then(function(data){
                    $scope.queryModel();
                });
        };

/*
        $scope.deployProcess = function(){
            TlmsRestangular.one('process/deploy').get()
                .then(function(data){
                });
        };
        $scope.deleteProcess = function(){
            TlmsRestangular.one('process/delete').get()
                .then(function(data){
                });
        };
        $scope.startProcess = function(){
            console.log($scope);
            TlmsRestangular.one('process/start',$scope.processId).get()
                .then(function(data){
                });
        };
        $scope.designProcess = function(){
            console.log($scope);
            TlmsRestangular.one('process/design').get()
                .then(function(data){
                });
        };


        $scope.queryProcess = function(){
            TlmsRestangular.one('process/query').getList()
                .then(function(records){
                    console.log(records);
                    $scope.records = records;
                });
        };
        $scope.querySpecialProc = function(){
            TlmsRestangular.one('process/query',$scope.bysiKey).one($scope.pdKey).getList()
                .then(function(records){
                    console.log(records);
                    $scope.records = records;
                });
        };
        $scope.readResource = function(){
            var procInstId = StorageService.getStorage('procInstId')+"";
            window.open("http://localhost:8090/tlms-web/process/source/"+procInstId+"/resource");
        };

        /!**
         * 当前任务查询
         *!/
       /!* TlmsRestangular.one('process/task').getList()
            .then(function(records){
                console.log(records);
                //$scope.records = records;
                $rootScope.records = records;
                console.log('当前任务查询');
                console.log($rootScope);
            });*!/
        $scope.queryCurrProcess = function(){
        };

        $scope.readDgrmResource = function(){
            //$scope.process.processInstId = processInstId;
            //$scope.process.processInstId = $rootScope.process.processInstId;
            $scope.process = {};
            var procInstId =StorageService.getStorage('procInstId')+"";
            $scope.process.processInstId = procInstId;
            $scope.process.resourceType = 'dgrmResource';
            console.log($rootScope);
            console.log($scope);

            /!**
             * 流程图模板页面显示流程图
             * @type {string}
             *!/
            $scope.dgrmSrc = 'http://localhost:8090/tlms-web/process/source/'+procInstId+'/dgrmResource?uuid='+new Date();
            $state.go("app.process.detail.dgrmResource");
            /!**
             * diagram view 显示流程图
             *!/

            window.open('html/diagramviewer/showDiagramViewer.html');
        };


        $scope.queryProcessDetail = function(procInstId,pdid){
            console.log('点击查询明细');
            console.log(procInstId);
            console.log($scope);

            //$rootScope.process = {processInstId:procInstId};
            //$scope.process.procInstId = procInstId;
            StorageService.setStorage("procInstId",procInstId);
            StorageService.setStorage("pdid",pdid);
            console.log($rootScope);
            $state.go("app.process.detail");
        };*/

        $scope.goBack = function(){
            console.log('返回');
            console.log($scope);
            window.history.back();
        };
    }]);

/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.process.service',[])
    .factory('ProcessService',['$q','TlmsRestAngular',function($q,TlmsRestAngular){

    }]);

/**
 * Created by pujjr on 2017/7/25.
 */
angular.module('com.app.callcenter.controller')
    .controller('MyLinkController',['$scope',function($scope){
        var myLinkTest = function(){
            alert("myLinkTest");
        };
    }]);

/**
 * Created by pujjr on 2017/7/26.
 */
angular.module('com.app.user.controller')
    .controller('UserController',['$scope','$rootScope','TlmsRestangular','$state','CookieService','StorageService',function($scope,$rootScope,TlmsRestangular,$state,CookieService,StorageService){

        console.log("*****UserController*****");
        console.log($rootScope);
        console.log(StorageService.getStorage("user"));
        if( StorageService.getStorage("user") != null  && StorageService.getStorage("user") != 'user')
            $rootScope.user = StorageService.getStorage("user");
        else{
            //StorageService.clearStorage();
        }
        //$rootScope.user = CookieService.getCookie('user');
        $scope.signIn = function(){
            console.log($scope.user);
            TlmsRestangular.all('user/signin').post($scope.user)
                .then(function(data){
                    //StorageService.clearStorage();
                    CookieService.setCookie('user',$scope.user);
                    StorageService.setStorage('user',$scope.user);
                    $rootScope.user = {};
                    $rootScope.user.userId = "200810405234";
                    console.log("用户登录");
                    console.log(data);
                    console.log($scope);
                    console.log($scope.user);
                    console.log($scope.user.userId);
                    var userId = $scope.user.userId + '';
                    $rootScope.user.userId = $scope.user.userId;
                    console.log($rootScope);
                    $rootScope.user.userId = userId;
                    console.log($rootScope);
                    $state.go('app');
                });
        };

        $scope.signOut = function(){
            /*TlmsRestangular.all('service/signout').post($scope.user)
                .then(function(data){
                    console.log("用户登出");
                    $state.go('signin');
                });*/
            $state.go('signin');
        };


        /*console.log("**************UserController*****************");
        console.log($scope);
        var globalParam = "";//全局变量测试
        $scope.extendTest = '集成测试（UserController初始化数据）';
        $scope.applyPhone = "1111111";
        $scope.applyPhone2 = "22222222222";
        $scope.showCallCenter = function(){
            globalParam = '全局变量测试';
            console.log("doActiveCallCenter："+globalParam);
            $rootScope.$emit($rootScope.eventShowCallCenter,{"msg":""});
        };
        $scope.hideCallCenter = function(){
            console.log("doActiveCallCenter:"+globalParam);
            $rootScope.$emit($rootScope.eventHideCallCenter,{"msg":""});
        };

        var userList =  TlmsRestangular.all('user').getList();
        console.log("UserService");
        console.log(userList);*/
    }]);

/**
 * Created by pujjr on 2017/7/26.
 */
angular.module('com.app.user.controller')
    .controller('UserController2',['$scope','$rootScope','TlmsRestangular','CookieService',function($scope,$rootScope,TlmsRestangular,CookieService){
        console.log("**************UserController*****************");
        var globalParam = "";//全局变量测试
        //var userList =  TlmsRestangular.all('user').getList();
       /* TlmsRestangular.all('user').get({})
            .then(function(data){
                console.log(JSON.stringify(data));
            });
        TlmsRestangular.all('user').get({'id':'2008'})
            .then(function(data){
                console.log(JSON.stringify(data));
            });
        TlmsRestangular.one('user').get({'id':'2008'})
            .then(function(data){
                console.log(JSON.stringify(data));
            });*/

        /*
        var userList = TlmsRestangular.one('user').getList()
            .then(function(data){
                console.log(JSON.stringify(data[0]));
            });
        //console.log(userList);
        var user = TlmsRestangular.one('user','2008').get()
            .then(function(data){
                console.log(JSON.stringify(data));
            });
*/
        /**
         * get 测试开始
         */
        $scope.allGet = function(){
            TlmsRestangular.allUrl('http://baidu.com');
            var baseAccounts = TlmsRestangular.all('service/user');
            baseAccounts.getList().then(function(accounts){
                $scope.allAccounts = accounts;
                console.log(accounts);
                for(var i = 0 ; i <  accounts.length ; i ++){
                    console.log(accounts[i]);
                    console.log(JSON.stringify(accounts[i]));
                }
            });
        };
        $scope.oneGet = function(){
            //TlmsRestangular.one('user','123').get()
            /*
            * user和/user效果相同
            * */
            TlmsRestangular.one('service/user','123').get()
                .then(function(account){
                    console.log(account);
                    console.log(JSON.stringify(account));
                });
        };

        $scope.oneGet2 = function(){
            //TlmsRestangular.one('user','123').get()
            /*
             * user和/user效果相同
             */
            TlmsRestangular.one('service/user/v1','123').get()
                .then(function(account){
                    console.log(account);
                    console.log(JSON.stringify(account));
                });
        };

        $scope.oneGet3 = function(){
            TlmsRestangular.one('service/user/v2').get({'id':'123','userId':'200810405234'})
                .then(function(account){
                    console.log(account);
                    console.log(JSON.stringify(account));
                });
        };

        $scope.oneGet4 = function(){
            TlmsRestangular.one('service/user/v3','123').one('456').get()
                .then(function(account){
                    console.log(account);
                    console.log(JSON.stringify(account));
                });
        };
        $scope.oneGet5 = function(){
            TlmsRestangular.one('service/user/v4','123').one('name','456').get()
                .then(function(account){
                    console.log(account);
                    console.log(JSON.stringify(account));
                });
        };

        $scope.oneGet6 = function(){
            TlmsRestangular.all('service/user/v3').one('456').one('789').get()
                .then(function(account){
                    console.log(account);
                    console.log(JSON.stringify(account));
                });
        };

        $scope.oneGet7 = function(){
            TlmsRestangular.all('service/user/v5').one('456').one('name','789').getList()
                .then(function(accounts){
                    console.log(accounts);
                    console.log(JSON.stringify(accounts));
                });
        };


        /**
         * post 测试开始
         */
        $scope.allPost = function(){
            TlmsRestangular.all('service/user').post({"userId":"2008","userName":"唐"})
                .then(function(data){
                    console.log('发送成功');
                });
        };

        /**
         * 用户登录
         */
        $scope.userLogin = function(){
            CookieService.setCookie('userName','brighttang');
            TlmsRestangular.one('login').one('userLogin').post()
                .then(function(data){
                    console.log(data);
                });
        };

        $scope.doTrans = function(){
            TlmsRestangular.one('login').one('doTrans').post()
                .then(function(data){
                    console.log(data);
                });
        };
    }]);

/**
 * Created by pujjr on 2017/7/25.
 */
angular.module('com.app.user.directive')
    .directive('myLink2',function(){
      return {
           restrict:"EA",
           scope:{
               myUrl4:'=someUrl',//双向数据绑定（采用了绑定策略“=”而非“@”），与指令外的DOM属性some-url值：theirUrl表示的作用域变量相绑定
               //myLinkText4:'@',
               attrName:'@',
               phoneNum:'=phoneNum'
           },
           replace:false,
           transclude:true,
           templateUrl:'html/module_user/tpl/myLink.html',
           //require:'?^myDirective4',
           require:'?^callCenterDirectiveParent',
           link:function(scope,el,attr,ctrl){
               console.log("*************8888888888888888888888888888888888888888***************");
               console.log(scope);
               console.log(ctrl);
               //scope.phoneNum = "18723290701";
               scope.myLinkTest = ctrl.myLinkTest;
               scope.doActiveCallCenter = ctrl.doActiveCallCenter;
           },
           /*controller:function($scope){
               //$scope.item = {};
               $scope.myLinkTest2 = function(){
                   alert("myLinkTest");
                   console.log($scope);
                   console.log($(this));
                   //sonClick();
               };
           }*/
          controller:'UserController'
       };
    });

var myapp = angular.module('com.app.user.directive');

myapp.controller("MyController", ['$scope', function($scope) {
    $scope.name = "mario";
    $scope.age = "13";
    $scope.send = function() {
        console.log('.............');
    };
}]);
myapp.directive("parent", function() {
    return {
        restrict: 'EA',
        scope:{},
        controller: function() {
            // this.data = ['1', '2', '3', '4', '5'];
            data = ['1', '2', '3', '4', '5'];
            this.click = function() {
                data.pop();
                console.log(data);
            };
            this.myLinkTest2 = function(){
                alert("myLinkTest");
                console.log($(this));
            };
            this.myLinkTest = function(){
                alert("myLinkTest");
                console.log($(this));
            };

        },
        link: function(scope, elem, attrs) {
            scope.name = '123';
        },
        template: '<span>{{name}}<div ng-transclude></div></span>',
        replace: true,
        transclude: true
    };
});
myapp.directive("son", function() {
    return {
        restrict: 'EA',
        repalce: true,
        require: '^?parent',
        template: '<div ng-click="sonClick()">sonClick</div>',
        link: function(scope, elem, atts, ctrl) {
            console.log("ttttttttttttttttttttttttttttttttttttttt");
            console.log(ctrl);
            scope.sonClick = ctrl.click;
            // tmp = ctrl.data;
            // console.log(tmp);
            // ctrl.data.pop();
        }
    };
});
myapp.directive("daughter", function() {
    return {
        restrict: 'EA',
        repalce: true,
        require: '^?parent',
        template: '<div ng-click="daughterClick()">daughterClick</div>',
        link: function(scope, elem, atts, ctrl) {
            console.log(ctrl);
            scope.daughterClick = ctrl.click;
            // tmp = ctrl.data;
            // console.log(tmp);
        }
    };
});

/**
 * Created by pujjr on 2017/7/31.
 */
angular.module('com.app.user.directive')
    .directive('requireNgModel',['$compile',function($compile){
        return {
            restrict:'A',
            require:'ngModel',
            link:function(scope,el,attr,ngModelController){
                console.log("***********requireNgModel***********");
                console.log(scope);
                console.log(ngModelController);
                var mobileIcon='<label>&nbsp;<i class="fa fa-phone-square fa-xs phone-cls" ng-click="makeCallByClickPhoneNum()" ></i></label>';
                var template = angular.element(mobileIcon);
                var mobileElement = $compile(mobileIcon)(scope);
                //angular.element("#"+scope.id).after(mobileElement);
                el.after(mobileElement);

                scope.makeCallByClickPhoneNum = function(){
                    console.log("获取输入框值："+scope.applyPhone);
                    scope.applyPhone = "test";
                };

                ngModelController.$validators.requireNgModel = function(modelVal){
                    console.log(modelVal);
                };
            }
        };
    }]);

/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.user.service.UserService',[])
    .factory('UserService',['$q','TlmsRestAngular',function($q,TlmsRestAngular){

    }]);

/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.websocket.controller')
    .controller('WebsocketController',['$scope','$rootScope','$timeout','$interval','PujjrPushRestangular','WebsocketService','$interval','$log',function($scope,$rootScope,$timeout,$interval,PujjrPushRestangular,WebsocketService,$interval,$log){

        //*****************单机测试使用*********开始*************
        $rootScope.account = {};
        $rootScope.account.accountId = '8020';
        $rootScope.account.callcenterExtensionTelephone = '1001';
        $rootScope.account.callcenterLoginPasswd = '123456';
        $rootScope.account.invokeCallcenter = true;//是否加载CallCenter模块;true:显示呼叫中心弹窗并自动签入，false:不显示。
        //*****************单机测试使用*********结束*************
        //上送报文
        $scope.sendMsg = {"tranCode":"","accountId":"","passwd":"","heartBeatTime":"","msg":"","msgId":"","list":[]};
        //返回报文
        $scope.recvMsg = {"tranCode":"","accountId":"","passwd":"","heartBeatTime":"","msg":"","msgId":"","state":"","list":[]};
        //心跳检测频率
        $scope.heartBeatFreq = 20000;
        //接收消息队列扫描频率
        $scope.recvMsgScanFreq = 1000;
        //网络连接状态扫描频率
        $scope.netStatusScanFreq = 3000;
        //网络连接状态
        $scope.netStatus = '';
        //用户登录状态
        $scope.loginStatus = '';

        $rootScope.$on($rootScope.eventTodoTask,function(event,param){
            console.log("待办任务收到事件");
            console.log(param);
        });
        /**
         * 开发发送心跳检测
         * 心跳频率：20s
         */
        $scope.startHeartbeat = function(){
            //WebsocketService.doSend(sendMsg);
            $scope.heartBeatInterval = $interval(function(){
                var sendMsg ={"tranCode":"","accountId":"","passwd":"","heartBeatTime":"","list":[]};
                sendMsg.tranCode = '1002';
                sendMsg.accountId = $rootScope.account.accountId;
                sendMsg.heartBeatTime = $scope.recvMsg.heartBeatTime;
                //console.log("发送心跳检测:"+JSON.stringify(sendMsg));
                WebsocketService.doSend(sendMsg);
            },$scope.heartBeatFreq);
        };

        /**
         * 停止发送心跳检测
         */
        $scope.stopHeartbeat = function(){
            console.log("停止心跳检测");
            $interval.cancel($scope.heartBeatInterval);
        };

        /**
         * websocket消息队列扫描
         * 扫描频率：1s
         */
        $scope.receiveMsgScan = function(){
            var inter =  $interval(function(){
                //$log.log("**********websocket返回消息扫描*************");
                var results = WebsocketService.getResults();
                popResult = {};
                if(results.length > 0){
                    var rcvMsg = results.pop();
                    popResult = JSON.parse(rcvMsg);
                    console.log("获取返回报文："+rcvMsg);
                }
                //更新心跳时间
                if(popResult.heartBeatTime > 0){
                    $scope.recvMsg.heartBeatTime = popResult.heartBeatTime;
                    $scope.sendMsg.heartBeatTime = popResult.heartBeatTime;
                }
                $scope.recvMsg.state = popResult.state;//消息状态
                switch(popResult.tranCode){
                    case "1001"://成功连接返回
                        //启动心跳
                        $scope.startHeartbeat();
                        //签入
                        $scope.signIn();
                        break;
                    case '1002'://返回心跳报文
                        if(popResult.state == "01"){//坐席未签入
                            $scope.signIn();
                        }
                        break;
                    case '1003'://签入返回
                        $scope.loginStatus = '签入成功';
                        break;
                    case '1004'://用户签出
                        break;
                    case '1005'://待办任务
                        /**
                         * 待办任务业务逻辑处理
                         */
                        //////////////////////////////////////////////////
                        //$scope.recvMsg.msg = popResult.msg;
                        $scope.sendMsg.msgId = popResult.msgId;
                        console.log( $scope.sendMsg);
                        $rootScope.$emit($rootScope.eventTodoTask,popResult);
                        /**
                         * 发送待办任务接收回执
                         */
                        $scope.sendMsg.tranCode = '1005';
                        $scope.sendMsg.msg = "待办任务接收成功";
                        WebsocketService.doSend($scope.sendMsg);

                        break;
                }
            },$scope.recvMsgScanFreq);
        };
        /**
         * 网络监控扫描
         * 扫描频率
         */
        $scope.netStatusScan = function(){
            $interval(function(){
                console.log("当前连接状态（0:connecting;1:open;2:closing;3:closed）:"+WebsocketService.getWsStatus());
                $scope.netStatus = WebsocketService.getWsStatus();
                if(WebsocketService.getWsStatus() == undefined){
                    console.log("网络初始化连接");
                    $scope.stopHeartbeat();
                    WebsocketService.wsConnect();
                }else if(WebsocketService.getWsStatus() == '0'){
                    console.log("网络连接中...");
                }else if(WebsocketService.getWsStatus() == '1'){
                    console.log("网络已连接");
                }else if(WebsocketService.getWsStatus() == '2'){
                    console.log("网络断开连接中...");
                }else if(WebsocketService.getWsStatus() == '3'){
                    console.log("网络已断开连接");
                    $scope.stopHeartbeat();
                    WebsocketService.wsConnect();
                }
            },$scope.netStatusScanFreq);
        };
        //启动websocket消息队列扫描
        $scope.receiveMsgScan();
        //网络扫描
        $scope.netStatusScan();

        /********************************
         * *********以下测试区域***************
         ********************************/
        $scope.signIn = function(){
            $scope.sendMsg.tranCode = "1003";
            $scope.sendMsg.accountId = $rootScope.account.accountId;
            $scope.sendMsg.passwd = '123456';
            WebsocketService.doSend($scope.sendMsg);
        };
        /**
         * 创建连接
         */
      /*  $scope.wsConnect = function(){
            WebsocketService.wsConnect();
        };*/
        /**
         * 断开连接
         */
       /* $scope.wsClose = function(){
            console.log('断开连接');
            ws.close();
        };*/

        /**
         * 测试：服务端断开所有websocket连接
         */
        $scope.serverClose = function(){
            PujjrPushRestangular.one('closeall').get()
                .then(function(responseData){

                });
        };

        $scope.doSend = function(){
            console.log("消息发送");
            console.log($scope);
            console.log($scope);
            WebsocketService.doSend($scope.sendMsg);
        };

        $scope.doPush = function(){
            PujjrPushRestangular.one('startpush').get()
                .then(function(responseData){

                });
        };


    }]);

/**
 * Created by pujjr on 2017/7/19.
 */

angular.module('com.app.websocket.service')
    .provider('WebsocketService',['$injector',function($injector){
        var wsUrl = "";
        var ws = "";
        var connectStatus = "01";//连接状态,01:断开连接；00：打开连接
        var results = [];//存储服务端返回消息
        var wsStatus = "";

        /**
         * 获取websocket连接状态
         * @returns {string}
         */
        var getWsStatus = function(){
            /**
             * readyState说明：
             * 0:connecting；1:open;2:closing;3:closed
             */
            wsStatus = ws.readyState;
            return wsStatus;
        };
        var wsConnect = function(){

            if(connectStatus == "01"){
                ws = new WebSocket(wsUrl);
                ws.onopen = function(evt){
                    console.log('连接成功');
                    connectStatus = "00";
                };
                ws.onclose = function(evt){
                    console.log(evt);
                    connectStatus = "01";
                };
                ws.onmessage = function(responseData){
                    results.push(responseData.data);
                };
                ws.onerror = function(evt){
                    console.log(evt);
                };
            }else{
                console.log("当前客户端已建立websocket连接");
            }
        };

        //坐席签出
        var checkOut = function(sendMsg,eventMsg){

        };

        /**
         * get区域
         */
        var getResults = function(){
          return results;
        };
        var getConnectStatus = function(){
            return connectStatus;
        };
        var doSend = function(sendMsg){
            console.log("发送报文："+JSON.stringify(sendMsg));
            console.log(ws);
            ws.send(JSON.stringify(sendMsg));
        };
        var getWebSocketUrl = function(){
            return wsUrl;
        };

       this.setWebSocketUrl = function(webSocketUrl){
            wsUrl = webSocketUrl;
            console.log("设置参数setBaseUrl:"+wsUrl);
        };
        /*return {
            $get : function(){
                var name = 'aa';
                console.log("*******$get********");
                function getName(){
                    var $rootScope = $injector.get('$rootScope');
                    return name;
                }
                function setWebSocketUrl(webSocketUrl){
                    var $rootScope = $injector.get('$rootScope');
                    wsUrl = webSocketUrl;
                    console.log("设置参数setBaseUrl:"+wsUrl);
                }

                return {
                    'wsConnect':wsConnect,
                    'doSend':doSend,
                    'getWebSocketUrl':getWebSocketUrl,
                    'getResults':getResults,
                    'getConnectStatus':getConnectStatus,
                    'getWsStatus':getWsStatus,
                    getName:getName,
                    setWebSocketUrl:setWebSocketUrl
                }
            }
        };*/
        this.$get = function(){
            var name = 'aa';
            console.log("*******$get********");
            return {
                'wsConnect':wsConnect,
                'doSend':doSend,
                'getWebSocketUrl':getWebSocketUrl,
                'getResults':getResults,
                'getConnectStatus':getConnectStatus,
                'getWsStatus':getWsStatus
            }
        };
    }]);


/**
 * Created by pujjr on 2017/7/19.
 */
angular.module('com.app.user.controller.UserController',[])
    .controller('UserController',['$scope','$rootScope',function($scope,$rootScope){
        $scope.showCallCenter = function(){
            console.log("UserController");
            $rootScope.$emit($rootScope.eventShowCallCenter,{msg:'展开callcenter面板'});
        };
        $scope.hideCallCenter = function(){
            $rootScope.$emit($rootScope.eventHideCallCenter,{msg:'隐藏callcenter面板'});
        };
        $scope.getFormData = function(){
          console.log($scope.userName);
        };
        this.myLinkTest = function(){
            alert("myLinkTest");
            console.log($(this));
        };

    }]);

/**
 * Created by Administrator on 2017/7/21.
 */
angular.module('com.app.user.directive')
    .directive('myDirective4',function(){
        return{
            restrict:"EA",
            replace:true,
            scope:{
                myUrl4:'=someUrl'//双向数据绑定（采用了绑定策略“=”而非“@”），与指令外的DOM属性some-url值：theirUrl表示的作用域变量相绑定
                //myLinkText4:'@'
            },
            /*template:'指令内：输入需要跳转到地址(指令内)(指令内输入，同时同步外部信息【p55页内容】)<input type="text" ng-model="myUrl4"/>' +
            '<a href="{{myLinkText4}}">{{myLinkText4}}</a>' +
            '<button type="button" ng-click="getData()">点击获取指令模板表单值表单值</button>',*/
            //templateUrl:'html/module_user/tpl/myDirective4.tpl.html',
            /*controller:function($scope){
                $scope.getData = function(){
                    console.log($scope.myUrl4);
                };
            }*/
            controller:'UserController'
        };
       /* return {
            restrict: 'EA',
            scope:{},
            controller: function() {
                // this.data = ['1', '2', '3', '4', '5'];
                data = ['1', '2', '3', '4', '5'];
                this.click = function() {
                    data.pop();
                    console.log(data);
                };
                this.myLinkTest = function(){
                    alert("myLinkTest");
                    console.log($(this));
                };
                this.sonClick = function(){
                    alert("sonClick");
                    console.log($(this));
                };


            },
            link: function(scope, elem, attrs) {
                scope.name = '123';
            },
            template: '<span>{{name}}<div ng-transclude></div></span>',
            replace: true,
            transclude: true
        };*/
    });


angular.module('templates', []).run(['$templateCache', function($templateCache) {$templateCache.put('app/route/route.html','<div>\r\n    <div>route.tpl.html</div>\r\n    <div>\u7528\u6237\u7BA1\u7406\u9875\u9762</div>\r\n</div>\r\n');
$templateCache.put('app/toaster/toaster.html','<div>\r\n   <!-- <toaster-container\r\n            toaster-timeout="{\'time-out\':{\'toast-info\':1000,\'toast-success\':1000,\'toast-warning\':2000,\'toast-error\':3000}}"\r\n            toast-options="{close-button:true}">\r\n    </toaster-container>-->\r\n   <!-- <toaster-container toaster-options="{\'time-out\': 2000}"></toaster-container>-->\r\n    <toaster-container toaster-options="{\'time-out\':{\'toast-info\':1000,\'toast-success\':1000,\'toast-warning\':2000,\'toast-error\':3000},\'close-button\':true,\'newest-on-top\':false}">\r\n\r\n    </toaster-container>\r\n    <h1>Hello Plunker!</h1>\r\n    <div ng-controller="ToasterController">\r\n        <button ng-click="pop()">Show a Toaster</button>\r\n    </div>\r\n</div>');
$templateCache.put('app/tpl/userNamage.html','<div>\r\n    \u7528\u6237\u7BA1\u7406\r\n</div>');
$templateCache.put('app/transclude/multi-transclude.html','<div>\r\n    <div  ng-transclude="title"></div>\r\n    <div>***************************************</div>\r\n    <div  ng-transclude="body"></div>\r\n    <div>---------------------------------------</div>\r\n    <div  ng-transclude="footer"></div>\r\n</div>');
$templateCache.put('app/transclude/sideBox.html','<div style="border: 1px solid red; background-color: #C9D6E0;width:400px;">\r\n    <div class="sidebox">\r\n        <div>\u4F7F\u7528transclude\u5C5E\u6027\uFF0C\u521B\u5EFA\u7684\u516C\u7528\u7EC4\u4EF6</div>\r\n        <div class="content">\r\n            <h2 class="header">{{ tangTitle }}</h2>\r\n            <span class="content" ng-transclude>\r\n            </span>\r\n        </div>\r\n    </div>\r\n</div>');
$templateCache.put('app/transclude/transclude.html','<div>\r\n    <div>\u6A21\u677F\u6587\u4EF6</div>\r\n    <div ng-transclude>\r\n        \u6307\u4EE4\u5143\u7D20\u5D4C\u5165\u90E8\u5206\r\n    </div>\r\n</div>\r\n');
$templateCache.put('app/uirouter/photo-detail.html','<div>\u7167\u7247\u8BE6\u60C555555555555555555</div>');
$templateCache.put('app/uirouter/photo.html','<div>\r\n    <div>photo\u6A21\u677F\u9875\u9762\u663E\u793A\u5B50\u6A21\u677F\u5185\u5BB9\r\n        <a ui-sref="photo.detail">\u8DF3\u8F6C\u5230\u7167\u7247\u8BE6\u60C5</a>\r\n        <div ui-view></div>\r\n    </div>\r\n</div>');
$templateCache.put('app/uirouter/uirouter.html','<div>\r\n    start\r\n</div>');
$templateCache.put('app/uirouter/userManage.html','<div>\r\n    \u7528\u6237\u7BA1\u7406\r\n</div>');
$templateCache.put('app/xhr/loginTemplate.html','\r\n<div>\r\n    <input type="radio" ng-model="myVar" value="1">\u767B\u5F55\r\n    <input type="radio" ng-model="myVar" value="2">\u6CE8\u518C\r\n    <div>\u6307\u4EE4\u6A21\u677F\u4E2D\u5C55\u73B0\u7236scope\u5BF9\u8C61\u4F20\u5165\u503C\uFF1A{{myParentName}}</div>\r\n    <div ng-show="showLoginForm==1" style="background-color: #C9D6E0;width:600px;">\r\n        \u7528\u6237\u767B\u5F55\uFF1A\r\n        <form ng-submit="submitLogin()">\r\n            \u7528\u6237\u540D\uFF1A<input type="text" ng-model="userName"/>\r\n            \u5BC6\u7801\uFF1A<input type="text" ng-model="password"/>\r\n            <input type="submit" value="\u767B\u5F55"/>\r\n        </form>\r\n    </div>\r\n    <div ng-show="showLoginForm==2" style="background-color: #F2F5F7;width:600px;">\r\n        \u7528\u6237\u6CE8\u518C\uFF1A\r\n        <form ng-submit="submitRegister()">\r\n            \u7528\u6237\u540D\uFF1A<input type="text" ng-model="userName"/>\r\n            \u5BC6\u7801\uFF1A<input type="text" ng-model="password"/>\r\n            <input type="submit" value="\u6CE8\u518C"/>\r\n        </form>\r\n    </div>\r\n</div>\r\n');
$templateCache.put('app/module-angularuibootstrap/tpl/angularuibootstrap.html','<div ng-controller="UiBootstrapController">\r\n    angular ui bootstrap \u6D4B\u8BD5\u3002\r\n    <div>\r\n        \u6298\u53E0\u63A7\u4EF6\r\n        <button type="button" class="btn btn-default" ng-click="isCollapsed = !isCollapsed">Toggle collapse Vertically</button>\r\n        <hr>\r\n        <div uib-collapse="isCollapsed">\r\n            <div class="well well-lg">Some content</div>\r\n        </div>\r\n\r\n        <button type="button" class="btn btn-default" ng-click="isCollapsedHorizontal = !isCollapsedHorizontal">Toggle collapse Horizontally</button>\r\n        <hr>\r\n        <div class="horizontal-collapse" uib-collapse="isCollapsedHorizontal" horizontal>\r\n            <div class="well well-lg">Some content</div>\r\n        </div>\r\n    </div>\r\n    <hr/>\r\n\r\n    <div>\r\n        \u65E5\u671F\u63A7\u4EF6\r\n        <pre>Selected date is: <em>{{dt | date:\'fullDate\' }}</em></pre>\r\n\r\n        <h4>Popup</h4>\r\n        <div class="row">\r\n            <div class="col-md-6">\r\n                <p class="input-group">\r\n                    <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="dt" is-open="popup1.opened" datepicker-options="dateOptions" ng-required="true" close-text="\u5173\u95ED" current-text="\u4ECA\u5929" clear-text="\u6E05\u9664" alt-input-formats="altInputFormats" />\r\n          <span class="input-group-btn">\r\n            <button type="button" class="btn btn-default" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n          </span>\r\n                </p>\r\n            </div>\r\n\r\n            <div class="col-md-6">\r\n                <p class="input-group">\r\n                    <input type="text" class="form-control" uib-datepicker-popup ng-model="dt" is-open="popup2.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" />\r\n          <span class="input-group-btn">\r\n            <button type="button" class="btn btn-default" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n          </span>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-md-6">\r\n                <label>Format: <span class="muted-text">(manual alternate <em>{{altInputFormats[0]}}</em>)</span></label> <select class="form-control" ng-model="format" ng-options="f for f in formats"><option></option></select>\r\n            </div>\r\n        </div>\r\n\r\n        <hr />\r\n        <button type="button" class="btn btn-sm btn-info" ng-click="today()">Today</button>\r\n        <button type="button" class="btn btn-sm btn-default" ng-click="setDate(2009, 7, 24)">2009-08-24</button>\r\n        <button type="button" class="btn btn-sm btn-danger" ng-click="clear()">Clear</button>\r\n        <button type="button" class="btn btn-sm btn-default" ng-click="toggleMin()" uib-tooltip="After today restriction">Min date</button>\r\n    </div>\r\n\r\n</div>');
$templateCache.put('app/module-blocks/tpl/aside.html','<div class="aside-wrap">\r\n  <!-- if you want to use a custom scroll when aside fixed, use the slimScroll\r\n    <div class="navi-wrap" ui-jq="slimScroll" ui-options="{height:\'100%\', size:\'8px\'}">\r\n  -->\r\n  <div class="navi-wrap">\r\n    <!-- user -->\r\n    <div class="clearfix hidden-xs text-center hide" id="aside-user">\r\n      <div class="dropdown wrapper" dropdown>\r\n        <a ui-sref="app.page.profile">\r\n          <span class="thumb-lg w-auto-folded avatar m-t-sm">\r\n            <img src="img/a0.jpg" class="img-full" alt="...">\r\n          </span>\r\n        </a>\r\n        <a href class="dropdown-toggle hidden-folded" dropdown-toggle>\r\n          <span class="clear">\r\n            <span class="block m-t-sm">\r\n              <strong class="font-bold text-lt">John.Smith</strong> \r\n              <b class="caret"></b>\r\n            </span>\r\n            <span class="text-muted text-xs block">Art Director</span>\r\n          </span>\r\n        </a>\r\n        <!-- dropdown -->\r\n        <ul class="dropdown-menu animated fadeInRight w hidden-folded">\r\n          <li class="wrapper b-b m-b-sm bg-info m-t-n-xs">\r\n            <span class="arrow top hidden-folded arrow-info"></span>\r\n            <div>\r\n              <p>300mb of 500mb used</p>\r\n            </div>\r\n            <progressbar value="60" type="white" class="progress-xs m-b-none dker"></progressbar>\r\n          </li>\r\n          <li>\r\n            <a href>Settings</a>\r\n          </li>\r\n          <li>\r\n            <a ui-sref="app.page.profile">Profile</a>\r\n          </li>\r\n          <li>\r\n            <a href>\r\n              <span class="badge bg-danger pull-right">3</span>\r\n              Notifications\r\n            </a>\r\n          </li>\r\n          <li class="divider"></li>\r\n          <li>\r\n            <a ui-sref="access.signin">Logout</a>\r\n          </li>\r\n        </ul>\r\n        <!-- / dropdown -->\r\n      </div>\r\n      <div class="line dk hidden-folded"></div>\r\n    </div>\r\n    <!-- / user -->\r\n\r\n    <!-- nav -->\r\n    <nav ui-nav class="navi" ng-include="\'app/module-blocks/tpl/nav.html\'"></nav>\r\n    <!-- nav -->\r\n\r\n    <!-- aside footer -->\r\n    <div class="wrapper m-t">\r\n      <div class="text-center-folded">\r\n        <span class="pull-right pull-none-folded">60%</span>\r\n        <span class="hidden-folded" translate="aside.MILESTONE">Milestone</span>\r\n      </div>\r\n      <progressbar value="60" class="progress-xxs m-t-sm dk" type="info"></progressbar>\r\n      <div class="text-center-folded">\r\n        <span class="pull-right pull-none-folded">35%</span>\r\n        <span class="hidden-folded" translate="aside.RELEASE">Release</span>\r\n      </div>\r\n      <progressbar value="35" class="progress-xxs m-t-sm dk" type="primary"></progressbar>\r\n    </div>\r\n    <!-- / aside footer -->\r\n  </div>\r\n</div>');
$templateCache.put('app/module-blocks/tpl/header.html','\r\n      <!-- navbar header -->\r\n      <div class="navbar-header {{app.settings.navbarHeaderColor}}">\r\n        <button class="pull-right visible-xs dk" ui-toggle-class="show" data-target=".navbar-collapse">\r\n          <i class="glyphicon glyphicon-cog"></i>\r\n        </button>\r\n        <button class="pull-right visible-xs" ui-toggle-class="off-screen" data-target=".app-aside" ui-scroll="app">\r\n          <i class="glyphicon glyphicon-align-justify"></i>\r\n        </button>\r\n        <!-- brand -->\r\n        <a href="#/" class="navbar-brand text-lt">\r\n          <i class="fa fa-btc"></i>\r\n          <img src="img/logo.png" alt="." class="hide">\r\n          <span class="hidden-folded m-l-xs">{{app.name}}</span>\r\n        </a>\r\n        <!-- / brand -->\r\n      </div>\r\n      <!-- / navbar header -->\r\n\r\n      <!-- navbar collapse -->\r\n      <div class="collapse pos-rlt navbar-collapse box-shadow {{app.settings.navbarCollapseColor}}" ng-controller="UserController">\r\n        <ul class="nav navbar-nav">\r\n          <li class="dropdown">\r\n            <a  class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">\u5F53\u524D\u7528\u6237:{{user.userId}}<span class="caret"></span></a>\r\n            <ul class="dropdown-menu">\r\n              <li><a href="javascript:void(0)" ng-click="signOut()">\u9000\u51FA\u7CFB\u7EDF</a></li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n\r\n        <!-- link and dropdown -->\r\n       <ul class="nav navbar-nav hidden-sm">\r\n          <li class="dropdown pos-stc" dropdown>\r\n            <a href class="dropdown-toggle" dropdown-toggle>\r\n              <span>Mega</span>\r\n              <span class="caret"></span>\r\n            </a>\r\n            <div class="dropdown-menu wrapper w-full bg-white">\r\n              <div class="row">\r\n                <div class="col-sm-4">\r\n                  <div class="m-l-xs m-t-xs m-b-xs font-bold">Pages <span class="badge badge-sm bg-success">10</span></div>\r\n                  <div class="row">\r\n                    <div class="col-xs-6">\r\n                      <ul class="list-unstyled l-h-2x">\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Profile</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Post</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Search</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Invoice</a>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                    <div class="col-xs-6">\r\n                      <ul class="list-unstyled l-h-2x">\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Price</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Lock screen</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Sign in</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Sign up</a>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-4 b-l b-light">\r\n                  <div class="m-l-xs m-t-xs m-b-xs font-bold">UI Kits <span class="label label-sm bg-primary">12</span></div>\r\n                  <div class="row">\r\n                    <div class="col-xs-6">\r\n                      <ul class="list-unstyled l-h-2x">\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Buttons</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Icons <span class="badge badge-sm bg-warning">1000+</span></a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Grid</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Widgets</a>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                    <div class="col-xs-6">\r\n                      <ul class="list-unstyled l-h-2x">\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Bootstap</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Sortable</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Portlet</a>\r\n                        </li>\r\n                        <li>\r\n                          <a href><i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Timeline</a>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class="col-sm-4 b-l b-light">\r\n                  <div class="m-l-xs m-t-xs m-b-sm font-bold">Analysis</div>\r\n                  <div class="text-center">\r\n                    <div class="inline">\r\n                      <div ui-jq="easyPieChart" ui-options="{\r\n                          percent: 65,\r\n                          lineWidth: 50,\r\n                          trackColor: \'{{app.color.light}}\',\r\n                          barColor: \'{{app.color.info}}\',\r\n                          scaleColor: false,\r\n                          size: 100,\r\n                          rotate: 90,\r\n                          lineCap: \'butt\',\r\n                          animate: 2000\r\n                        }">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </li>\r\n          <li class="dropdown" dropdown>\r\n            <a href class="dropdown-toggle" dropdown-toggle>\r\n              <i class="fa fa-fw fa-plus visible-xs-inline-block"></i>\r\n              <span translate="header.navbar.new.NEW">New</span> <span class="caret"></span>\r\n            </a>\r\n            <ul class="dropdown-menu" role="menu">\r\n              <li><a href="#" translate="header.navbar.new.PROJECT">Projects</a></li>\r\n              <li>\r\n                <a href>\r\n                  <span class="badge bg-info pull-right">5</span>\r\n                  <span translate="header.navbar.new.TASK">Task</span>\r\n                </a>\r\n              </li>\r\n              <li><a href translate="header.navbar.new.USER">User</a></li>\r\n              <li class="divider"></li>\r\n              <li>\r\n                <a href>\r\n                  <span class="badge bg-danger pull-right">4</span>\r\n                  <span translate="header.navbar.new.EMAIL">Email</span>\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n        <!-- / link and dropdown -->\r\n\r\n        <!-- search form -->\r\n       <form class="navbar-form navbar-form-sm navbar-left shift" ui-shift="prependTo" target=".navbar-collapse" role="search" ng-controller="TypeaheadDemoCtrl">\r\n          <div class="form-group">\r\n            <div class="input-group">\r\n              <input type="text" ng-model="selected" typeahead="state for state in states | filter:$viewValue | limitTo:8" class="form-control input-sm bg-light no-border rounded padder" placeholder="Search projects...">\r\n              <span class="input-group-btn">\r\n                <button type="submit" class="btn btn-sm bg-light rounded"><i class="fa fa-search"></i></button>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <!-- / search form -->\r\n\r\n        <!-- nabar right -->\r\n        <ul class="nav navbar-nav navbar-right">\r\n          <li class="dropdown hidden-sm" is-open="lang.isopen" dropdown>\r\n            <a href class="dropdown-toggle" dropdown-toggle>\r\n              {{selectLang}} <b class="caret"></b>\r\n            </a>\r\n            <!-- dropdown -->\r\n           <!-- <ul class="dropdown-menu animated fadeInRight w">\r\n              <li ng-repeat="(langKey, label) in langs">\r\n                <a ng-click="setLang(langKey, $event)" href>{{label}}</a>\r\n              </li>\r\n            </ul>-->\r\n            <!-- / dropdown -->\r\n          </li>\r\n          <li class="hidden-xs">\r\n            <a ui-fullscreen></a>\r\n          </li>\r\n          <li class="dropdown" dropdown>\r\n            <a href class="dropdown-toggle" dropdown-toggle>\r\n              <i class="icon-bell fa-fw"></i>\r\n              <span class="visible-xs-inline">Notifications</span>\r\n              <span class="badge badge-sm up bg-danger pull-right-xs">2</span>\r\n            </a>\r\n            <!-- dropdown -->\r\n            <div class="dropdown-menu w-xl animated fadeInUp">\r\n              <div class="panel bg-white">\r\n                <div class="panel-heading b-light bg-light">\r\n                  <strong>You have <span>2</span> notifications</strong>\r\n                </div>\r\n                <div class="list-group">\r\n                  <a href class="media list-group-item">\r\n                    <span class="pull-left thumb-sm">\r\n                      <img src="img/a0.jpg" alt="..." class="img-circle">\r\n                    </span>\r\n                    <span class="media-body block m-b-none">\r\n                      Use awesome animate.css<br>\r\n                      <small class="text-muted">10 minutes ago</small>\r\n                    </span>\r\n                  </a>\r\n                  <a href class="media list-group-item">\r\n                    <span class="media-body block m-b-none">\r\n                      1.0 initial released<br>\r\n                      <small class="text-muted">1 hour ago</small>\r\n                    </span>\r\n                  </a>\r\n                </div>\r\n                <div class="panel-footer text-sm">\r\n                  <a href class="pull-right"><i class="fa fa-cog"></i></a>\r\n                  <a href="#notes" data-toggle="class:show animated fadeInRight">See all the notifications</a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- / dropdown -->\r\n          </li>\r\n          <li class="dropdown" dropdown>\r\n            <a href class="dropdown-toggle clear" dropdown-toggle>\r\n              <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">\r\n                <img src="img/a0.jpg" alt="...">\r\n                <i class="on md b-white bottom"></i>\r\n              </span>\r\n              <span class="hidden-sm hidden-md">John.Smith</span> <b class="caret"></b>\r\n            </a>\r\n            <!-- dropdown -->\r\n            <ul class="dropdown-menu animated fadeInRight w">\r\n              <li class="wrapper b-b m-b-sm bg-light m-t-n-xs">\r\n                <div>\r\n                  <p>300mb of 500mb used</p>\r\n                </div>\r\n                <progressbar value="60" class="progress-xs m-b-none bg-white"></progressbar>\r\n              </li>\r\n              <li>\r\n                <a href>\r\n                  <span class="badge bg-danger pull-right">30%</span>\r\n                  <span>Settings</span>\r\n                </a>\r\n              </li>\r\n              <li>\r\n                <a ui-sref="app.page.profile">Profile</a>\r\n              </li>\r\n              <li>\r\n                <a ui-sref="app.docs">\r\n                  <span class="label bg-info pull-right">new</span>\r\n                  Help\r\n                </a>\r\n              </li>\r\n              <li class="divider"></li>\r\n              <li>\r\n                <a ui-sref="access.signin">Logout</a>\r\n              </li>\r\n            </ul>\r\n            <!-- / dropdown -->\r\n          </li>\r\n        </ul>\r\n        <!-- / navbar right -->\r\n\r\n      </div>\r\n      <!-- / navbar collapse -->');
$templateCache.put('app/module-blocks/tpl/nav.html','<!-- list -->\r\n<ul class="nav">\r\n\r\n  <li class="hidden-folded padder m-t m-b-sm text-muted text-xs">\r\n    <span translate="\u83DC\u5355\u680F">Navigation</span>\r\n  </li>\r\n\r\n  <li>\r\n    <a href class="auto">\r\n      <span class="pull-right text-muted">\r\n        <i class="fa fa-fw fa-angle-right text"></i>\r\n        <i class="fa fa-fw fa-angle-down text-active"></i>\r\n      </span>\r\n      <i class="glyphicon glyphicon-stats icon text-primary-dker"></i>\r\n      <span class="font-bold" translate="\u7CFB\u7EDF\u7BA1\u7406">Dashboard</span>\r\n    </a>\r\n    <ul class="nav nav-sub dk">\r\n      <!--<li class="nav-sub-header">\r\n        <a href>\r\n          <span translate="aside.nav.DASHBOARD">Dashboard</span>\r\n        </a>\r\n      </li>-->\r\n      <li ui-sref-active="active">\r\n        <a ui-sref="app.user.manage">\r\n          <span>\u7528\u6237\u7BA1\u7406</span>\r\n        </a>\r\n      </li>\r\n      <li ui-sref-active="active">\r\n        <a ui-sref="app.org.manage">\r\n          <span>\u673A\u6784\u7BA1\u7406</span>\r\n        </a>\r\n      </li>\r\n      <li ui-sref-active="active">\r\n        <a ui-sref="app.dashboard-v2">\r\n          <span>\u89D2\u8272\u7BA1\u7406</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </li>\r\n\r\n  <li>\r\n    <a href class="auto">\r\n      <span class="pull-right text-muted">\r\n        <i class="fa fa-fw fa-angle-right text"></i>\r\n        <i class="fa fa-fw fa-angle-down text-active"></i>\r\n      </span>\r\n      <i class="glyphicon glyphicon-stats icon text-primary-dker"></i>\r\n      <span class="font-bold" translate="\u6D41\u7A0B\u7BA1\u7406">Dashboard</span>\r\n    </a>\r\n    <ul class="nav nav-sub dk">\r\n      <li ui-sref-active="active">\r\n        <a ui-sref="app.process.manage">\r\n          <span>\u6D41\u7A0B\u7BA1\u7406</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    <ul class="nav nav-sub dk">\r\n      <li ui-sref-active="active">\r\n        <a ui-sref="app.process.query">\r\n          <span>\u6D41\u7A0B\u67E5\u8BE2</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    <ul class="nav nav-sub dk">\r\n      <li ui-sref-active="active">\r\n        <a ui-sref="app.process.task">\r\n          <span>\u5F85\u529E\u4EFB\u52A1</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    <ul class="nav nav-sub dk">\r\n      <li ui-sref-active="active">\r\n        <a ui-sref="app.process.model">\r\n          <span>\u6A21\u578B\u7BA1\u7406</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    <ul class="nav nav-sub dk">\r\n      <li ui-sref-active="active">\r\n        <a ui-sref="app.angularuibootstrap.test">\r\n          <span>angularuibootstrap</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    <ul class="nav nav-sub dk">\r\n      <li ui-sref-active="active">\r\n        <a ui-sref="app.websocket.manage">\r\n          <span>websocket\u6D4B\u8BD5</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n\r\n  </li>\r\n\r\n  <li ui-sref-active="active">\r\n    <a ui-sref="app.calendar">\r\n      <i class="glyphicon glyphicon-calendar icon text-info-dker"></i>\r\n      <span class="font-bold">\u65E5\u5386</span>\r\n    </a>\r\n  </li>\r\n\r\n  <li ui-sref-active="active">\r\n    <a ui-sref="app.mail.list">\r\n      <b class="badge bg-info pull-right">9</b>\r\n      <i class="glyphicon glyphicon-envelope icon text-info-lter"></i>\r\n      <span class="font-bold" translate="\u90AE\u4EF6">Email</span>\r\n    </a>\r\n  </li>\r\n\r\n</ul>\r\n<!-- / list -->');
$templateCache.put('app/module-blocks/tpl/page_footer.html','<p>\r\n  <small class="text-muted">Web app framework base on Bootstrap and AngularJS<br>&copy; 2014</small>\r\n</p>');
$templateCache.put('app/module-blocks/tpl/settings.html','<!-- settings -->\r\n  <button class="btn btn-default no-shadow pos-abt" ui-toggle-class="active" target=".settings">\r\n    <i class="fa fa-phone-square fa-lg"></i>\r\n  </button>\r\n\r\n  <div class="panel-heading">\r\n    \u547C\u53EB\u4E2D\u5FC3\r\n  </div>\r\n  <div class="panel-body"> \r\n    <div class="m-b-sm">\r\n      <label class="i-switch bg-info pull-right">\r\n        <input type="checkbox" ng-model="app.settings.headerFixed">\r\n        <i></i>\r\n      </label>\r\n      Fixed header \r\n    </div>\r\n    <div class="m-b-sm">\r\n      <label class="i-switch bg-info pull-right">\r\n        <input type="checkbox" ng-model="app.settings.asideFixed">\r\n        <i></i>\r\n      </label>\r\n      Fixed aside \r\n    </div>\r\n    <div class="m-b-sm">\r\n      <label class="i-switch bg-info pull-right">\r\n        <input type="checkbox" ng-model="app.settings.asideFolded">\r\n        <i></i>\r\n      </label>\r\n      Folded aside \r\n    </div>\r\n    <div class="m-b-sm">\r\n      <label class="i-switch bg-info pull-right">\r\n        <input type="checkbox" ng-model="app.settings.asideDock">\r\n        <i></i>\r\n      </label>\r\n      Dock aside\r\n    </div>\r\n    <div>\r\n      <label class="i-switch bg-info pull-right">\r\n        <input type="checkbox" ng-model="app.settings.container">\r\n        <i></i>\r\n      </label>\r\n      Boxed layout\r\n    </div>\r\n  </div>\r\n  <div class="wrapper b-t b-light bg-light lter r-b">\r\n    <div class="row row-sm">\r\n      <div class="col-xs-6">\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-black\'; \r\n          app.settings.navbarCollapseColor=\'bg-white-only\'; \r\n          app.settings.asideColor=\'bg-black\';\r\n         ">\r\n          <input type="radio" name="a" ng-model="app.settings.themeID" value="1">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-black header"></b>\r\n            <b class="bg-white header"></b>\r\n            <b class="bg-black"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-dark\'; \r\n          app.settings.navbarCollapseColor=\'bg-white-only\'; \r\n          app.settings.asideColor=\'bg-dark\';\r\n         ">\r\n          <input type="radio" name="a" ng-model="app.settings.themeID" value="13">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-dark header"></b>\r\n            <b class="bg-white header"></b>\r\n            <b class="bg-dark"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-white-only\'; \r\n          app.settings.navbarCollapseColor=\'bg-white-only\'; \r\n          app.settings.asideColor=\'bg-black\';\r\n         ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="2">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-white header"></b>\r\n            <b class="bg-white header"></b>\r\n            <b class="bg-black"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-primary\'; \r\n          app.settings.navbarCollapseColor=\'bg-white-only\'; \r\n          app.settings.asideColor=\'bg-dark\';\r\n         ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="3">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-primary header"></b>\r\n            <b class="bg-white header"></b>\r\n            <b class="bg-dark"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-info\'; \r\n          app.settings.navbarCollapseColor=\'bg-white-only\'; \r\n          app.settings.asideColor=\'bg-black\';\r\n         ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="4">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-info header"></b>\r\n            <b class="bg-white header"></b>\r\n            <b class="bg-black"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-success\'; \r\n          app.settings.navbarCollapseColor=\'bg-white-only\'; \r\n          app.settings.asideColor=\'bg-dark\';\r\n         ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="5">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-success header"></b>\r\n            <b class="bg-white header"></b>\r\n            <b class="bg-dark"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-danger\'; \r\n          app.settings.navbarCollapseColor=\'bg-white-only\'; \r\n          app.settings.asideColor=\'bg-dark\';\r\n         ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="6">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-danger header"></b>\r\n            <b class="bg-white header"></b>\r\n            <b class="bg-dark"></b>\r\n          </span>\r\n        </label>\r\n      </div>\r\n      <div class="col-xs-6">\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-black\'; \r\n          app.settings.navbarCollapseColor=\'bg-black\'; \r\n          app.settings.asideColor=\'bg-white b-r\';\r\n         ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="7">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-black header"></b>\r\n            <b class="bg-black header"></b>\r\n            <b class="bg-white"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-dark\'; \r\n          app.settings.navbarCollapseColor=\'bg-dark\'; \r\n          app.settings.asideColor=\'bg-light\';\r\n         ">\r\n          <input type="radio" name="a" ng-model="app.settings.themeID" value="14">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-dark header"></b>\r\n            <b class="bg-dark header"></b>\r\n            <b class="bg-light"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-info dker\'; \r\n          app.settings.navbarCollapseColor=\'bg-info dker\'; \r\n          app.settings.asideColor=\'bg-light dker b-r\';\r\n         ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="8">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-info dker header"></b>\r\n            <b class="bg-info dker header"></b>\r\n            <b class="bg-light dker"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-primary\'; \r\n          app.settings.navbarCollapseColor=\'bg-primary\'; \r\n          app.settings.asideColor=\'bg-dark\';\r\n         ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="9">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-primary header"></b>\r\n            <b class="bg-primary header"></b>\r\n            <b class="bg-dark"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-info dker\'; \r\n          app.settings.navbarCollapseColor=\'bg-info dk\'; \r\n          app.settings.asideColor=\'bg-black\';\r\n         ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="10">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-info dker header"></b>\r\n            <b class="bg-info dk header"></b>\r\n            <b class="bg-black"></b>\r\n          </span>\r\n        </label>\r\n\r\n        <label class="i-checks block m-b" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-success\'; \r\n          app.settings.navbarCollapseColor=\'bg-success\';\r\n          app.settings.asideColor=\'bg-dark\';\r\n          ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="11">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-success header"></b>\r\n            <b class="bg-success header"></b>\r\n            <b class="bg-dark"></b>\r\n          </span>\r\n        </label>\r\n        \r\n        <label class="i-checks block" ng-click="\r\n          app.settings.navbarHeaderColor=\'bg-danger dker bg-gd\'; \r\n          app.settings.navbarCollapseColor=\'bg-danger dker bg-gd\'; \r\n          app.settings.asideColor=\'bg-dark\';\r\n         ">\r\n          <input type="radio" ng-model="app.settings.themeID" value="12">\r\n          <span class="block bg-light clearfix pos-rlt">\r\n            <span class="active pos-abt w-full h-full bg-black-opacity text-center">\r\n              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>\r\n            </span>\r\n            <b class="bg-danger dker header"></b>\r\n            <b class="bg-danger dker header"></b>\r\n            <b class="bg-dark"></b>\r\n          </span>\r\n        </label>\r\n      </div>\r\n    </div>\r\n    <div style="line-height: 100px;">\r\n      123\r\n    </div>\r\n  </div>\r\n<!-- /settings -->');
$templateCache.put('app/module-callcenter/tpl/callcenter.html','<!-- settings -->\r\n<!--<button class="\'btn\' btn-default no-shadow pos-abt {{activeCallCenter}}}"  ng-click="doActiveCallCenter()">-->\r\n <!-- <button class="btn btn-default no-shadow pos-abt" ng-click="doActiveCallCenter()">-->\r\n<button class="btn btn-default no-shadow pos-abt" ng-click="doActiveCallCenter()">\r\n    <i class="fa fa-phone-square"></i>\r\n  </button>\r\n\r\n  <div class="panel-heading">\r\n    \u547C\u53EB\u4E2D\u5FC3\r\n  </div>\r\n\r\n  <div class="panel-body">\r\n      <div class="input-group">\r\n          <span class="input-group-addon">\u5916\u547C\u7535\u8BDD\u53F7\u7801\uFF1A</span>\r\n          <input type="text" class="form-control" placeholder="\u8BF7\u8F93\u5165\u5916\u547C\u7535\u8BDD\u53F7\u7801" ng-model="inputParam"/>\r\n      </div>\r\n      <hr/>\r\n      <div>\r\n          <textarea name="callCenterStatus" style="height: 150px;width: 100%" value="" readonly = "true">{{callCenterStatus}}</textarea>\r\n      </div>\r\n      <hr/>\r\n      <div class="m-b-sm row">\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn {{checkInType}} col-xs-12"  ng-click="checkIn()" >\r\n                  <i class="fa fa-address-book"></i>\r\n                  {{checkInName}}\r\n                  <span class="badge badge-sm  pull-right-xs">4</span>\r\n              </button>\r\n          </div>\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="checkOut()">\r\n                  \u5750\u5E2D\u7B7E\u51FA\r\n                  <span class="badge hide">4</span>\r\n              </button>\r\n          </div>\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="seatBusy()">\r\n                  \u5750\u5E2D\u5FD9\r\n                  <span class="badge hide">4</span>\r\n              </button>\r\n          </div>\r\n      </div>\r\n\r\n      <div class="m-b-sm row">\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="seatIdle()">\r\n                  \u5750\u5E2D\u95F2\r\n                  <span class="badge  hide">4</span>\r\n              </button>\r\n          </div>\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="threeTalk()">\r\n                  \u4E09\u65B9\u901A\u8BDD\r\n                  <span class="badge  hide">4</span>\r\n              </button>\r\n          </div>\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="trans2Group()">\r\n                  \u8F6C\u5176\u4ED6\u5750\u5E2D\u7EC4\r\n                  <span class="badge  hide">4</span>\r\n              </button>\r\n          </div>\r\n      </div>\r\n\r\n      <div class="m-b-sm row">\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="trans2Seat()">\r\n                  \u8F6C\u5176\u4ED6\u5750\u5E2D\r\n                  <span class="badge  hide">4</span>\r\n              </button>\r\n          </div>\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="stayCall()">\r\n                  \u4FDD\u6301\u901A\u8BDD\r\n                  <span class="badge  hide">4</span>\r\n              </button>\r\n          </div>\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="cancelStayCall()">\r\n                  \u53D6\u6D88\u901A\u8BDD\u4FDD\u6301\r\n                  <span class="badge  hide">4</span>\r\n              </button>\r\n          </div>\r\n      </div>\r\n\r\n      <div class="m-b-sm row">\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="exitThreeCall()">\r\n                  \u9000\u51FA\u4E09\u65B9\u901A\u8BDD\r\n                  <span class="badge  hide">4</span>\r\n              </button>\r\n          </div>\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="killTalk()">\r\n                  \u6302\u673A\r\n                  <span class="badge  hide">4</span>\r\n              </button>\r\n          </div>\r\n          <div class="col-xs-4">\r\n              <button type="button" class="btn btn-default col-xs-12" ng-click="makeCall()">\r\n                  \u547C\u53EB\r\n                  <span class="badge hide">4</span>\r\n              </button>\r\n          </div>\r\n      </div>\r\n  </div>\r\n<!-- /settings -->');
$templateCache.put('app/module-callcenter/tpl/phone.html','<div>\r\n    <label ng-transclude></label>\r\n    <i class="fa fa-phone-square fa-xs {{phoneIconShow}}" ng-click="makeCallByClickPhoneNum()" ></i>\r\n</div>');
$templateCache.put('app/module-process/tpl/currTask.html','<div ng-controller="ProcessController">\r\n    \u5F85\u529E\u4EFB\u52A1\u67E5\u8BE2\r\n    <form>\r\n        <input type="button" value="\u5F85\u529E\u4EFB\u52A1\u67E5\u8BE2" ng-click="queryCurrProcess()"/>\r\n    </form>\r\n\r\n    <div>\r\n        <table class="table table-condensed table-bordered">\r\n            <thead>\r\n                <tr>\r\n                    <td>\u6D41\u7A0B\u5B9E\u4F8Bid</td><td>\u6D41\u7A0B\u5B9A\u4E49id</td><td>\u64CD\u4F5C</td>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="item in records">\r\n                <td>{{ item.id }}</td>\r\n                <td>{{ item.procDefId }}</td>\r\n                <td>\r\n                    <a ng-click="queryProcessDetail(item.id,item.procDefId)">\u6D41\u7A0B\u660E\u7EC6</a>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div ui-view = \'currTaskView\'></div>\r\n</div>');
$templateCache.put('app/module-process/tpl/modelManage.html','<div ng-controller="ProcessModelController">\r\n    \u6D41\u7A0B\u6A21\u578B\u7BA1\u7406\r\n    <form>\r\n        <input type="button" value="\u6A21\u578B\u67E5\u8BE2" ng-click="queryModel()"/>\r\n        <input type="button" value="\u6D41\u7A0B\u8BBE\u8BA1" ng-click="designProcess()"/>\r\n    </form>\r\n\r\n    <div>\r\n        <table class="table table-condensed table-bordered">\r\n            <thead>\r\n                <tr>\r\n                    <td>\u6A21\u578Bid</td><td>\u6A21\u578Bname</td><td>\u64CD\u4F5C</td>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="item in models">\r\n                <td>{{ item.id }}</td>\r\n                <td>{{ item.name }}</td>\r\n                <td>\r\n                    <a ng-click="editModel(item.id)">\u6A21\u578B\u7F16\u8F91</a>\r\n                    <a ng-click="deployModel(item.id)">\u6A21\u578B\u53D1\u5E03</a>\r\n                    <a ng-click="deleteModel(item.id)">\u6A21\u578B\u5220\u9664</a>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <!--<div>\r\n        \u6D41\u7A0B\u56FE\u5982\u4E0B\uFF1A\r\n        <div ui-view></div>\r\n    </div>-->\r\n</div>');
$templateCache.put('app/module-process/tpl/processDetail.html','<div ng-controller="ProcessController">\r\n    \u6D41\u7A0B\u660E\u7EC6\r\n    <input type="button" value="\u8FD4\u56DE" ng-click="goBack()"/>\r\n    <input type="button" value="\u67E5\u770B\u6D41\u7A0B\u56FE" ng-click="readDgrmResource()"/>\r\n    <input type="button" value="bpnm" ng-click="readResource()"/>\r\n    <input type="button" value="\u901A\u8FC7" ng-click="agree()"/>\r\n    <input type="button" value="\u62D2\u7EDD" ng-click="reject()"/>\r\n    <div>\r\n        <div ui-view="dgmnView"></div>\r\n    </div>\r\n</div>');
$templateCache.put('app/module-process/tpl/processDiagram.html','<div>\r\n    \u6D41\u7A0B\u56FE\uFF1A\r\n    <div>\r\n       <!-- <img src="http://localhost:8090/tlms-web/process/source/{{process.processInstId}}/{{process.resourceType}}"/>-->\r\n        <img src="{{dgrmSrc}}"/>\r\n    </div>\r\n</div>');
$templateCache.put('app/module-process/tpl/processManage.html','<div ng-controller="ProcessController">\r\n    \u6D41\u7A0B\u7BA1\u7406\r\n    <div>\r\n        <form>\r\n            <input type="button" value="\u5B9A\u4E49\u53D1\u5E03" ng-click="deployProcess()"/>\r\n            <input type="button" value="\u5B9A\u4E49\u6D41\u7A0B\u67E5\u8BE2" ng-click="queryDefineProcess()"/>\r\n        </form>\r\n    </div>\r\n    <div>\r\n        <table class="table table-condensed table-bordered">\r\n            <thead>\r\n            <tr>\r\n                <td>\u6D41\u7A0B\u5B9A\u4E49id</td><td>\u6D41\u7A0Bname</td><td>\u6D41\u7A0Bkey</td>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="item in records">\r\n                <td>{{ item.id }}</td>\r\n                <td>{{ item.name }}</td>\r\n                <td>{{ item.key }}</td>\r\n                <td>\r\n                    <a ng-click="startProcessByKey(item.key)">\u542F\u52A8\u6D41\u7A0B\u5B9A\u4E49</a>\r\n                    <a ng-click="deleteProcessDefCascade(item.id)">\u5220\u9664\u6D41\u7A0B\u5B9A\u4E49cascade</a>\r\n                    <a ng-click="deleteProcessDef(item.id)">>\u5220\u9664\u6D41\u7A0B\u5B9A\u4E49</a>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n</div>');
$templateCache.put('app/module-process/tpl/processQuery.html','<div ng-controller="ProcessController">\r\n    \u6240\u6709\u4EFB\u52A1\u67E5\u8BE2\r\n    <form>\r\n        <input type="button" value="\u6D41\u7A0B\u67E5\u8BE2" ng-click="queryProcess()"/>\r\n    </form>\r\n\r\n    <div>\r\n        <input type="text" name="\u4E1A\u52A1\u7F16\u7801" ng-model="bysiKey"/>\r\n        <input type="text" name="\u6D41\u7A0B\u5B9A\u4E49key" ng-model="pdKey"/>\r\n        <input type="button" value="\u67E5\u8BE2\u6D41\u7A0B" ng-click="querySpecialProc()"/>\r\n    </div>\r\n\r\n    <div>\r\n        <table class="table table-condensed table-bordered">\r\n            <thead>\r\n                <tr>\r\n                    <td>\u6D41\u7A0B\u5B9E\u4F8Bid</td><td>\u6D41\u7A0B\u5B9A\u4E49id</td><td>\u64CD\u4F5C</td>\r\n                </tr>\r\n\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="item in records">\r\n                <td>{{ item.id }}</td>\r\n                <td>{{ item.procDefId }}</td>\r\n                <td><a ng-click="queryProcessDetail(item.id,item.procDefId)">\u6D41\u7A0B\u660E\u7EC6</a></td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <!--<div>\r\n        \u6D41\u7A0B\u56FE\u5982\u4E0B\uFF1A\r\n        <div ui-view></div>\r\n    </div>-->\r\n</div>');
$templateCache.put('app/module-templatecache/tpl/templateCache.html','<!DOCTYPE html>\r\n<html ng-app="templateCacheApp">\r\n<head lang="en">\r\n    <meta charset="UTF-8">\r\n    <title></title>\r\n</head>\r\n<body>\r\n    <h1>templateCache\u6D4B\u8BD5</h1>\r\n\r\n</body>\r\n</html>');
$templateCache.put('app/module-user/tpl/myDirective4.html','<div>\r\n    \u6307\u4EE4\u5185\uFF1A\u8F93\u5165\u9700\u8981\u8DF3\u8F6C\u5230\u5730\u5740(\u6307\u4EE4\u5185)(\u6307\u4EE4\u5185\u8F93\u5165\uFF0C\u540C\u65F6\u540C\u6B65\u5916\u90E8\u4FE1\u606F\u3010p55\u9875\u5185\u5BB9\u3011)\r\n    <input type="text" ng-model="myUrl4"/>\r\n   <!-- <a href="{{myLinkText4}}">{{myLinkText4}}</a>-->\r\n    <button type="button" ng-click="getData()">\u70B9\u51FB\u83B7\u53D6\u6307\u4EE4\u6A21\u677F\u8868\u5355\u503C\u8868\u5355\u503C</button>\r\n    <div ng-transclude></div>\r\n</div>');
$templateCache.put('app/module-user/tpl/user.html','<div ng-controller="UserController2">\r\n\r\n\r\n    <nav class="navbar navbar-default">\r\n        <div class="container-fluid">\r\n            <!-- Brand and toggle get grouped for better mobile display -->\r\n            <div class="navbar-header">\r\n                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">\r\n                    <span class="sr-only">Toggle navigation</span>\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                </button>\r\n                <a class="navbar-brand" href="#">Brand</a>\r\n            </div>\r\n\r\n            <!-- Collect the nav links, forms, and other content for toggling -->\r\n            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                <ul class="nav navbar-nav">\r\n                    <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>\r\n                    <li><a>Link</a></li>\r\n                    <li class="dropdown">\r\n                        <a  class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>\r\n                        <ul class="dropdown-menu">\r\n                            <li><a href="#">Action</a></li>\r\n                            <li><a href="#">Another action</a></li>\r\n                            <li><a href="#">Something else here</a></li>\r\n                            <li role="separator" class="divider"></li>\r\n                            <li><a href="#">Separated link</a></li>\r\n                            <li role="separator" class="divider"></li>\r\n                            <li><a href="#">One more separated link</a></li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n                <form class="navbar-form navbar-left">\r\n                    <div class="form-group">\r\n                        <input type="text" class="form-control" placeholder="Search">\r\n                    </div>\r\n                    <button type="submit" class="btn btn-default">Submit</button>\r\n                </form>\r\n                <ul class="nav navbar-nav navbar-right">\r\n                    <li><a href="#">Link</a></li>\r\n                    <li class="dropdown">\r\n                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>\r\n                        <ul class="dropdown-menu">\r\n                            <li><a href="#">Action</a></li>\r\n                            <li><a href="#">Another action</a></li>\r\n                            <li><a href="#">Something else here</a></li>\r\n                            <li role="separator" class="divider"></li>\r\n                            <li><a href="#">Separated link</a></li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n            </div><!-- /.navbar-collapse -->\r\n        </div><!-- /.container-fluid -->\r\n    </nav>\r\n    \u7528\u6237\u7BA1\u7406\r\n    <form>\r\n        <div>\r\n            <input type="button" value="all get" ng-click="allGet()"/>\r\n            <input type="button" value="one get" ng-click="oneGet()"/>\r\n            <input type="button" value="one get2" ng-click="oneGet2()"/>\r\n            <input type="button" value="one get3" ng-click="oneGet3()"/>\r\n            <input type="button" value="one get4" ng-click="oneGet4()"/>\r\n            <input type="button" value="one get5" ng-click="oneGet5()"/>\r\n            <input type="button" value="one get6" ng-click="oneGet6()"/>\r\n            <input type="button" value="one get7" ng-click="oneGet7()"/>\r\n            <input type="button" value="one get list" ng-click="oneGetList()"/>\r\n        </div>\r\n        <div>\r\n            <input type="button" value="all post" ng-click="allPost()"/>\r\n        </div>\r\n\r\n        <div>\r\n            <input type="button" value="\u6A21\u62DF\u7528\u6237\u767B\u5F55" ng-click="userLogin()"/>\r\n            <input type="button" value="\u6A21\u62DF\u4EA4\u6613\uFF0C\u68C0\u9A8Ctoken\u6821\u9A8C" ng-click="doTrans()"/>\r\n        </div>\r\n\r\n    </form>\r\n</div>');
$templateCache.put('app/module-user/tpl/userLogin.html','<div ng-controller="UserController">\r\n\r\n\r\n    <div>\u7528\u6237\u767B\u5F55</div>\r\n    <div>\r\n        <form>\r\n            \u7528\u6237\u540D\uFF1A<input type="input" ng-model="user.userId"/>\r\n            \u5BC6\u7801\uFF1A<input type="password" ng-model="user.passwd"/>\r\n            <input type="button" value="\u767B\u5F55" ng-click="signIn()"/>\r\n        </form>\r\n    </div>\r\n</div>');
$templateCache.put('app/module-user/tpl/userManage.html','<div ng-controller="UserController">\r\n    \u7528\u6237\u7BA1\u7406\r\n    <button ng-click="showCallCenter()">\u6253\u5F00\u547C\u53EB\u4E2D\u5FC3\u9762\u677F</button>\r\n    <button ng-click="hideCallCenter()">\u9690\u85CF\u547C\u53EB\u4E2D\u5FC3\u9762\u677F</button>\r\n    <!--<div class="border-style">\r\n        <p>\u8BF4\u660E\uFF1A\u53CC\u5411\u6570\u636E\u7ED1\u5B9A\u6D4B\u8BD5</p>\r\n        \u8F93\u5165\u9700\u8981\u8DF3\u8F6C\u5230\u5730\u5740(\u6307\u4EE4\u5916)<input type="text" ng-model="theirUrl"/>\r\n        <div my-directive4\r\n             some-url="theirUrl"\r\n             my-link-text4=" my-directive4\u8DF3\u8F6C\u5230{{theirUrl}}(\u5411\u6307\u4EE4\u4E2D\u4F20\u9012\u6570\u636E)">\r\n        </div>\r\n    </div>-->\r\n\r\n    <input name="userName" ng-model="userName"/>\r\n    <button type="button" ng-click="getFormData()">\u70B9\u51FB\u5728controller\u5C42\u83B7\u53D6\u8868\u5355\u6570\u636E</button>\r\n    <hr/>\r\n   <!-- <div myDirective4>\r\n        <div my-link>18723290701</div>\r\n    </div>-->\r\n<!--    <div my-directive4>-->\r\n    phoneNum\uFF1A<input text="text" ng-model="phoneNum"/>\r\n    tenantPhone\uFF1A<input text="text" ng-model="tenantPhone"/>\r\n\r\n<!--link2\u6307\u4EE4-->\r\n<!--   <div call-center-directive-parent>\r\n        <div my-link2 attr-name="phoneNum" phone-num="phoneNum">\r\n            {{phoneNum}}\r\n        </div>\r\n    </div>-->\r\n\r\n    <div call-center-directive-parent>\r\n        <div  phone-num-directive attr-name="phoneNum"  phone-num="tenantPhone">\r\n        </div>\r\n        <!--<input phone-num-directive attr-name="phoneNum"  phone-num="tenantPhone"/>-->\r\n        <!--<div phone-num-directive attr-name="phoneNum"  phone-num="tenantPhone">\r\n            {{tenantPhone}}\r\n        </div>-->\r\n    </div>\r\n\r\n    <input type="text" phone-icon-directive ng-model="applyPhone"/>\r\n    <input type="text" phone-icon-directive ng-model="applyPhone2"/>\r\n    <label phone-icon-directive ng-model="applyPhone2">{{applyPhone2}}</label>\r\n\r\n</div>');
$templateCache.put('app/module-websocket/tpl/webSocketTest.html','<div ng-controller = \'WebsocketController\'>\r\n    websocket\u6D4B\u8BD5\r\n    <div>\r\n        \u6D88\u606F\u63A5\u6536\r\n        <textarea name="callCenterStatus" style="height: 150px;width: 100%" value="" readonly = "true">{{rcvServerMsg}}</textarea>\r\n    </div>\r\n    <div>\r\n        <input type="text" ng-model="sendMsg.userId"/>\r\n        <input type="button" value="\u8FDE\u63A5" ng-click="wsConnect()"/>\r\n        <input type="button" value="\u5BA2\u6237\u7AEF\u65AD\u5F00\u8FDE\u63A5" ng-click="wsClose()"/>\r\n        <input type="button" value="\u670D\u52A1\u7AEF\u65AD\u5F00\u8FDE\u63A5" ng-click="serverClose()"/>\r\n    </div>\r\n    <div>\r\n        <input type="button" value="\u7528\u6237\u7B7E\u5165" ng-click="doSend()"/>\r\n    </div>\r\n    <div>\r\n        <input type="button" value="\u63A8\u9001" ng-click="doPush()"/>\r\n    </div>\r\n\r\n</div>');}]);